(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{359:(e,t,r)=>{"use strict";r.d(t,{vx:()=>l,Nq:()=>c,mH:()=>o});var a=r(3464),n=r(9509);let s=a.A.create({baseURL:"".concat(n.env.NEXT_PUBLIC_SERVER),withCredentials:!0,headers:{"Content-Type":"application/json"}}),i=a.A.create({baseURL:"".concat(n.env.NEXT_PUBLIC_SERVER),withCredentials:!0,headers:{"Content-Type":"application/json"}}),o=async(e,t,r,a)=>i.post("/auth/login",{role:e,phone:r,name:a},{headers:{Authorization:"Bearer ".concat(t)}}),c=async()=>s.get("/auth/me"),l=async()=>s.post("/auth/logout")},995:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(5155),n=r(2115),s=r(5695),i=r(7409),o=r(5394),c=r(4913),l=r(4795);function d(){let{user:e,status:t}=(0,l.w)(),{getOrdersByCustomer:r}=(0,c.h)(),d=(0,s.useRouter)(),h=r((null==e?void 0:e.uid)||"customer_1");return((0,n.useEffect)(()=>{"authenticated"!==t?d.push("/auth/login"):e&&"sender"!==e.role&&d.push("/driver-dashboard")},[t,e,d]),"authenticated"!==t||e&&"sender"!==e.role)?null:(0,a.jsx)(o.A,{children:(0,a.jsxs)("div",{className:"page",children:[(0,a.jsxs)("div",{className:"status-bar",children:[(0,a.jsx)("span",{children:"9:41"}),(0,a.jsxs)("div",{className:"status-icons",children:[(0,a.jsx)("span",{children:"\uD83D\uDCF6"}),(0,a.jsx)("span",{children:"\uD83D\uDCF6"}),(0,a.jsx)("span",{children:"\uD83D\uDD0B"})]})]}),(0,a.jsxs)("div",{className:"content",children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px",padding:"0 8px"},children:[(0,a.jsx)("h1",{style:{fontSize:"28px",fontWeight:"700",color:"white"},children:"My Orders"}),(0,a.jsxs)("div",{style:{fontSize:"16px",fontWeight:"600",color:"#f97316",background:"rgba(249, 115, 22, 0.1)",padding:"8px 12px",borderRadius:"20px",border:"1px solid rgba(249, 115, 22, 0.3)"},children:[h.length," ",1===h.length?"Order":"Orders"]})]}),0===h.length?(0,a.jsxs)("div",{style:{textAlign:"center",paddingTop:"80px",paddingBottom:"120px"},children:[(0,a.jsx)("div",{style:{fontSize:"72px",marginBottom:"24px"},children:"\uD83D\uDCE6"}),(0,a.jsx)("h3",{style:{fontSize:"24px",fontWeight:"700",color:"white",marginBottom:"12px"},children:"No Orders Yet"}),(0,a.jsxs)("p",{style:{fontSize:"16px",color:"#9CA3AF",marginBottom:"32px",lineHeight:"1.5"},children:["Start your first delivery",(0,a.jsx)("br",{}),"with Pickom today!"]}),(0,a.jsx)("button",{onClick:()=>d.push("/"),style:{background:"linear-gradient(135deg, #f97316, #ea580c)",border:"none",borderRadius:"16px",color:"white",fontSize:"16px",fontWeight:"600",padding:"16px 32px",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 25px rgba(249, 115, 22, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:"\uD83D\uDCE6 Send Your First Package"})]}):(0,a.jsx)("div",{style:{paddingBottom:"120px"},children:h.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).map(e=>{let t=(e=>{let t={pending:{label:"Pending",icon:"⏳",color:"#f59e0b"},accepted:{label:"Accepted",icon:"✅",color:"#10b981"},heading_to_pickup:{label:"Driver En Route",icon:"\uD83D\uDE97",color:"#3b82f6"},package_collected:{label:"Collected",icon:"\uD83D\uDCE6",color:"#8b5cf6"},in_transit:{label:"In Transit",icon:"\uD83D\uDE9A",color:"#f97316"},delivered:{label:"Delivered",icon:"\uD83C\uDF89",color:"#10b981"}};return t[e]||t.pending})(e.status),r="delivered"!==e.status;return(0,a.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"20px",padding:"24px",marginBottom:"16px",border:r?"2px solid rgba(249, 115, 22, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",transition:"all 0.2s ease",cursor:"pointer"},onClick:()=>{r&&d.push("/track-package?orderId=".concat(e.id))},onMouseEnter:e=>{r&&(e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 25px rgba(0, 0, 0, 0.15)")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{fontSize:"18px",fontWeight:"700",color:"white",marginBottom:"4px"},children:["Order #",e.id.substring(0,8).toUpperCase()]}),(0,a.jsx)("div",{style:{fontSize:"14px",color:"#9CA3AF"},children:new Date(e.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,a.jsxs)("div",{style:{background:t.color,color:"white",fontSize:"12px",fontWeight:"600",padding:"6px 12px",borderRadius:"20px",display:"flex",alignItems:"center",gap:"6px"},children:[(0,a.jsx)("span",{children:t.icon}),(0,a.jsx)("span",{children:t.label})]})]}),(0,a.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"8px"},children:[(0,a.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"white"},children:"\uD83D\uDCCD Route"}),r&&(0,a.jsx)("div",{style:{background:"rgba(249, 115, 22, 0.2)",color:"#f97316",fontSize:"10px",fontWeight:"600",padding:"2px 8px",borderRadius:"10px",border:"1px solid rgba(249, 115, 22, 0.3)"},children:"ACTIVE"})]}),(0,a.jsxs)("div",{style:{fontSize:"14px",color:"#9CA3AF",lineHeight:"1.4"},children:[(0,a.jsxs)("div",{children:["From: ",e.pickupLocation]}),(0,a.jsxs)("div",{children:["To: ",e.dropoffLocation]})]})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:r?"20px":"0"},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{fontSize:"12px",color:"#9CA3AF",marginBottom:"4px"},children:"Package Type"}),(0,a.jsxs)("div",{style:{fontSize:"14px",fontWeight:"600",color:"white"},children:["\uD83D\uDCE6 ",e.packageType]})]}),(0,a.jsxs)("div",{style:{textAlign:"right"},children:[(0,a.jsx)("div",{style:{fontSize:"12px",color:"#9CA3AF",marginBottom:"4px"},children:"Total Cost"}),(0,a.jsxs)("div",{style:{fontSize:"18px",fontWeight:"700",color:"#10b981"},children:[e.price," PLN"]})]})]}),r&&(0,a.jsx)("div",{style:{background:"linear-gradient(135deg, #f97316, #ea580c)",borderRadius:"12px",padding:"12px",textAlign:"center",cursor:"pointer"},children:(0,a.jsxs)("div",{style:{fontSize:"14px",fontWeight:"600",color:"white",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:["\uD83D\uDCF1 Track Package",(0,a.jsx)("span",{style:{fontSize:"12px",opacity:.8},children:"→"})]})})]},e.id)})})]}),(0,a.jsx)(i.A,{})]})})}},4795:(e,t,r)=>{"use strict";r.d(t,{w:()=>s});var a=r(359),n=r(9563);function s(){let e=(0,n.n)(),t=async()=>{try{await (0,a.vx)(),e.clear()}catch(e){console.error("Logout error:",e)}},r=async()=>{try{let t=await (0,a.Nq)();e.set({status:"authenticated",user:t.data.user})}catch(t){console.error("Fetch user error:",t),e.set({status:"unauthenticated"})}};return{user:e.user,status:e.status,refresh:r,signOut:t}}},4913:(e,t,r)=>{"use strict";r.d(t,{OrderProvider:()=>i,h:()=>o});var a=r(5155),n=r(2115);let s=(0,n.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,n.useState)([{id:"order_1",customerId:"customer_1",driverId:"driver_1",pickupLocation:"Warsaw, ul. Marszałkowska 100",dropoffLocation:"Krak\xf3w, ul. Gł\xf3wny Rynek 1",packageType:"Medium Package",price:85,status:"package_collected",createdAt:"2024-01-15T09:00:00",customerName:"Jan Kowalski",customerPhone:"+48 123 456 789",specialInstructions:"Fragile items, handle with care",urgent:!1},{id:"order_2",customerId:"customer_2",driverId:"driver_1",pickupLocation:"Gdańsk, ul. Długa 20",dropoffLocation:"Gdańsk, ul. Westerplatte 15",packageType:"Small Package",price:30,status:"heading_to_pickup",createdAt:"2024-01-15T11:00:00",customerName:"Maria Nowak",customerPhone:"+48 987 654 321",urgent:!1},{id:"order_3",customerId:"customer_3",pickupLocation:"Krak\xf3w, ul. Floriańska 12",dropoffLocation:"Krak\xf3w, ul. Karmelicka 45",packageType:"Small Package",price:25,status:"pending",createdAt:"2024-01-15T12:00:00",customerName:"Anna Kowalczyk",customerPhone:"+48 555 666 777",urgent:!0}]),o=(e,t,r)=>{i(a=>a.map(a=>a.id===e?{...a,status:t,...r&&{driverId:r}}:a)),console.log("\uD83D\uDCCA Order status updated:",e,"→",t)};return(0,a.jsx)(s.Provider,{value:{orders:r,createOrder:e=>{let t={...e,id:"order_".concat(Date.now()),status:"pending",createdAt:new Date().toISOString()};return i(e=>[...e,t]),console.log("\uD83D\uDD14 New order created:",t.id),console.log("\uD83D\uDCCD Route:",e.pickupLocation,"→",e.dropoffLocation),t.id},updateOrderStatus:o,getOrdersByDriver:e=>r.filter(t=>t.driverId===e),getOrdersByCustomer:e=>r.filter(t=>t.customerId===e),getAvailableOrders:()=>r.filter(e=>"pending"===e.status),acceptOrder:(e,t)=>!!r.find(t=>t.id===e&&"pending"===t.status)&&(o(e,"accepted",t),console.log("✅ Order accepted by driver:",t),!0)},children:t})}function o(){let e=(0,n.useContext)(s);if(void 0===e)throw Error("useOrders must be used within an OrderProvider");return e}},5394:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(5155),n=r(5695);function s(e){let{children:t}=e,r=(0,n.useRouter)(),s=(0,n.usePathname)();return(0,a.jsx)("div",{className:"phone-container",children:(0,a.jsxs)("div",{className:"phone-frame",children:[t,(0,a.jsx)("div",{className:"home-indicator ".concat("/"===s?"active":""),onClick:()=>{"/"!==s&&r.push("/")},title:"Home"})]})})}},7409:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var a=r(5155),n=r(4795),s=r(6874),i=r.n(s),o=r(5695);function c(){let e=(0,o.usePathname)(),t=[{name:"Home",href:"/",icon:e=>(0,a.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",fill:e?"#fff":"#666",children:(0,a.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})})},{name:"Send",href:"/send-package",icon:e=>(0,a.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",fill:e?"#fff":"#666",children:(0,a.jsx)("path",{d:"M2 21l21-9L2 3v7l15 2-15 2v7z"})})},{name:"Orders",href:"/orders",icon:e=>(0,a.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",fill:e?"#fff":"#666",children:(0,a.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"})})},{name:"Profile",href:"/profile",icon:e=>(0,a.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",fill:e?"#fff":"#666",children:(0,a.jsx)("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.9 1 3 1.9 3 3V21C3 22.1 3.9 23 5 23H19C20.1 23 21 22.1 21 21V9M19 21H5V3H13V9H19V21Z"})})}];return(0,a.jsx)("div",{className:"bottom-nav",children:(0,a.jsx)("div",{className:"nav-items",children:t.map(t=>{let r=e===t.href;return(0,a.jsxs)(i(),{href:t.href,className:"nav-item ".concat(r?"active":""),children:[t.icon(r),(0,a.jsx)("span",{className:"nav-label",children:t.name})]},t.name)})})})}function l(){let e=(0,o.usePathname)(),t=[{name:"Dashboard",href:"/driver-dashboard",icon:e=>(0,a.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",fill:e?"#fff":"#666",children:(0,a.jsx)("path",{d:"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"})})},{name:"Available",href:"/driver-dashboard?tab=available",icon:e=>(0,a.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",fill:e?"#fff":"#666",children:(0,a.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"})})},{name:"Active",href:"/driver-dashboard?tab=active",icon:e=>(0,a.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",fill:e?"#fff":"#666",children:(0,a.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})},{name:"Profile",href:"/driver-profile",icon:e=>(0,a.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",fill:e?"#fff":"#666",children:(0,a.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}],r=t=>"/driver-dashboard"===t?"/driver-dashboard"===e||e.startsWith("/driver-dashboard"):e===t;return(0,a.jsx)("div",{className:"bottom-nav",children:(0,a.jsx)("div",{className:"nav-items",children:t.map(e=>(0,a.jsxs)(i(),{href:e.href,className:"nav-item ".concat(r(e.href)?"active":""),children:[e.icon(r(e.href)),(0,a.jsx)("span",{className:"nav-label",children:e.name})]},e.href))})})}function d(){let{status:e,user:t}=(0,n.w)();return"authenticated"!==e?null:t&&"picker"===t.role?(0,a.jsx)(l,{}):t&&"sender"===t.role?(0,a.jsx)(c,{}):null}},8341:(e,t,r)=>{Promise.resolve().then(r.bind(r,995))},9563:(e,t,r)=>{"use strict";r.d(t,{n:()=>a});let a=(0,r(5453).v)((e,t)=>({user:null,status:"loading",clear:()=>{e({user:null,status:"unauthenticated"})},set:r=>{let{user:a}=t();("function"==typeof r?r(t()):r).user,e(r)}}))}},e=>{e.O(0,[604,244,441,964,358],()=>e(e.s=8341)),_N_E=e.O()}]);