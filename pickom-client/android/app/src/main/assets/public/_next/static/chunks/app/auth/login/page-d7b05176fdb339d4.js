(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{359:(e,t,s)=>{"use strict";s.d(t,{vx:()=>d,Nq:()=>o,mH:()=>l});var i=s(3464),n=s(9509);let a=i.A.create({baseURL:"".concat(n.env.NEXT_PUBLIC_SERVER),withCredentials:!0,headers:{"Content-Type":"application/json"}}),r=i.A.create({baseURL:"".concat(n.env.NEXT_PUBLIC_SERVER),withCredentials:!0,headers:{"Content-Type":"application/json"}}),l=async(e,t,s,i)=>r.post("/auth/login",{role:e,phone:s,name:i},{headers:{Authorization:"Bearer ".concat(t)}}),o=async()=>a.get("/auth/me"),d=async()=>a.post("/auth/logout")},848:(e,t,s)=>{Promise.resolve().then(s.bind(s,9598))},5394:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var i=s(5155),n=s(5695);function a(e){let{children:t}=e,s=(0,n.useRouter)(),a=(0,n.usePathname)();return(0,i.jsx)("div",{className:"phone-container",children:(0,i.jsxs)("div",{className:"phone-frame",children:[t,(0,i.jsx)("div",{className:"home-indicator ".concat("/"===a?"active":""),onClick:()=>{"/"!==a&&s.push("/")},title:"Home"})]})})}},9098:(e,t,s)=>{"use strict";s.d(t,{o:()=>h});var i=s(5695),n=s(359),a=s(9563),r=s(5404),l=s(3915),o=s(9509);let d=(0,l.Dk)().length>0?(0,l.Sx)():(0,l.Wp)({apiKey:o.env.NEXT_PUBLIC_VITE_FIREBASE_API_KEY,authDomain:o.env.NEXT_PUBLIC_VITE_FIREBASE_AUTH_DOMAIN}),c=(0,r.xI)(d);function h(){let e=(0,a.n)(),t=(0,i.useRouter)(),s=async(t,s,i,a)=>{let r=await (0,n.mH)(t,s,i,a);console.log("response",r.data),e.set({user:r.data,status:"authenticated"})};return{handleSignUp:async(e,i,n,a,l)=>{try{console.log("handleSignUp",e,i,n,a,l),console.log("auth",c);let o=await (0,r.eJ)(c,i,n);console.log("userCredentials",o);let d=await o.user.getIdToken();console.log("accessToken",d),await s(e,d,a,l),console.log("handleLogin",e,d,a),"picker"===e?t.push("/driver-dashboard"):t.push("/")}catch(e){throw e}},handleSignIn:async function(e,i,n){try{let a=await (0,r.x9)(c,i,n),l=await a.user.getIdToken();await s(e,l),"picker"===e?t.push("/driver-dashboard"):t.push("/")}catch(e){throw e}}}}},9563:(e,t,s)=>{"use strict";s.d(t,{n:()=>i});let i=(0,s(5453).v)((e,t)=>({user:null,status:"loading",clear:()=>{e({user:null,status:"unauthenticated"})},set:s=>{let{user:i}=t();("function"==typeof s?s(t()):s).user,e(s)}}))},9598:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var i=s(5155),n=s(2115),a=s(6874),r=s.n(a),l=s(5394),o=s(9098);function d(){let[e,t]=(0,n.useState)(""),[s,a]=(0,n.useState)(""),[d,c]=(0,n.useState)("sender"),[h,u]=(0,n.useState)(""),{handleSignIn:p}=(0,o.o)(),x=async t=>{t.preventDefault(),u("");try{await p(d,e,s)}catch(e){u(e)}};return(0,i.jsx)(l.A,{children:(0,i.jsxs)("div",{className:"page",children:[(0,i.jsxs)("div",{className:"status-bar",children:[(0,i.jsx)("span",{children:"9:41"}),(0,i.jsxs)("div",{className:"status-icons",children:[(0,i.jsxs)("div",{className:"flex gap-1",children:[(0,i.jsx)("div",{className:"w-1 h-1 bg-white rounded-full"}),(0,i.jsx)("div",{className:"w-1 h-1 bg-white rounded-full"}),(0,i.jsx)("div",{className:"w-1 h-1 bg-white rounded-full"}),(0,i.jsx)("div",{className:"w-1 h-1 bg-white rounded-full"})]}),(0,i.jsxs)("svg",{width:"17",height:"11",viewBox:"0 0 17 11",fill:"white",children:[(0,i.jsx)("path",{d:"M1 5.5C1 3.5 2.5 2 4.5 2S8 3.5 8 5.5 6.5 9 4.5 9 1 7.5 1 5.5z"}),(0,i.jsx)("path",{d:"M9 5.5C9 3.5 10.5 2 12.5 2S16 3.5 16 5.5 14.5 9 12.5 9 9 7.5 9 5.5z"})]}),(0,i.jsxs)("svg",{width:"24",height:"11",viewBox:"0 0 24 11",fill:"white",children:[(0,i.jsx)("rect",{x:"1",y:"1",width:"22",height:"9",rx:"2",stroke:"white",strokeWidth:"1",fill:"none"}),(0,i.jsx)("rect",{x:"2",y:"2",width:"18",height:"7",fill:"white"})]})]})]}),(0,i.jsxs)("div",{className:"content center-content",children:[(0,i.jsxs)("div",{style:{marginBottom:"64px"},children:[(0,i.jsx)("h1",{className:"title-main",children:"Pickom"}),(0,i.jsx)("p",{className:"subtitle",children:"People-Powered Delivery"})]}),(0,i.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"16px",fontWeight:"600",color:"#9CA3AF",marginBottom:"12px",textAlign:"center"},children:"Login as:"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[(0,i.jsxs)("button",{type:"button",onClick:()=>c("sender"),style:{padding:"16px 20px",background:"sender"===d?"linear-gradient(135deg, #f97316, #ea580c)":"rgba(255, 255, 255, 0.05)",border:"sender"===d?"2px solid #f97316":"2px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",color:"white",cursor:"pointer",transition:"all 0.2s ease",textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:"24px",marginBottom:"8px"},children:"\uD83D\uDCE6"}),(0,i.jsx)("div",{style:{fontSize:"14px",fontWeight:"600"},children:"Customer"})]}),(0,i.jsxs)("button",{type:"button",onClick:()=>c("picker"),style:{padding:"16px 20px",background:"picker"===d?"linear-gradient(135deg, #f97316, #ea580c)":"rgba(255, 255, 255, 0.05)",border:"picker"===d?"2px solid #f97316":"2px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",color:"white",cursor:"pointer",transition:"all 0.2s ease",textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:"24px",marginBottom:"8px"},children:"\uD83D\uDE97"}),(0,i.jsx)("div",{style:{fontSize:"14px",fontWeight:"600"},children:"Driver"})]})]})]}),(0,i.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[h&&(0,i.jsx)("div",{style:{color:"#ef4444",textAlign:"center",fontSize:"14px"},children:h}),(0,i.jsx)("div",{className:"form-group",children:(0,i.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),className:"form-input",placeholder:"Email",required:!0})}),(0,i.jsx)("div",{className:"form-group",children:(0,i.jsx)("input",{type:"password",value:s,onChange:e=>a(e.target.value),className:"form-input",placeholder:"Password",required:!0})}),(0,i.jsx)("div",{style:{paddingTop:"24px"},children:(0,i.jsx)("button",{type:"submit",className:"btn-primary",children:"Sign In"})}),(0,i.jsx)("div",{style:{textAlign:"center",paddingTop:"16px"},children:(0,i.jsx)(r(),{href:"/auth/register",style:{color:"#999",textDecoration:"underline"},children:"Don't have an account? Sign up"})})]})]})]})})}}},e=>{e.O(0,[965,604,244,834,441,964,358],()=>e(e.s=848)),_N_E=e.O()}]);