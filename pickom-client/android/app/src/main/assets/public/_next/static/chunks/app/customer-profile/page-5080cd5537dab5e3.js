(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[791],{359:(e,t,r)=>{"use strict";r.d(t,{vx:()=>d,Nq:()=>l,mH:()=>a});var o=r(3464),i=r(9509);let n=o.A.create({baseURL:"".concat(i.env.NEXT_PUBLIC_SERVER),withCredentials:!0,headers:{"Content-Type":"application/json"}}),s=o.A.create({baseURL:"".concat(i.env.NEXT_PUBLIC_SERVER),withCredentials:!0,headers:{"Content-Type":"application/json"}}),a=async(e,t,r,o)=>s.post("/auth/login",{role:e,phone:r,name:o},{headers:{Authorization:"Bearer ".concat(t)}}),l=async()=>n.get("/auth/me"),d=async()=>n.post("/auth/logout")},4795:(e,t,r)=>{"use strict";r.d(t,{w:()=>n});var o=r(359),i=r(9563);function n(){let e=(0,i.n)(),t=async()=>{try{await (0,o.vx)(),e.clear()}catch(e){console.error("Logout error:",e)}},r=async()=>{try{let t=await (0,o.Nq)();e.set({status:"authenticated",user:t.data.user})}catch(t){console.error("Fetch user error:",t),e.set({status:"unauthenticated"})}};return{user:e.user,status:e.status,refresh:r,signOut:t}}},4913:(e,t,r)=>{"use strict";r.d(t,{OrderProvider:()=>s,h:()=>a});var o=r(5155),i=r(2115);let n=(0,i.createContext)(void 0);function s(e){let{children:t}=e,[r,s]=(0,i.useState)([{id:"order_1",customerId:"customer_1",driverId:"driver_1",pickupLocation:"Warsaw, ul. Marszałkowska 100",dropoffLocation:"Krak\xf3w, ul. Gł\xf3wny Rynek 1",packageType:"Medium Package",price:85,status:"package_collected",createdAt:"2024-01-15T09:00:00",customerName:"Jan Kowalski",customerPhone:"+48 123 456 789",specialInstructions:"Fragile items, handle with care",urgent:!1},{id:"order_2",customerId:"customer_2",driverId:"driver_1",pickupLocation:"Gdańsk, ul. Długa 20",dropoffLocation:"Gdańsk, ul. Westerplatte 15",packageType:"Small Package",price:30,status:"heading_to_pickup",createdAt:"2024-01-15T11:00:00",customerName:"Maria Nowak",customerPhone:"+48 987 654 321",urgent:!1},{id:"order_3",customerId:"customer_3",pickupLocation:"Krak\xf3w, ul. Floriańska 12",dropoffLocation:"Krak\xf3w, ul. Karmelicka 45",packageType:"Small Package",price:25,status:"pending",createdAt:"2024-01-15T12:00:00",customerName:"Anna Kowalczyk",customerPhone:"+48 555 666 777",urgent:!0}]),a=(e,t,r)=>{s(o=>o.map(o=>o.id===e?{...o,status:t,...r&&{driverId:r}}:o)),console.log("\uD83D\uDCCA Order status updated:",e,"→",t)};return(0,o.jsx)(n.Provider,{value:{orders:r,createOrder:e=>{let t={...e,id:"order_".concat(Date.now()),status:"pending",createdAt:new Date().toISOString()};return s(e=>[...e,t]),console.log("\uD83D\uDD14 New order created:",t.id),console.log("\uD83D\uDCCD Route:",e.pickupLocation,"→",e.dropoffLocation),t.id},updateOrderStatus:a,getOrdersByDriver:e=>r.filter(t=>t.driverId===e),getOrdersByCustomer:e=>r.filter(t=>t.customerId===e),getAvailableOrders:()=>r.filter(e=>"pending"===e.status),acceptOrder:(e,t)=>!!r.find(t=>t.id===e&&"pending"===t.status)&&(a(e,"accepted",t),console.log("✅ Order accepted by driver:",t),!0)},children:t})}function a(){let e=(0,i.useContext)(n);if(void 0===e)throw Error("useOrders must be used within an OrderProvider");return e}},5138:(e,t,r)=>{Promise.resolve().then(r.bind(r,6850))},5394:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(5155),i=r(5695);function n(e){let{children:t}=e,r=(0,i.useRouter)(),n=(0,i.usePathname)();return(0,o.jsx)("div",{className:"phone-container",children:(0,o.jsxs)("div",{className:"phone-frame",children:[t,(0,o.jsx)("div",{className:"home-indicator ".concat("/"===n?"active":""),onClick:()=>{"/"!==n&&r.push("/")},title:"Home"})]})})}},5695:(e,t,r)=>{"use strict";var o=r(8999);r.o(o,"usePathname")&&r.d(t,{usePathname:function(){return o.usePathname}}),r.o(o,"useRouter")&&r.d(t,{useRouter:function(){return o.useRouter}}),r.o(o,"useSearchParams")&&r.d(t,{useSearchParams:function(){return o.useSearchParams}})},6850:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var o=r(5155),i=r(2115),n=r(5695),s=r(4913),a=r(5394),l=r(4795);function d(){let{user:e,status:t,signOut:r}=(0,l.w)(),{getOrdersByCustomer:d}=(0,s.h)(),c=(0,n.useRouter)(),[p,u]=(0,i.useState)("profile"),[x,h]=(0,i.useState)("/placeholder-avatar.jpg");console.log("user",e);let[g,m]=(0,i.useState)({name:(null==e?void 0:e.name)||"",email:(null==e?void 0:e.email)||"",phone:(null==e?void 0:e.phone)||"",dateOfBirth:"",emergencyContact:"",bio:"",memberSince:"2024-01-01"}),f=d((null==e?void 0:e.uid)||"customer_1");return((0,i.useEffect)(()=>{"loading"!==t&&e&&(null==e?void 0:e.role)!=="sender"&&(console.log("user profile"),c.push("/auth/login"))},[e,c,t]),e&&"sender"!==e.role)?null:(0,o.jsx)(a.A,{children:(0,o.jsxs)("div",{className:"page",children:[(0,o.jsxs)("div",{className:"status-bar",children:[(0,o.jsx)("span",{children:"9:41"}),(0,o.jsxs)("div",{className:"status-icons",children:[(0,o.jsx)("span",{children:"\uD83D\uDCF6"}),(0,o.jsx)("span",{children:"\uD83D\uDCF6"}),(0,o.jsx)("span",{children:"\uD83D\uDD0B"})]})]}),(0,o.jsx)("div",{style:{padding:"20px 32px 16px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,o.jsx)("button",{onClick:()=>c.back(),style:{background:"none",border:"none",color:"#f97316",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:"← Back"}),(0,o.jsx)("h1",{style:{fontSize:"24px",fontWeight:"700",color:"white"},children:"My Profile"})]})}),(0,o.jsx)("div",{style:{padding:"24px 32px"},children:(0,o.jsx)("div",{style:{display:"flex",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"4px"},children:[{key:"profile",label:"Profile",icon:"\uD83D\uDC64"},{key:"orders",label:"Orders",icon:"\uD83D\uDCE6"},{key:"settings",label:"Settings",icon:"⚙️"}].map(e=>(0,o.jsxs)("button",{onClick:()=>u(e.key),style:{flex:1,padding:"12px 16px",background:p===e.key?"#f97316":"transparent",border:"none",borderRadius:"8px",color:"white",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",flexDirection:"column",alignItems:"center",gap:"4px"},children:[(0,o.jsx)("span",{children:e.icon}),(0,o.jsx)("span",{children:e.label})]},e.key))})}),(0,o.jsxs)("div",{style:{padding:"0 32px 32px",flex:1},children:["profile"===p&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{textAlign:"center",marginBottom:"32px"},children:[(0,o.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,o.jsx)("div",{style:{width:"120px",height:"120px",borderRadius:"50%",background:x.includes("placeholder")?"linear-gradient(135deg, #f97316, #ea580c)":"url(".concat(x,")"),backgroundSize:"cover",backgroundPosition:"center",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"48px",color:"white",marginBottom:"16px",border:"4px solid rgba(255, 255, 255, 0.1)"},children:x.includes("placeholder")&&"\uD83D\uDC64"}),(0,o.jsxs)("label",{style:{position:"absolute",bottom:"12px",right:"8px",width:"36px",height:"36px",background:"#f97316",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"16px",color:"white",border:"2px solid #000"},children:["\uD83D\uDCF7",(0,o.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let r=null==(t=e.target.files)?void 0:t[0];if(r){let e=new FileReader;e.onload=e=>{var t;h(null==(t=e.target)?void 0:t.result)},e.readAsDataURL(r)}},style:{display:"none"}})]})]}),(0,o.jsx)("div",{style:{fontSize:"24px",fontWeight:"700",color:"white",marginBottom:"4px"},children:g.name}),(0,o.jsxs)("div",{style:{fontSize:"14px",color:"#9CA3AF",marginBottom:"16px"},children:["\uD83D\uDCE6 Customer • Member since ",new Date(g.memberSince).getFullYear()]})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#9CA3AF",marginBottom:"8px"},children:"Full Name"}),(0,o.jsx)("input",{type:"text",value:g.name,onChange:e=>m({...g,name:e.target.value}),className:"form-input"})]}),(0,o.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#9CA3AF",marginBottom:"8px"},children:"Email"}),(0,o.jsx)("input",{type:"email",value:g.email,onChange:e=>m({...g,email:e.target.value}),className:"form-input"})]}),(0,o.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#9CA3AF",marginBottom:"8px"},children:"Phone Number"}),(0,o.jsx)("input",{type:"tel",value:g.phone,onChange:e=>m({...g,phone:e.target.value}),className:"form-input"})]}),(0,o.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#9CA3AF",marginBottom:"8px"},children:"Date of Birth"}),(0,o.jsx)("input",{type:"date",value:g.dateOfBirth,onChange:e=>m({...g,dateOfBirth:e.target.value}),className:"form-input"})]}),(0,o.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#9CA3AF",marginBottom:"8px"},children:"Emergency Contact"}),(0,o.jsx)("input",{type:"tel",value:g.emergencyContact,onChange:e=>m({...g,emergencyContact:e.target.value}),className:"form-input",placeholder:"+48 123 456 789"})]}),(0,o.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,o.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"600",color:"#9CA3AF",marginBottom:"8px"},children:"About Me"}),(0,o.jsx)("textarea",{value:g.bio,onChange:e=>m({...g,bio:e.target.value}),className:"form-input h-24",placeholder:"Tell us about yourself...",maxLength:150}),(0,o.jsxs)("div",{style:{textAlign:"right",fontSize:"12px",color:"#9CA3AF",marginTop:"4px"},children:[g.bio.length,"/150"]})]}),(0,o.jsx)("button",{className:"btn-primary",style:{width:"100%"},onClick:()=>alert("Profile updated!"),children:"Save Profile"})]})]}),"orders"===p&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("h3",{style:{fontSize:"18px",fontWeight:"700",color:"white",marginBottom:"24px"},children:["Order History (",f.length,")"]}),0===f.length?(0,o.jsxs)("div",{style:{textAlign:"center",paddingTop:"60px"},children:[(0,o.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\uD83D\uDCE6"}),(0,o.jsx)("h3",{style:{fontSize:"18px",fontWeight:"600",color:"white",marginBottom:"8px"},children:"No Orders Yet"}),(0,o.jsx)("p",{style:{fontSize:"14px",color:"#9CA3AF"},children:"Start your first delivery!"})]}):(0,o.jsx)("div",{children:f.map(e=>{let t=(e=>{let t={pending:{label:"Pending",icon:"⏳",color:"#f59e0b"},accepted:{label:"Accepted",icon:"✅",color:"#10b981"},heading_to_pickup:{label:"Driver En Route",icon:"\uD83D\uDE97",color:"#3b82f6"},package_collected:{label:"Collected",icon:"\uD83D\uDCE6",color:"#8b5cf6"},in_transit:{label:"In Transit",icon:"\uD83D\uDE9A",color:"#f97316"},delivered:{label:"Delivered",icon:"\uD83C\uDF89",color:"#10b981"}};return t[e]||t.pending})(e.status);return(0,o.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",padding:"20px",marginBottom:"16px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[(0,o.jsxs)("div",{style:{fontSize:"16px",fontWeight:"700",color:"white"},children:["Order #",e.id.substring(0,8).toUpperCase()]}),(0,o.jsxs)("div",{style:{background:t.color,color:"white",fontSize:"12px",fontWeight:"600",padding:"4px 8px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[(0,o.jsx)("span",{children:t.icon}),(0,o.jsx)("span",{children:t.label})]})]}),(0,o.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,o.jsxs)("div",{style:{fontSize:"14px",color:"#9CA3AF",marginBottom:"4px"},children:["\uD83D\uDCCD From: ",e.pickupLocation]}),(0,o.jsxs)("div",{style:{fontSize:"14px",color:"#9CA3AF"},children:["\uD83D\uDCCD To: ",e.dropoffLocation]})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[(0,o.jsxs)("div",{style:{fontSize:"14px",color:"#9CA3AF"},children:["\uD83D\uDCE6 ",e.packageType]}),(0,o.jsxs)("div",{style:{fontSize:"16px",fontWeight:"700",color:"#10b981"},children:[e.price," PLN"]})]}),(0,o.jsxs)("div",{style:{fontSize:"12px",color:"#9CA3AF"},children:["\uD83D\uDCC5 ",new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),"delivered"!==e.status&&(0,o.jsx)("button",{onClick:()=>c.push("/track-package?orderId=".concat(e.id)),style:{width:"100%",marginTop:"12px",padding:"8px",background:"rgba(249, 115, 22, 0.2)",border:"1px solid #f97316",borderRadius:"6px",color:"#f97316",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Track Order"})]},e.id)})})]}),"settings"===p&&(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{style:{fontSize:"18px",fontWeight:"700",color:"white",marginBottom:"24px"},children:"Settings"}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"16px",marginBottom:"16px"},children:[(0,o.jsx)("h4",{style:{fontSize:"16px",fontWeight:"600",color:"white",marginBottom:"12px"},children:"Notifications"}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px",cursor:"pointer"},children:[(0,o.jsx)("input",{type:"checkbox",defaultChecked:!0,style:{width:"16px",height:"16px"}}),(0,o.jsx)("span",{style:{color:"white",fontSize:"14px"},children:"Order status updates"})]}),(0,o.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px",cursor:"pointer"},children:[(0,o.jsx)("input",{type:"checkbox",defaultChecked:!0,style:{width:"16px",height:"16px"}}),(0,o.jsx)("span",{style:{color:"white",fontSize:"14px"},children:"Driver messages"})]}),(0,o.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer"},children:[(0,o.jsx)("input",{type:"checkbox",style:{width:"16px",height:"16px"}}),(0,o.jsx)("span",{style:{color:"white",fontSize:"14px"},children:"Promotions and offers"})]})]})]}),(0,o.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"16px",marginBottom:"16px"},children:[(0,o.jsx)("h4",{style:{fontSize:"16px",fontWeight:"600",color:"white",marginBottom:"12px"},children:"Preferences"}),(0,o.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer"},children:[(0,o.jsx)("input",{type:"checkbox",defaultChecked:!0,style:{width:"16px",height:"16px"}}),(0,o.jsx)("span",{style:{color:"white",fontSize:"14px"},children:"Save order history"})]})]}),(0,o.jsxs)("div",{style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",padding:"16px"},children:[(0,o.jsx)("h4",{style:{fontSize:"16px",fontWeight:"600",color:"#ef4444",marginBottom:"8px"},children:"Account Management"}),(0,o.jsx)("p",{style:{fontSize:"14px",color:"#9CA3AF",marginBottom:"12px"},children:"Manage your account settings and data."}),(0,o.jsx)("div",{style:{marginBottom:"16px"},children:(0,o.jsx)("button",{onClick:()=>{r(),c.push("/auth/login")},style:{background:"linear-gradient(135deg, #f97316, #ea580c)",border:"none",borderRadius:"8px",color:"white",padding:"12px 24px",fontSize:"14px",fontWeight:"600",cursor:"pointer",width:"100%",marginBottom:"12px",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(249, 115, 22, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:"\uD83D\uDEAA Logout"})}),(0,o.jsx)("button",{style:{background:"none",border:"1px solid #ef4444",borderRadius:"6px",color:"#ef4444",padding:"8px 16px",fontSize:"14px",cursor:"pointer",marginRight:"8px"},children:"Export Data"}),(0,o.jsx)("button",{style:{background:"none",border:"1px solid #ef4444",borderRadius:"6px",color:"#ef4444",padding:"8px 16px",fontSize:"14px",cursor:"pointer"},children:"Delete Account"})]})]})]})]})]})})}},9563:(e,t,r)=>{"use strict";r.d(t,{n:()=>o});let o=(0,r(5453).v)((e,t)=>({user:null,status:"loading",clear:()=>{e({user:null,status:"unauthenticated"})},set:r=>{let{user:o}=t();("function"==typeof r?r(t()):r).user,e(r)}}))}},e=>{e.O(0,[604,441,964,358],()=>e(e.s=5138)),_N_E=e.O()}]);