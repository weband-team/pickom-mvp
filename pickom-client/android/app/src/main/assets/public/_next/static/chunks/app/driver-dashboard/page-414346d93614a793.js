(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[348],{359:(e,t,r)=>{"use strict";r.d(t,{vx:()=>d,Nq:()=>l,mH:()=>o});var i=r(3464),n=r(9509);let s=i.A.create({baseURL:"".concat(n.env.NEXT_PUBLIC_SERVER),withCredentials:!0,headers:{"Content-Type":"application/json"}}),a=i.A.create({baseURL:"".concat(n.env.NEXT_PUBLIC_SERVER),withCredentials:!0,headers:{"Content-Type":"application/json"}}),o=async(e,t,r,i)=>a.post("/auth/login",{role:e,phone:r,name:i},{headers:{Authorization:"Bearer ".concat(t)}}),l=async()=>s.get("/auth/me"),d=async()=>s.post("/auth/logout")},4795:(e,t,r)=>{"use strict";r.d(t,{w:()=>s});var i=r(359),n=r(9563);function s(){let e=(0,n.n)(),t=async()=>{try{await (0,i.vx)(),e.clear()}catch(e){console.error("Logout error:",e)}},r=async()=>{try{let t=await (0,i.Nq)();e.set({status:"authenticated",user:t.data.user})}catch(t){console.error("Fetch user error:",t),e.set({status:"unauthenticated"})}};return{user:e.user,status:e.status,refresh:r,signOut:t}}},4913:(e,t,r)=>{"use strict";r.d(t,{OrderProvider:()=>a,h:()=>o});var i=r(5155),n=r(2115);let s=(0,n.createContext)(void 0);function a(e){let{children:t}=e,[r,a]=(0,n.useState)([{id:"order_1",customerId:"customer_1",driverId:"driver_1",pickupLocation:"Warsaw, ul. Marszałkowska 100",dropoffLocation:"Krak\xf3w, ul. Gł\xf3wny Rynek 1",packageType:"Medium Package",price:85,status:"package_collected",createdAt:"2024-01-15T09:00:00",customerName:"Jan Kowalski",customerPhone:"+48 123 456 789",specialInstructions:"Fragile items, handle with care",urgent:!1},{id:"order_2",customerId:"customer_2",driverId:"driver_1",pickupLocation:"Gdańsk, ul. Długa 20",dropoffLocation:"Gdańsk, ul. Westerplatte 15",packageType:"Small Package",price:30,status:"heading_to_pickup",createdAt:"2024-01-15T11:00:00",customerName:"Maria Nowak",customerPhone:"+48 987 654 321",urgent:!1},{id:"order_3",customerId:"customer_3",pickupLocation:"Krak\xf3w, ul. Floriańska 12",dropoffLocation:"Krak\xf3w, ul. Karmelicka 45",packageType:"Small Package",price:25,status:"pending",createdAt:"2024-01-15T12:00:00",customerName:"Anna Kowalczyk",customerPhone:"+48 555 666 777",urgent:!0}]),o=(e,t,r)=>{a(i=>i.map(i=>i.id===e?{...i,status:t,...r&&{driverId:r}}:i)),console.log("\uD83D\uDCCA Order status updated:",e,"→",t)};return(0,i.jsx)(s.Provider,{value:{orders:r,createOrder:e=>{let t={...e,id:"order_".concat(Date.now()),status:"pending",createdAt:new Date().toISOString()};return a(e=>[...e,t]),console.log("\uD83D\uDD14 New order created:",t.id),console.log("\uD83D\uDCCD Route:",e.pickupLocation,"→",e.dropoffLocation),t.id},updateOrderStatus:o,getOrdersByDriver:e=>r.filter(t=>t.driverId===e),getOrdersByCustomer:e=>r.filter(t=>t.customerId===e),getAvailableOrders:()=>r.filter(e=>"pending"===e.status),acceptOrder:(e,t)=>!!r.find(t=>t.id===e&&"pending"===t.status)&&(o(e,"accepted",t),console.log("✅ Order accepted by driver:",t),!0)},children:t})}function o(){let e=(0,n.useContext)(s);if(void 0===e)throw Error("useOrders must be used within an OrderProvider");return e}},5394:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r(5155),n=r(5695);function s(e){let{children:t}=e,r=(0,n.useRouter)(),s=(0,n.usePathname)();return(0,i.jsx)("div",{className:"phone-container",children:(0,i.jsxs)("div",{className:"phone-frame",children:[t,(0,i.jsx)("div",{className:"home-indicator ".concat("/"===s?"active":""),onClick:()=>{"/"!==s&&r.push("/")},title:"Home"})]})})}},7409:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var i=r(5155),n=r(4795),s=r(6874),a=r.n(s),o=r(5695);function l(){let e=(0,o.usePathname)(),t=[{name:"Home",href:"/",icon:e=>(0,i.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",fill:e?"#fff":"#666",children:(0,i.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})})},{name:"Send",href:"/send-package",icon:e=>(0,i.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",fill:e?"#fff":"#666",children:(0,i.jsx)("path",{d:"M2 21l21-9L2 3v7l15 2-15 2v7z"})})},{name:"Orders",href:"/orders",icon:e=>(0,i.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",fill:e?"#fff":"#666",children:(0,i.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"})})},{name:"Profile",href:"/profile",icon:e=>(0,i.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",fill:e?"#fff":"#666",children:(0,i.jsx)("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.9 1 3 1.9 3 3V21C3 22.1 3.9 23 5 23H19C20.1 23 21 22.1 21 21V9M19 21H5V3H13V9H19V21Z"})})}];return(0,i.jsx)("div",{className:"bottom-nav",children:(0,i.jsx)("div",{className:"nav-items",children:t.map(t=>{let r=e===t.href;return(0,i.jsxs)(a(),{href:t.href,className:"nav-item ".concat(r?"active":""),children:[t.icon(r),(0,i.jsx)("span",{className:"nav-label",children:t.name})]},t.name)})})})}function d(){let e=(0,o.usePathname)(),t=[{name:"Dashboard",href:"/driver-dashboard",icon:e=>(0,i.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",fill:e?"#fff":"#666",children:(0,i.jsx)("path",{d:"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"})})},{name:"Available",href:"/driver-dashboard?tab=available",icon:e=>(0,i.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",fill:e?"#fff":"#666",children:(0,i.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"})})},{name:"Active",href:"/driver-dashboard?tab=active",icon:e=>(0,i.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",fill:e?"#fff":"#666",children:(0,i.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})},{name:"Profile",href:"/driver-profile",icon:e=>(0,i.jsx)("svg",{className:"nav-icon",viewBox:"0 0 24 24",fill:e?"#fff":"#666",children:(0,i.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}],r=t=>"/driver-dashboard"===t?"/driver-dashboard"===e||e.startsWith("/driver-dashboard"):e===t;return(0,i.jsx)("div",{className:"bottom-nav",children:(0,i.jsx)("div",{className:"nav-items",children:t.map(e=>(0,i.jsxs)(a(),{href:e.href,className:"nav-item ".concat(r(e.href)?"active":""),children:[e.icon(r(e.href)),(0,i.jsx)("span",{className:"nav-label",children:e.name})]},e.href))})})}function c(){let{status:e,user:t}=(0,n.w)();return"authenticated"!==e?null:t&&"picker"===t.role?(0,i.jsx)(d,{}):t&&"sender"===t.role?(0,i.jsx)(l,{}):null}},8965:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var i=r(5155),n=r(2115),s=r(5695),a=r(4913),o=r(5394),l=r(7409),d=r(4795);function c(){let{user:e,signOut:t}=(0,d.w)(),{getAvailableOrders:r,getOrdersByDriver:c,acceptOrder:p,updateOrderStatus:x}=(0,a.h)(),u=(0,s.useRouter)(),h=(0,s.useSearchParams)().get("tab"),[v,g]=(0,n.useState)(h||"available"),f=(null==e?void 0:e.uid)||"driver_1",m=r(),y=c(f).filter(e=>"delivered"!==e.status);return((0,n.useEffect)(()=>{e&&"picker"!==e.role&&u.push("/auth/login")},[e,u]),(0,n.useEffect)(()=>{h&&g(h)},[h]),e&&"picker"!==e.role)?null:(0,i.jsx)(o.A,{children:(0,i.jsxs)("div",{className:"page",children:[(0,i.jsxs)("div",{className:"status-bar",children:[(0,i.jsx)("span",{children:"9:41"}),(0,i.jsxs)("div",{className:"status-icons",children:[(0,i.jsx)("span",{children:"\uD83D\uDCF6"}),(0,i.jsx)("span",{children:"\uD83D\uDCF6"}),(0,i.jsx)("span",{children:"\uD83D\uDD0B"})]})]}),(0,i.jsx)("div",{style:{padding:"20px 32px 16px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{style:{fontSize:"24px",fontWeight:"700",color:"white",marginBottom:"4px"},children:"Driver Dashboard"}),(0,i.jsxs)("p",{style:{fontSize:"14px",color:"#9CA3AF"},children:["Welcome, ",null==e?void 0:e.name,"! \uD83D\uDE97"]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,i.jsx)("button",{onClick:()=>u.push("/driver-profile"),style:{background:"rgba(249, 115, 22, 0.2)",border:"1px solid #f97316",borderRadius:"8px",color:"#f97316",padding:"8px 12px",fontSize:"14px",cursor:"pointer"},children:"\uD83D\uDC64 Profile"}),(0,i.jsx)("button",{onClick:()=>{t(),u.push("/auth/login")},style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"white",padding:"8px 12px",fontSize:"14px",cursor:"pointer"},children:"Logout"})]})]})}),(0,i.jsx)("div",{style:{padding:"24px 32px 16px"},children:(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"24px"},children:[(0,i.jsxs)("div",{style:{background:"linear-gradient(135deg, #10b981, #059669)",borderRadius:"16px",padding:"20px",textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:"28px",fontWeight:"700",color:"white",marginBottom:"4px"},children:"350 PLN"}),(0,i.jsx)("div",{style:{fontSize:"14px",color:"rgba(255, 255, 255, 0.8)"},children:"Today's Earnings"})]}),(0,i.jsxs)("div",{style:{background:"linear-gradient(135deg, #f97316, #ea580c)",borderRadius:"16px",padding:"20px",textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:"28px",fontWeight:"700",color:"white",marginBottom:"4px"},children:"12"}),(0,i.jsx)("div",{style:{fontSize:"14px",color:"rgba(255, 255, 255, 0.8)"},children:"Completed Today"})]})]})}),(0,i.jsx)("div",{style:{padding:"0 32px 24px"},children:(0,i.jsx)("div",{style:{display:"flex",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"4px"},children:[{key:"available",label:"Available",icon:"\uD83D\uDCCB"},{key:"active",label:"Active",icon:"\uD83D\uDE97"},{key:"history",label:"History",icon:"\uD83D\uDCCA"}].map(e=>(0,i.jsxs)("button",{onClick:()=>g(e.key),style:{flex:1,padding:"12px 16px",background:v===e.key?"#f97316":"transparent",border:"none",borderRadius:"8px",color:"white",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[(0,i.jsx)("span",{children:e.icon}),(0,i.jsx)("span",{children:e.label})]},e.key))})}),(0,i.jsxs)("div",{style:{padding:"0 32px",flex:1},children:["available"===v&&(0,i.jsxs)("div",{children:[(0,i.jsxs)("h3",{style:{fontSize:"18px",fontWeight:"700",color:"white",marginBottom:"16px"},children:["Available Delivery Requests (",m.length,")"]}),(0,i.jsx)("div",{children:m.map(e=>(0,i.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",padding:"20px",marginBottom:"16px",border:e.urgent?"2px solid #f59e0b":"1px solid rgba(255, 255, 255, 0.1)"},children:[e.urgent&&(0,i.jsx)("div",{style:{background:"#f59e0b",color:"white",fontSize:"12px",fontWeight:"600",padding:"4px 8px",borderRadius:"6px",display:"inline-block",marginBottom:"12px"},children:"\uD83D\uDEA8 URGENT"}),(0,i.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,i.jsxs)("div",{style:{fontSize:"16px",fontWeight:"600",color:"white",marginBottom:"8px"},children:[e.customerName," • ",e.packageType]}),(0,i.jsxs)("div",{style:{fontSize:"14px",color:"#9CA3AF",marginBottom:"4px"},children:["\uD83D\uDCCD From: ",e.pickupLocation]}),(0,i.jsxs)("div",{style:{fontSize:"14px",color:"#9CA3AF"},children:["\uD83D\uDCCD To: ",e.dropoffLocation]})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[(0,i.jsxs)("div",{style:{display:"flex",gap:"16px"},children:[(0,i.jsx)("div",{style:{fontSize:"14px",color:"#9CA3AF"},children:"\uD83D\uDE97 2.5 km"}),(0,i.jsx)("div",{style:{fontSize:"14px",color:"#9CA3AF"},children:"⏱️ 15 min"})]}),(0,i.jsxs)("div",{style:{fontSize:"18px",fontWeight:"700",color:"#10b981"},children:[e.price," PLN"]})]}),(0,i.jsx)("button",{onClick:()=>{p(e.id,f)&&(g("active"),alert("Request accepted! Customer will be notified."))},style:{width:"100%",padding:"14px",background:"linear-gradient(135deg, #10b981, #059669)",border:"none",borderRadius:"12px",color:"white",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:"Accept Request"})]},e.id))})]}),"active"===v&&(0,i.jsxs)("div",{children:[(0,i.jsxs)("h3",{style:{fontSize:"18px",fontWeight:"700",color:"white",marginBottom:"16px"},children:["Active Deliveries (",y.length,")"]}),0===y.length?(0,i.jsxs)("div",{style:{textAlign:"center",paddingTop:"60px"},children:[(0,i.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\uD83D\uDE97"}),(0,i.jsx)("h3",{style:{fontSize:"18px",fontWeight:"600",color:"white",marginBottom:"8px"},children:"No Active Deliveries"}),(0,i.jsx)("p",{style:{fontSize:"14px",color:"#9CA3AF"},children:"Accept a request to start delivering!"})]}):(0,i.jsx)("div",{children:y.map(e=>{let t=(e=>{let t={accepted:{label:"Accepted",icon:"✅",color:"#10b981",nextStatus:"heading_to_pickup"},heading_to_pickup:{label:"Heading to Pickup",icon:"\uD83D\uDE97",color:"#f59e0b",nextStatus:"package_collected"},package_collected:{label:"Package Collected",icon:"\uD83D\uDCE6",color:"#3b82f6",nextStatus:"in_transit"},in_transit:{label:"In Transit",icon:"\uD83D\uDE9A",color:"#8b5cf6",nextStatus:"delivered"},delivered:{label:"Delivered",icon:"\uD83C\uDF89",color:"#10b981",nextStatus:null}};return t[e]||t.accepted})(e.status);return(0,i.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",padding:"20px",marginBottom:"16px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[(0,i.jsx)("div",{style:{fontSize:"16px",fontWeight:"700",color:"white"},children:e.id}),(0,i.jsxs)("div",{style:{background:t.color,color:"white",fontSize:"12px",fontWeight:"600",padding:"4px 8px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"4px"},children:[(0,i.jsx)("span",{children:t.icon}),(0,i.jsx)("span",{children:t.label})]})]}),(0,i.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,i.jsxs)("div",{style:{fontSize:"14px",fontWeight:"600",color:"white",marginBottom:"4px"},children:["\uD83D\uDC64 ",e.customerName]}),(0,i.jsxs)("div",{style:{fontSize:"14px",color:"#9CA3AF"},children:["\uD83D\uDCDE ",e.customerPhone]})]}),(0,i.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,i.jsxs)("div",{style:{fontSize:"14px",color:"#9CA3AF",marginBottom:"4px"},children:["\uD83D\uDCCD From: ",e.pickupLocation]}),(0,i.jsxs)("div",{style:{fontSize:"14px",color:"#9CA3AF"},children:["\uD83D\uDCCD To: ",e.dropoffLocation]})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[(0,i.jsxs)("div",{style:{fontSize:"14px",color:"#9CA3AF"},children:["\uD83D\uDCE6 ",e.packageType]}),(0,i.jsxs)("div",{style:{fontSize:"18px",fontWeight:"700",color:"#10b981"},children:[e.price," PLN"]})]}),e.specialInstructions&&(0,i.jsxs)("div",{style:{background:"rgba(249, 115, 22, 0.1)",border:"1px solid rgba(249, 115, 22, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px"},children:[(0,i.jsx)("div",{style:{fontSize:"12px",fontWeight:"600",color:"#f97316",marginBottom:"4px"},children:"⚠️ Special Instructions:"}),(0,i.jsx)("div",{style:{fontSize:"14px",color:"white"},children:e.specialInstructions})]}),t.nextStatus&&(0,i.jsxs)("button",{onClick:()=>{var r;x(e.id,r=t.nextStatus),"delivered"===r&&setTimeout(()=>{alert("Delivery completed! Payment will be processed.")},1e3)},style:{width:"100%",padding:"14px",background:"linear-gradient(135deg, ".concat(t.color,", ").concat(t.color,"dd)"),border:"none",borderRadius:"12px",color:"white",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px ".concat(t.color,"40")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:["heading_to_pickup"===t.nextStatus&&"\uD83D\uDE97 Start Heading to Pickup","package_collected"===t.nextStatus&&"\uD83D\uDCE6 Mark Package Collected","in_transit"===t.nextStatus&&"\uD83D\uDE9A Start Transit","delivered"===t.nextStatus&&"\uD83C\uDF89 Mark as Delivered"]})]},e.id)})})]}),"history"===v&&(0,i.jsxs)("div",{style:{textAlign:"center",paddingTop:"60px"},children:[(0,i.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\uD83D\uDCCA"}),(0,i.jsx)("h3",{style:{fontSize:"18px",fontWeight:"600",color:"white",marginBottom:"8px"},children:"Delivery History"}),(0,i.jsx)("p",{style:{fontSize:"14px",color:"#9CA3AF"},children:"Your completed deliveries will appear here"})]})]}),(0,i.jsx)(l.A,{})]})})}},9451:(e,t,r)=>{Promise.resolve().then(r.bind(r,8965))},9563:(e,t,r)=>{"use strict";r.d(t,{n:()=>i});let i=(0,r(5453).v)((e,t)=>({user:null,status:"loading",clear:()=>{e({user:null,status:"unauthenticated"})},set:r=>{let{user:i}=t();("function"==typeof r?r(t()):r).user,e(r)}}))}},e=>{e.O(0,[604,244,441,964,358],()=>e(e.s=9451)),_N_E=e.O()}]);