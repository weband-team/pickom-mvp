(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4879],{9540:(e,t,n)=>{"use strict";n.d(t,{e:()=>a});var r=n(62442),l=n(80531),o=n(40819),i=n(85752);let a=(0,r.X3)(function({url:e,...t},n){let r=new i.TileLayer(e,(0,l.P)(t,n));return(0,o.Q)(r,n)},function(e,t,n){let{opacity:r,zIndex:l}=t;null!=r&&r!==n.opacity&&e.setOpacity(r),null!=l&&l!==n.zIndex&&e.setZIndex(l);let{url:o}=t;null!=o&&o!==n.url&&e.setUrl(o)})},11414:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(31418),l=n(95155);let o=(0,r.A)((0,l.jsx)("path",{d:"M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16m11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M5 11l1.5-4.5h11L19 11z"}),"DirectionsCar")},27195:(e,t,n)=>{"use strict";n.d(t,{p:()=>a});var r=n(62442),l=n(40819),o=n(89736),i=n(85752);let a=(0,r.Nq)(function({position:e,...t},n){let r=new i.Marker(e,t);return(0,l.Q)(r,(0,o.W4)(n,{overlayContainer:r}))},function(e,t,n){t.position!==n.position&&e.setLatLng(t.position),null!=t.icon&&t.icon!==n.icon&&e.setIcon(t.icon),null!=t.zIndexOffset&&t.zIndexOffset!==n.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),null!=t.opacity&&t.opacity!==n.opacity&&e.setOpacity(t.opacity),null!=e.dragging&&t.draggable!==n.draggable&&(!0===t.draggable?e.dragging.enable():e.dragging.disable())})},33704:(e,t,n)=>{"use strict";n.d(t,{W:()=>i});var r=n(89736),l=n(85752),o=n(12115);let i=(0,o.forwardRef)(function({bounds:e,boundsOptions:t,center:n,children:i,className:a,id:c,placeholder:s,style:u,whenReady:d,zoom:f,...p},x){let[h]=(0,o.useState)({className:a,id:c,style:u}),[m,y]=(0,o.useState)(null),v=(0,o.useRef)(void 0);(0,o.useImperativeHandle)(x,()=>m?.map??null,[m]);let g=(0,o.useCallback)(o=>{if(null!==o&&!v.current){let i=new l.Map(o,p);v.current=i,null!=n&&null!=f?i.setView(n,f):null!=e&&i.fitBounds(e,t),null!=d&&i.whenReady(d),y((0,r.fB)(i))}},[]);(0,o.useEffect)(()=>()=>{m?.map.remove()},[m]);let j=m?o.createElement(r.dk,{value:m},i):s??null;return o.createElement("div",{...h,ref:g},j)})},40819:(e,t,n)=>{"use strict";n.d(t,{K:()=>o,Q:()=>l});var r=n(12115);function l(e,t,n){return Object.freeze({instance:e,context:t,container:n})}function o(e,t){return null==t?function(t,n){let l=(0,r.useRef)(void 0);return l.current||(l.current=e(t,n)),l}:function(n,l){let o=(0,r.useRef)(void 0);o.current||(o.current=e(n,l));let i=(0,r.useRef)(n),{instance:a}=o.current;return(0,r.useEffect)(function(){i.current!==n&&(t(a,n,i.current),i.current=n)},[a,n,t]),o}}},52836:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(31418),l=n(95155);let o=(0,r.A)((0,l.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn")},58255:(e,t,n)=>{"use strict";n.d(t,{Po:()=>i,ko:()=>o});var r=n(89736),l=n(12115);function o(){return(0,r.U$)().map}function i(e){let t=o();return(0,l.useEffect)(function(){return t.on(e),function(){t.off(e)}},[t,e]),t}},62442:(e,t,n)=>{"use strict";n.d(t,{Nq:()=>d,Lt:()=>f,X3:()=>p});var r=n(12115);n(47650);var l=n(89736);function o(e){return(0,r.forwardRef)(function(t,n){let{instance:o,context:i}=e(t).current;(0,r.useImperativeHandle)(n,()=>o);let{children:a}=t;return null==a?null:r.createElement(l.dk,{value:i},a)})}var i=n(40819);function a(e,t){let n=(0,r.useRef)(void 0);(0,r.useEffect)(function(){return null!=t&&e.instance.on(t),n.current=t,function(){null!=n.current&&e.instance.off(n.current),n.current=null}},[e,t])}var c=n(80531);function s(e,t){(0,r.useEffect)(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){t.layerContainer?.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function u(e){return function(t){let n=(0,l.U$)(),o=e((0,c.P)(t,n),n);return!function(e,t){let n=(0,r.useRef)(t);(0,r.useEffect)(function(){t!==n.current&&null!=e.attributionControl&&(null!=n.current&&e.attributionControl.removeAttribution(n.current),null!=t&&e.attributionControl.addAttribution(t)),n.current=t},[e,t])}(n.map,t.attribution),a(o.current,t.eventHandlers),s(o.current,n),o}}function d(e,t){return o(u((0,i.K)(e,t)))}function f(e,t){var n;return o((n=(0,i.K)(e,t),function(e){let t=(0,l.U$)(),o=n((0,c.P)(e,t),t);a(o.current,e.eventHandlers),s(o.current,t);var i=o.current;let u=(0,r.useRef)(void 0);return(0,r.useEffect)(function(){if(e.pathOptions!==u.current){let t=e.pathOptions??{};i.instance.setStyle(t),u.current=t}},[i,e]),o}))}function p(e,t){var n;return n=u((0,i.K)(e,t)),(0,r.forwardRef)(function(e,t){let{instance:l}=n(e).current;return(0,r.useImperativeHandle)(t,()=>l),null})}},68413:()=>{},74879:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>I});var r=n(95155),l=n(58255),o=n(33704),i=n(9540),a=n(27195),c=n(62442),s=n(40819),u=n(89736),d=n(85752),f=n.n(d);let p=(0,c.Lt)(function({positions:e,...t},n){let r=new d.Polyline(e,t);return(0,s.Q)(r,(0,u.W4)(n,{overlayContainer:r}))},function(e,t,n){t.positions!==n.positions&&e.setLatLngs(t.positions)});var x=n(12115),h=n(54581),m=n(71116),y=n(16950),v=n(97644),g=n(41101),j=n(92302),b=n(18407),w=n(52836),C=n(31418);let S=(0,C.A)((0,r.jsx)("path",{d:"M14.4 6 14 4H5v17h2v-7h5.6l.4 2h7V6z"}),"Flag");var z=n(11414);let k=(0,C.A)([(0,r.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,r.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule");n(68413);let A=new(f()).Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),E=new(f()).Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});function I(e){let{onFromLocationSelect:t,onToLocationSelect:n,initialFromLocation:c,initialToLocation:s,onRouteCalculated:u,deliveryType:d="within-city"}=e,[f,C]=(0,x.useState)(c||null),[I,L]=(0,x.useState)(s||null),[O,R]=(0,x.useState)("from"),[M,P]=(0,x.useState)(!1),[F,U]=(0,x.useState)(!1),[W,H]=(0,x.useState)(""),[N,_]=(0,x.useState)([]),[K,Q]=(0,x.useState)(null),[$,B]=(0,x.useState)(!1),[D,T]=(0,x.useState)(null),[Z,q]=(0,x.useState)(null);(0,x.useEffect)(()=>{"within-city"===d?T("city"):"inter-city"===d?T("country"):T(null)},[d]),(0,x.useEffect)(()=>{C(c||null),L(s||null)},[c,s]),(0,x.useEffect)(()=>{c?"city"===D&&c.city?q(c.city):"country"===D&&c.country&&q(c.country):s?"city"===D&&s.city?q(s.city):"country"===D&&s.country&&q(s.country):q(null)},[c,s,D]),(0,x.useEffect)(()=>{P(!0)},[]);let G=async(e,t)=>{B(!0),H("");try{let n="https://router.project-osrm.org/route/v1/driving/".concat(e.lng,",").concat(e.lat,";").concat(t.lng,",").concat(t.lat,"?overview=full&geometries=geojson"),r=await fetch(n),l=await r.json();if("Ok"!==l.code||!l.routes||0===l.routes.length)throw Error("Could not calculate route");let o=l.routes[0],i=o.geometry.coordinates.map(e=>[e[1],e[0]]),a=(o.distance/1e3).toFixed(1),c=Math.round(o.duration/60),s={distance:"".concat(a," km"),duration:"".concat(c," min"),coordinates:i};_(i),Q(s),u&&u(s)}catch(n){console.error("Route calculation error:",n),H("Could not calculate route. Showing straight line."),_([[e.lat,e.lng],[t.lat,t.lng]]),Q(null)}finally{B(!1)}};(0,x.useEffect)(()=>{f&&I?G(f,I):(_([]),Q(null))},[f,I]);let V=async(e,t)=>{try{var n,r,l,o,i;let a=await fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(e,"&lon=").concat(t,"&zoom=18&addressdetails=1"),{headers:{"Accept-Language":"en"}}),c=await a.json();if(c.error)throw Error(c.error);let s=c.display_name||"".concat(e.toFixed(6),", ").concat(t.toFixed(6)),u=(null==(n=c.address)?void 0:n.city)||(null==(r=c.address)?void 0:r.town)||(null==(l=c.address)?void 0:l.village)||(null==(o=c.address)?void 0:o.state)||void 0,d=(null==(i=c.address)?void 0:i.country)||void 0;return{address:s,city:u,country:d}}catch(n){return console.error("Geocoding error:",n),{address:"".concat(e.toFixed(6),", ").concat(t.toFixed(6)),city:void 0,country:void 0}}};if(!M)return(0,r.jsx)(h.default,{sx:{height:"400px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(m.default,{variant:"body2",color:"text.secondary",children:"Loading map..."})});let X=(null==f?void 0:f.lat)||(null==I?void 0:I.lat)||52.2297,Y=(null==f?void 0:f.lng)||(null==I?void 0:I.lng)||21.0122;return(0,r.jsxs)(h.default,{children:[(0,r.jsxs)(h.default,{sx:{mb:2},children:[(0,r.jsxs)(h.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[(0,r.jsx)(m.default,{variant:"subtitle2",sx:{color:"text.secondary"},children:"Select marker type, then click on the map"}),(0,r.jsxs)(y.A,{value:O,exclusive:!0,onChange:(e,t)=>{null!==t&&R(t)},size:"small",sx:{backgroundColor:"background.paper"},children:[(0,r.jsxs)(v.A,{value:"from","aria-label":"from location",children:[(0,r.jsx)(w.A,{sx:{mr:.5,fontSize:"18px",color:"success.main"}}),(0,r.jsx)(m.default,{variant:"caption",children:"From"})]}),(0,r.jsxs)(v.A,{value:"to","aria-label":"to location",children:[(0,r.jsx)(S,{sx:{mr:.5,fontSize:"18px",color:"error.main"}}),(0,r.jsx)(m.default,{variant:"caption",children:"To"})]})]})]}),Z&&D&&(0,r.jsx)(h.default,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:(0,r.jsx)(g.A,{label:"".concat("city"===D?"City":"Country",": ").concat(Z),color:"city"===D?"success":"primary",size:"small",onDelete:()=>{q(null),C(null),L(null),_([]),Q(null),H("")}})})]}),W&&(0,r.jsx)(j.A,{severity:"error",sx:{mb:2},children:W}),F&&(0,r.jsx)(j.A,{severity:"info",sx:{mb:2},children:"Getting address..."}),(0,r.jsxs)(o.W,{center:[X,Y],zoom:13,style:{height:"400px",width:"100%",borderRadius:"8px",zIndex:0},scrollWheelZoom:!0,attributionControl:!1,children:[(0,r.jsx)(i.e,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,r.jsx)(function(){return(0,l.Po)({async click(e){let{lat:r,lng:l}=e.latlng;U(!0),H("");try{let{address:e,city:o,country:i}=await V(r,l);if(D&&Z){if("city"===D){if(!o){H("Could not determine city. Please select a more specific location."),U(!1);return}if(o!==Z){H("You can only select locations within ".concat(Z,". Selected location is in ").concat(o,".")),U(!1);return}}else if("country"===D){if(!i){H("Could not determine country. Please select a more specific location."),U(!1);return}if(i!==Z){H("You can only select locations within ".concat(Z,". Selected location is in ").concat(i,".")),U(!1);return}}}let a={lat:r,lng:l,address:e,city:o,country:i};"from"===O?(C(a),t(a),"city"===D&&o?q(o):"country"===D&&i&&q(i)):(L(a),n(a))}catch(e){H("Failed to get address. Please try again."),console.error(e)}finally{U(!1)}}}),null},{}),f&&(0,r.jsx)(a.p,{position:[f.lat,f.lng],icon:A}),I&&(0,r.jsx)(a.p,{position:[I.lat,I.lng],icon:E}),N.length>0&&(0,r.jsx)(p,{positions:N,color:"#2563eb",weight:4,opacity:.8})]}),$&&(0,r.jsx)(j.A,{severity:"info",sx:{mt:2},children:"Calculating route..."}),K&&(0,r.jsxs)(h.default,{sx:{mt:2,display:"flex",gap:1,justifyContent:"center"},children:[(0,r.jsx)(g.A,{icon:(0,r.jsx)(z.A,{}),label:K.distance,color:"primary",variant:"outlined",size:"small"}),(0,r.jsx)(g.A,{icon:(0,r.jsx)(k,{}),label:K.duration,color:"primary",variant:"outlined",size:"small"})]}),(0,r.jsxs)(h.default,{sx:{mt:2,display:"flex",flexDirection:"column",gap:1.5},children:[(0,r.jsx)(b.A,{sx:{p:1.5,backgroundColor:f?"success.lighter":"action.hover"},children:(0,r.jsxs)(h.default,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[(0,r.jsx)(w.A,{sx:{color:"success.main",mt:.2},fontSize:"small"}),(0,r.jsxs)(h.default,{sx:{flex:1},children:[(0,r.jsx)(m.default,{variant:"caption",fontWeight:600,display:"block",children:"From:"}),(0,r.jsx)(m.default,{variant:"caption",color:"text.secondary",children:f?f.address:"Not selected"})]})]})}),(0,r.jsx)(b.A,{sx:{p:1.5,backgroundColor:I?"error.lighter":"action.hover"},children:(0,r.jsxs)(h.default,{sx:{display:"flex",alignItems:"flex-start",gap:1},children:[(0,r.jsx)(S,{sx:{color:"error.main",mt:.2},fontSize:"small"}),(0,r.jsxs)(h.default,{sx:{flex:1},children:[(0,r.jsx)(m.default,{variant:"caption",fontWeight:600,display:"block",children:"To:"}),(0,r.jsx)(m.default,{variant:"caption",color:"text.secondary",children:I?I.address:"Not selected"})]})]})})]})]})}},80531:(e,t,n)=>{"use strict";function r(e,t){let n=e.pane??t.pane;return n?{...e,pane:n}:e}n.d(t,{P:()=>r})},89736:(e,t,n)=>{"use strict";n.d(t,{U$:()=>a,W4:()=>o,dk:()=>i,fB:()=>l});var r=n(12115);function l(e){return Object.freeze({__version:1,map:e})}function o(e,t){return Object.freeze({...e,...t})}let i=(0,r.createContext)(null);function a(){let e=(0,r.use)(i);if(null==e)throw Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}}}]);