"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5409,6509,8780],{6864:(e,t,a)=>{a.d(t,{$H:()=>n,HW:()=>o,TK:()=>i,op:()=>c,wz:()=>s});var r=a(51070);let s=async e=>(await r.x.get("/user/".concat(e))).data,i=async(e,t)=>(await r.x.put("/user/".concat(e),t)).data,o=async()=>(await r.x.get("/auth/me")).data,n=async(e,t)=>(await r.x.put("/user/".concat(e,"/online-status"),{isOnline:t})).data,c=async e=>(await r.x.get("/user/".concat(e,"/balance"))).data},14140:(e,t,a)=>{a.d(t,{j:()=>o});var r=a(23915),s=a(45404);let i=(0,r.Wp)({apiKey:"AIzaSyDiclg8XNo2L1hDBoaSoHmFMBggUKYjHH4",authDomain:"pickom-mvp.firebaseapp.com",projectId:"pickom-mvp",storageBucket:"pickom-mvp.firebasestorage.app",messagingSenderId:"168767828055",appId:"1:168767828055:web:2853961b44970c114ab312"}),o=(0,s.xI)(i)},16509:(e,t,a)=>{a.d(t,{TJ:()=>n,_z:()=>c,createChat:()=>s,iS:()=>l,m7:()=>o,ug:()=>i});var r=a(51070);let s=async e=>r.x.post("/chat/create",e),i=async()=>r.x.get("/chat"),o=async e=>r.x.get("/chat/delivery/".concat(e)),n=async e=>r.x.get("/chat/".concat(e)),c=async(e,t)=>r.x.post("/chat/".concat(e,"/messages"),t),l=async e=>r.x.patch("/chat/".concat(e,"/messages/mark-read"))},21787:(e,t,a)=>{a.d(t,{IT:()=>n,S1:()=>u,TS:()=>f,XE:()=>c,confirmRecipient:()=>x,createDeliveryRequest:()=>i,qM:()=>d,rg:()=>h,updateDeliveryRequest:()=>l,vd:()=>s,zW:()=>o});var r=a(51070);let s=async()=>r.B.get("/delivery/pickers"),i=async e=>r.x.post("/delivery/requests",e),o=async()=>r.x.get("/delivery/requests"),n=async e=>r.x.get("/delivery/requests/".concat(e)),c=async(e,t)=>r.x.put("/delivery/requests/".concat(e,"/status"),{status:t}),l=async(e,t)=>r.x.patch("/delivery/requests/".concat(e),t),d=async()=>r.x.get("/delivery/completed"),u=async()=>r.x.get("/delivery/cancelled"),x=async(e,t)=>r.x.put("/delivery/requests/".concat(e,"/confirm-recipient"),{confirmed:t}),h=async e=>r.x.post("/delivery/find-receiver",{email:e}),f=async()=>r.x.get("/delivery/incoming")},28069:(e,t,a)=>{a.d(t,{Nq:()=>o,mH:()=>i,mg:()=>s,vx:()=>n});var r=a(51070);let s=async e=>r.B.post("/auth/login",{},{headers:{Authorization:"Bearer ".concat(e)}}),i=async(e,t,a,s)=>r.B.post("/auth/register",{role:e,phone:a,name:s},{headers:{Authorization:"Bearer ".concat(t)}}),o=async()=>r.x.get("/auth/me"),n=async()=>r.x.post("/auth/logout")},43452:(e,t,a)=>{a.d(t,{MobileContainer:()=>n});var r=a(95155);a(12115);var s=a(54581),i=a(18407),o=a(35695);let n=e=>{let{children:t,width:a=375,height:n=812,showFrame:c=!0,backgroundColor:l,showBottomNav:d=!0}=e,u=(0,o.usePathname)(),x=(null==u?void 0:u.includes("/login"))||(null==u?void 0:u.includes("/register")),h=d&&!x;return c?(0,r.jsx)(s.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",padding:3,backgroundColor:"#f5f5f5"},children:(0,r.jsx)(i.A,{elevation:3,sx:{width:a,height:h?"calc(".concat(n,"px - 70px)"):n,borderRadius:6,overflow:"hidden",position:"relative",bgcolor:l||"background.default",border:"8px solid #000000","&::before":{content:'""',position:"absolute",top:12,left:"50%",transform:"translateX(-50%)",width:134,height:6,backgroundColor:"#000000",borderRadius:3,zIndex:1},"&::after":{content:'""',position:"absolute",bottom:8,left:"50%",transform:"translateX(-50%)",width:134,height:5,backgroundColor:"#000000",borderRadius:2.5,zIndex:1}},children:(0,r.jsx)(s.default,{"data-mobile-container":!0,sx:{width:"100%",height:"100%",paddingTop:6,overflow:"auto",position:"relative","&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"},children:(0,r.jsx)(s.default,{sx:{paddingBottom:4,minHeight:"100%"},children:t})})})}):(0,r.jsx)(s.default,{"data-mobile-container":!0,sx:{width:"100%",maxWidth:a,height:h?"calc(100vh - 70px)":"100vh",maxHeight:h?"calc(".concat(n,"px - 70px)"):n,bgcolor:l||"background.default",overflow:"hidden",position:"relative","&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"},children:(0,r.jsx)(s.default,{sx:{paddingBottom:0,minHeight:"100%",overflow:"auto",height:"100%"},children:t})})}},47075:(e,t,a)=>{a.d(t,{A:()=>v});var r=a(95155),s=a(54581),i=a(41101),o=a(71116),n=a(74964),c=a(72705),l=a(68534),d=a(63645),u=a(21888),x=a(74802),h=a(74588),f=a(42663),p=a(77262),g=a(37429),m=a(11414);function b(e){let{picker:t,variant:a="compact"}=e,n=t.trustLevel||0;return(0,r.jsx)(s.default,{sx:{p:2,borderRadius:2,backgroundColor:"background.paper",border:1,borderColor:"divider"},children:(0,r.jsxs)(c.A,{direction:"row",spacing:2,alignItems:"flex-start",children:[(0,r.jsx)(f.default,{src:t.avatarUrl,sx:{width:"full"===a?64:48,height:"full"===a?64:48,fontSize:"full"===a?"1.5rem":"1.2rem"},children:t.fullName.charAt(0).toUpperCase()}),(0,r.jsxs)(s.default,{sx:{flex:1},children:[(0,r.jsxs)(s.default,{sx:{display:"flex",alignItems:"center",gap:.5,mb:.5},children:[(0,r.jsx)(o.default,{variant:"full"===a?"h6":"subtitle2",sx:{fontWeight:600},children:t.fullName}),t.isVerified&&(0,r.jsx)(g.A,{sx:{fontSize:18,color:"primary.main"}})]}),(0,r.jsxs)(o.default,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["⭐ ",t.rating.toFixed(1)," (",t.reviewCount," ",1===t.reviewCount?"review":"reviews",")"]}),(0,r.jsxs)(c.A,{direction:"row",spacing:1,sx:{mb:1,flexWrap:"wrap",gap:.5},children:[t.vehicle&&(0,r.jsx)(i.A,{icon:(0,r.jsx)(m.A,{sx:{fontSize:14}}),label:t.vehicle,size:"small",color:"info",variant:"outlined",sx:{height:24,fontSize:"0.7rem"}}),(0,r.jsx)(i.A,{icon:(0,r.jsx)(x.default,{sx:{fontSize:14}}),label:"".concat(t.completedDeliveries," ").concat(1===t.completedDeliveries?"delivery":"deliveries"),size:"small",color:"success",variant:"outlined",sx:{height:24,fontSize:"0.7rem"}})]}),"full"===a&&n>0&&(0,r.jsxs)(s.default,{sx:{mt:2},children:[(0,r.jsxs)(s.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[(0,r.jsx)(o.default,{variant:"caption",color:"text.secondary",children:"Trust Level"}),(0,r.jsxs)(o.default,{variant:"caption",sx:{fontWeight:600,color:n>=80?"success.main":"warning.main"},children:[n,"%"]})]}),(0,r.jsx)(p.default,{variant:"determinate",value:n,sx:{height:6,borderRadius:3,backgroundColor:"action.hover","& .MuiLinearProgress-bar":{backgroundColor:n>=80?"success.main":n>=50?"warning.main":"error.main",borderRadius:3}}})]})]})]})})}function v(e){let{offer:t,picker:a,originalPrice:f,onChat:p,onAccept:g,onReject:m,disabled:v=!1}=e,y=t.price-f,j=(y/f*100).toFixed(0),k="pending"===t.status;return(0,r.jsxs)(s.default,{sx:{p:2,mb:2,borderRadius:2,backgroundColor:"background.paper",border:2,borderColor:"accepted"===t.status?"success.main":"rejected"===t.status?"error.light":"divider",opacity:"rejected"===t.status?.7:1,transition:"all 0.2s"},children:[(0,r.jsxs)(s.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,r.jsx)(i.A,{label:(e=>{switch(e){case"pending":return"Pending";case"accepted":return"Accepted";case"rejected":return"Rejected";default:return e}})(t.status),size:"small",color:(e=>{switch(e){case"pending":return"warning";case"accepted":return"success";case"rejected":return"error";default:return"default"}})(t.status),sx:{fontWeight:600}}),(0,r.jsx)(o.default,{variant:"caption",color:"text.secondary",children:new Date(t.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,r.jsx)(b,{picker:a,variant:"full"}),(0,r.jsx)(n.A,{sx:{my:2}}),(0,r.jsxs)(s.default,{sx:{mb:2},children:[(0,r.jsx)(o.default,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:"Price Comparison"}),(0,r.jsxs)(c.A,{direction:"row",spacing:2,alignItems:"center",children:[(0,r.jsxs)(s.default,{children:[(0,r.jsx)(o.default,{variant:"caption",color:"text.secondary",children:"Offered Price"}),(0,r.jsxs)(s.default,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,r.jsx)(d.A,{sx:{fontSize:20,color:"primary.main"}}),(0,r.jsxs)(o.default,{variant:"h6",sx:{color:"primary.main",fontWeight:"bold"},children:[t.price," zł"]})]})]}),(0,r.jsxs)(s.default,{children:[(0,r.jsx)(o.default,{variant:"caption",color:"text.secondary",children:"Your Price"}),(0,r.jsxs)(o.default,{variant:"body2",sx:{fontWeight:500},children:[f," zł"]})]}),0!==y&&(0,r.jsx)(i.A,{label:"".concat(y>0?"+":"").concat(j,"%"),size:"small",color:y<0?"success":"warning",sx:{height:24,fontSize:"0.7rem"}})]})]}),t.message&&(0,r.jsxs)(s.default,{sx:{p:1.5,mb:2,borderRadius:1,backgroundColor:"action.hover",borderLeft:3,borderColor:"primary.main"},children:[(0,r.jsx)(o.default,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Message from picker"}),(0,r.jsxs)(o.default,{variant:"body2",sx:{fontStyle:"italic"},children:['"',t.message,'"']})]}),(0,r.jsxs)(c.A,{direction:"row",spacing:1,children:[(0,r.jsx)(l.A,{variant:"outlined",startIcon:(0,r.jsx)(u.A,{}),onClick:p,disabled:v,fullWidth:!0,sx:{textTransform:"none"},children:"Chat"}),k&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{variant:"contained",color:"success",startIcon:(0,r.jsx)(x.default,{}),onClick:g,disabled:v,fullWidth:!0,sx:{textTransform:"none",fontWeight:600},children:"Accept"}),(0,r.jsx)(l.A,{variant:"outlined",color:"error",startIcon:(0,r.jsx)(h.A,{}),onClick:m,disabled:v,fullWidth:!0,sx:{textTransform:"none"},children:"Reject"})]})]})]})}},51070:(e,t,a)=>{a.d(t,{B:()=>o,x:()=>i});var r=a(23464),s=a(14140);let i=r.A.create({baseURL:"".concat("http://localhost:4242"),withCredentials:!0,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(async e=>{let t=s.j.currentUser;if(t){let a=await t.getIdToken();e.headers.Authorization="Bearer ".concat(a)}return e},e=>Promise.reject(e));let o=r.A.create({baseURL:"".concat("http://localhost:4242"),withCredentials:!0,headers:{"Content-Type":"application/json"}})},78780:(e,t,a)=>{a.d(t,{F8:()=>i,aT:()=>n,createOffer:()=>s,i6:()=>o});var r=a(51070);let s=async e=>r.x.post("/offers",e),i=async e=>r.x.get("/offers/delivery/".concat(e)),o=async(e,t)=>r.x.patch("/offers/".concat(e),t),n=async()=>r.x.get("/offers/my")},97704:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var r=a(95155),s=a(12115),i=a(35695),o=a(18407),n=a(40541),c=a(9111),l=a(26564),d=a(11335),u=a(21888),x=a(43290),h=a(60807);let f=e=>e>99?"99+":e,p=(0,s.memo)(function(){let{className:e,unreadChatsCount:t=0,activeOrdersCount:a=0,unreadNotificationsCount:p=0,userRole:g}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=(0,i.useRouter)(),b=(0,i.usePathname)(),[v,y]=(0,s.useState)(()=>localStorage.getItem("userRole"));(0,s.useEffect)(()=>{if(!g){let e=null;b.startsWith("/available-deliveries")?e="picker":b.startsWith("/delivery-methods")&&(e="sender"),e&&e!==v&&(y(e),localStorage.setItem("userRole",e))}},[b,g,v]);let j=g||v,k=(0,s.useMemo)(()=>b.startsWith("/delivery-methods")||b.startsWith("/orders")||b.startsWith("/available-deliveries")?0:b.startsWith("/chat")?1:b.startsWith("/notifications")?2:3*!!b.startsWith("/profile"),[b]),[w,C]=(0,s.useState)(k),A=(0,s.useCallback)((e,t)=>{switch(C(t),t){case 0:"picker"===j?m.push("/available-deliveries"):m.push("/delivery-methods");break;case 1:m.push("/chats");break;case 2:m.push("/notifications");break;case 3:m.push("/profile")}},[m,j]);return(0,r.jsx)(o.A,{className:e,sx:{position:"absolute",bottom:0,left:0,right:0,zIndex:1200,paddingBottom:"env(safe-area-inset-bottom)",backgroundColor:"background.paper",borderTop:1,borderColor:"divider",borderRadius:0,boxShadow:"none"},elevation:0,children:(0,r.jsxs)(n.A,{value:w,onChange:A,sx:{backgroundColor:"background.paper"},children:[(0,r.jsx)(c.A,{label:"Orders",icon:(0,r.jsx)(l.default,{badgeContent:f(a),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,r.jsx)(d.default,{})})}),(0,r.jsx)(c.A,{label:"Chat",icon:(0,r.jsx)(l.default,{badgeContent:f(t),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,r.jsx)(u.A,{})})}),(0,r.jsx)(c.A,{label:"Notifications",icon:(0,r.jsx)(l.default,{badgeContent:f(p),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,r.jsx)(x.A,{})})}),(0,r.jsx)(c.A,{label:"Profile",icon:(0,r.jsx)(h.default,{})})]})})})}}]);