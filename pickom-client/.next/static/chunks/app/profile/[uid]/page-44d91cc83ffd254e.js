(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3139],{6864:(e,t,a)=>{"use strict";a.d(t,{$H:()=>s,HW:()=>n,TK:()=>i,op:()=>o,wz:()=>l});var r=a(51070);let l=async e=>(await r.x.get("/user/".concat(e))).data,i=async(e,t)=>(await r.x.put("/user/".concat(e),t)).data,n=async()=>(await r.x.get("/auth/me")).data,s=async(e,t)=>(await r.x.put("/user/".concat(e,"/online-status"),{isOnline:t})).data,o=async e=>(await r.x.get("/user/".concat(e,"/balance"))).data},16440:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var r=a(95155),l=a(12115),i=a(54581),n=a(14426),s=a(92302),o=a(3127),d=a(41218),c=a(16632),u=a(71116),f=a(68534),x=a(38464),h=a(21888),p=a(35695),y=a(43452),g=a(2791),m=a(66617),j=a(98226),v=a(97704),b=a(6864),A=a(16509);function w(e){let{params:t}=e,a=(0,l.use)(t),w=(0,p.useRouter)(),{uid:k}=a,[C,S]=(0,l.useState)(null),[P,F]=(0,l.useState)(""),[R,D]=(0,l.useState)(!0),[I,M]=(0,l.useState)(""),[H,W]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{try{let e=await (0,b.HW)();F(e.user.uid);let t=await (0,b.wz)(k);S(t.user)}catch(e){console.error("Failed to fetch user data:",e),M("Failed to load user profile. Please try again.")}finally{D(!1)}})()},[k]);let z=async()=>{if(C){W(!0);try{let{chatId:e}=(await (0,A.createChat)({participantId:C.uid})).data;w.push("/chat/".concat(e))}catch(e){console.error("Failed to open chat:",e),alert("Failed to open chat. Please try again.")}finally{W(!1)}}};return R?(0,r.jsx)(i.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:(0,r.jsx)(n.default,{})}):I||!C?(0,r.jsx)(i.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",p:2},children:(0,r.jsx)(s.A,{severity:"error",children:I||"Failed to load profile"})}):P===C.uid?(w.push("/profile"),null):(0,r.jsx)(i.default,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5",p:2},children:(0,r.jsxs)(i.default,{sx:{position:"relative",width:"100%",maxWidth:375,minHeight:812},children:[(0,r.jsx)(y.MobileContainer,{showFrame:!1,children:(0,r.jsxs)(i.default,{sx:{p:3,pb:10,backgroundColor:"background.default",minHeight:"100vh"},children:[(0,r.jsx)(i.default,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,r.jsx)(o.A,{onClick:()=>{w.back()},sx:{p:1,"&:hover":{backgroundColor:"action.hover"}},children:(0,r.jsx)(x.A,{})})}),(0,r.jsx)(g.b,{user:{id:C.uid,fullName:C.name,email:C.email,age:0,country:"",city:"",userType:"picker"===C.role?j.u.PICKER:j.u.SENDER,avatarUrl:C.avatarUrl,description:"",rating:C.rating||0,isVerified:!1}}),(0,r.jsx)(m.P,{rating:C.rating||0,totalRatings:C.totalRatings||0,role:C.role,completedDeliveries:C.completedDeliveries||0,totalOrders:C.totalOrders||0}),(0,r.jsx)(d.A,{sx:{mb:3},children:(0,r.jsxs)(c.A,{children:[(0,r.jsx)(u.default,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Information"}),(0,r.jsxs)(i.default,{sx:{display:"flex",flexDirection:"column",gap:1.5},children:[(0,r.jsxs)(i.default,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)(u.default,{variant:"body2",color:"text.secondary",children:"Role:"}),(0,r.jsx)(u.default,{variant:"body2",sx:{fontWeight:500},children:"picker"===C.role?"Picker":"Sender"})]}),C.phone&&(0,r.jsxs)(i.default,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)(u.default,{variant:"body2",color:"text.secondary",children:"Phone:"}),(0,r.jsx)(u.default,{variant:"body2",sx:{fontWeight:500},children:C.phone})]}),void 0!==C.isOnline&&(0,r.jsxs)(i.default,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)(u.default,{variant:"body2",color:"text.secondary",children:"Status:"}),(0,r.jsxs)(i.default,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,r.jsx)(i.default,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:C.isOnline?"#4caf50":"#9e9e9e"}}),(0,r.jsx)(u.default,{variant:"body2",sx:{fontWeight:500},children:C.isOnline?"Online":"Offline"})]})]}),C.createdAt&&(0,r.jsxs)(i.default,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)(u.default,{variant:"body2",color:"text.secondary",children:"Member since:"}),(0,r.jsx)(u.default,{variant:"body2",sx:{fontWeight:500},children:new Date(C.createdAt).toLocaleDateString()})]})]})]})}),"picker"===C.role&&(0,r.jsx)(d.A,{sx:{mb:3},children:(0,r.jsxs)(c.A,{children:[(0,r.jsx)(u.default,{variant:"h6",sx:{mb:2,fontWeight:600},children:"Picker Details"}),(0,r.jsx)(i.default,{sx:{display:"flex",flexDirection:"column",gap:1.5},children:C.basePrice&&(0,r.jsxs)(i.default,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)(u.default,{variant:"body2",color:"text.secondary",children:"Base Price:"}),(0,r.jsxs)(u.default,{variant:"body2",sx:{fontWeight:500,color:"primary.main"},children:[Number(C.basePrice).toFixed(2)," zÅ‚"]})]})})]})}),(0,r.jsx)(i.default,{sx:{mt:3},children:(0,r.jsx)(f.A,{fullWidth:!0,variant:"contained",startIcon:(0,r.jsx)(h.A,{}),onClick:z,disabled:H,sx:{py:1.5,textTransform:"none",fontSize:"1rem",fontWeight:500},children:H?"Opening chat...":"Send Message"})})]})}),(0,r.jsx)(v.default,{})]})})}},38464:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(31418),l=a(95155);let i=(0,r.A)((0,l.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},42663:(e,t,a)=>{"use strict";a.d(t,{default:()=>j});var r=a(12115),l=a(52596),i=a(17472),n=a(75955),s=a(40680),o=a(10186),d=a(31418),c=a(95155);let u=(0,d.A)((0,c.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var f=a(55170),x=a(90870);function h(e){return(0,x.Ay)("MuiAvatar",e)}(0,f.A)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var p=a(47798);let y=(0,n.Ay)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,t[a.variant],a.colorDefault&&t.colorDefault]}})((0,s.A)(e=>{let{theme:t}=e;return{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(t.vars||t).palette.background.default,...t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:{backgroundColor:t.palette.grey[400],...t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})}}}]}})),g=(0,n.Ay)("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),m=(0,n.Ay)(u,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"}),j=r.forwardRef(function(e,t){let a=(0,o.b)({props:e,name:"MuiAvatar"}),{alt:n,children:s,className:d,component:u="div",slots:f={},slotProps:x={},imgProps:j,sizes:v,src:b,srcSet:A,variant:w="circular",...k}=a,C=null,S={...a,component:u,variant:w},P=function(e){let{crossOrigin:t,referrerPolicy:a,src:l,srcSet:i}=e,[n,s]=r.useState(!1);return r.useEffect(()=>{if(!l&&!i)return;s(!1);let e=!0,r=new Image;return r.onload=()=>{e&&s("loaded")},r.onerror=()=>{e&&s("error")},r.crossOrigin=t,r.referrerPolicy=a,r.src=l,i&&(r.srcset=i),()=>{e=!1}},[t,a,l,i]),n}({...j,..."function"==typeof x.img?x.img(S):x.img,src:b,srcSet:A}),F=b||A,R=F&&"error"!==P;S.colorDefault=!R,delete S.ownerState;let D=(e=>{let{classes:t,variant:a,colorDefault:r}=e;return(0,i.A)({root:["root",a,r&&"colorDefault"],img:["img"],fallback:["fallback"]},h,t)})(S),[I,M]=(0,p.A)("root",{ref:t,className:(0,l.A)(D.root,d),elementType:y,externalForwardedProps:{slots:f,slotProps:x,component:u,...k},ownerState:S}),[H,W]=(0,p.A)("img",{className:D.img,elementType:g,externalForwardedProps:{slots:f,slotProps:{img:{...j,...x.img}}},additionalProps:{alt:n,src:b,srcSet:A,sizes:v},ownerState:S}),[z,O]=(0,p.A)("fallback",{className:D.fallback,elementType:m,externalForwardedProps:{slots:f,slotProps:x},shouldForwardComponentProp:!0,ownerState:S});return C=R?(0,c.jsx)(H,{...W}):s||0===s?s:F&&n?n[0]:(0,c.jsx)(z,{...O}),(0,c.jsx)(I,{...M,children:C})})},52056:(e,t,a)=>{Promise.resolve().then(a.bind(a,16440))},65324:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(31418),l=a(95155);let i=(0,r.A)((0,l.jsx)("path",{d:"M18 6h-2c0-2.21-1.79-4-4-4S8 3.79 8 6H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-8 4c0 .55-.45 1-1 1s-1-.45-1-1V8h2zm2-6c1.1 0 2 .9 2 2h-4c0-1.1.9-2 2-2m4 6c0 .55-.45 1-1 1s-1-.45-1-1V8h2z"}),"ShoppingBag")},68558:(e,t,a)=>{"use strict";a.d(t,{default:()=>i});var r=a(31418),l=a(95155);let i=(0,r.A)((0,l.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star")}},e=>{e.O(0,[3965,7225,8795,4611,8534,5394,9433,8441,5964,7358],()=>e(e.s=52056)),_N_E=e.O()}]);