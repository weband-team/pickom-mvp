(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4520],{14140:(e,r,a)=>{"use strict";a.d(r,{j:()=>l});var s=a(23915),t=a(45404);let i=(0,s.Wp)({apiKey:"AIzaSyDiclg8XNo2L1hDBoaSoHmFMBggUKYjHH4",authDomain:"pickom-mvp.firebaseapp.com",projectId:"pickom-mvp",storageBucket:"pickom-mvp.firebasestorage.app",messagingSenderId:"168767828055",appId:"1:168767828055:web:2853961b44970c114ab312"}),l=(0,t.xI)(i)},28069:(e,r,a)=>{"use strict";a.d(r,{Nq:()=>l,mH:()=>i,mg:()=>t,vx:()=>o});var s=a(51070);let t=async e=>s.B.post("/auth/login",{},{headers:{Authorization:"Bearer ".concat(e)}}),i=async(e,r,a,t)=>s.B.post("/auth/register",{role:e,phone:a,name:t},{headers:{Authorization:"Bearer ".concat(r)}}),l=async()=>s.x.get("/auth/me"),o=async()=>s.x.post("/auth/logout")},41819:(e,r,a)=>{"use strict";a.d(r,{DT:()=>s,Gn:()=>i,Lo:()=>n,Oj:()=>t,Q7:()=>o,Tl:()=>l,Y$:()=>d,nY:()=>c});let s=e=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?{isValid:!0}:{isValid:!1,error:"Please enter a valid email address"}:{isValid:!1,error:"Email is required"},t=e=>{if(!e)return{isValid:!1,error:"Password is required"};if(e.length<8)return{isValid:!1,error:"Password must be at least 8 characters long"};let r=/[a-zA-Z]/.test(e),a=/\d/.test(e);return r&&a?{isValid:!0}:{isValid:!1,error:"Password must contain both letters and numbers"}},i=e=>!e||isNaN(e)?{isValid:!1,error:"Age is required"}:e<18?{isValid:!1,error:"You must be at least 18 years old"}:e>80?{isValid:!1,error:"Age must be 80 or less"}:{isValid:!0},l=e=>{if(!e)return{isValid:!1,error:"Full name is required"};let r=e.trim();return r.length<2?{isValid:!1,error:"Full name must be at least 2 characters long"}:r.length>50?{isValid:!1,error:"Full name must be 50 characters or less"}:{isValid:!0}},o=e=>e?/^\+[1-9]\d{1,3}\d{4,14}$/.test(e)?{isValid:!0}:{isValid:!1,error:"Please enter a valid international phone number (e.g., +1234567890)"}:{isValid:!0},n=e=>e?e.trim().length<2?{isValid:!1,error:"Please enter a valid country name"}:{isValid:!0}:{isValid:!1,error:"Country is required"},d=e=>e?e.trim().length<2?{isValid:!1,error:"Please enter a valid city name"}:{isValid:!0}:{isValid:!1,error:"City is required"},c=(e,r)=>r?e!==r?{isValid:!1,error:"Passwords do not match"}:{isValid:!0}:{isValid:!1,error:"Please confirm your password"}},42236:(e,r,a)=>{Promise.resolve().then(a.bind(a,78007))},51070:(e,r,a)=>{"use strict";a.d(r,{B:()=>l,x:()=>i});var s=a(23464),t=a(14140);let i=s.A.create({baseURL:"".concat("http://localhost:4242"),withCredentials:!0,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(async e=>{let r=t.j.currentUser;if(r){let a=await r.getIdToken();e.headers.Authorization="Bearer ".concat(a)}return e},e=>Promise.reject(e));let l=s.A.create({baseURL:"".concat("http://localhost:4242"),withCredentials:!0,headers:{"Content-Type":"application/json"}})},78007:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>y});var s=a(95155),t=a(12115),i=a(35695),l=a(54581),o=a(71116),n=a(92302),d=a(72705),c=a(58343),u=a(6874),h=a.n(u),m=a(41819),p=a(45404),g=a(14140),x=a(28069);function y(){let[e,r]=(0,t.useState)({email:"",password:""}),[a,u]=(0,t.useState)(!1),[y,f]=(0,t.useState)(""),[w,v]=(0,t.useState)({}),b=(0,i.useRouter)(),j=e=>a=>{let s=a.target.value;r(r=>({...r,[e]:s})),y&&f("");let t="email"===e?(0,m.DT)(s):(0,m.Oj)(s);t.isValid?v(r=>({...r,[e]:void 0})):v(r=>({...r,[e]:t.error}))},V=async()=>{let r=(0,m.DT)(e.email),a=(0,m.Oj)(e.password),s={};if(r.isValid||(s.email=r.error),a.isValid||(s.password=a.error),Object.keys(s).length>0)return void v(s);u(!0),f(""),v({});try{let r=await (0,p.x9)(g.j,e.email,e.password),a=await r.user.getIdToken(),s=await (0,x.mg)(a);"picker"===s.data.role?b.push("/available-deliveries"):b.push("/delivery-methods")}catch(r){var t,i;console.error("Login error:",r);let e="Invalid email or password. Please try again.";"auth/invalid-credential"===r.code?e="Invalid email or password.":"auth/user-not-found"===r.code?e="No account found with this email.":"auth/wrong-password"===r.code?e="Incorrect password.":"auth/too-many-requests"===r.code?e="Too many failed attempts. Please try again later.":(null==(i=r.response)||null==(t=i.data)?void 0:t.message)&&(e=r.response.data.message),f(e)}finally{u(!1)}},k=e=>{"Enter"===e.key&&V()},P=e.email&&e.password&&!w.email&&!w.password;return(0,s.jsx)(l.default,{sx:{minHeight:"100vh",bgcolor:"background.default",display:"flex",alignItems:"center",justifyContent:"center",p:2},children:(0,s.jsx)(c.kc,{showFrame:!1,children:(0,s.jsxs)(l.default,{sx:{p:3},children:[(0,s.jsxs)(l.default,{sx:{textAlign:"center",mb:4},children:[(0,s.jsx)(c.Lm,{variant:"full",size:"large"}),(0,s.jsx)(o.default,{variant:"h4",sx:{fontWeight:"bold",mt:2,mb:1},children:"Welcome Back"}),(0,s.jsx)(o.default,{variant:"body1",color:"text.secondary",children:"Sign in to your Pickom account"})]}),y&&(0,s.jsx)(n.A,{severity:"error",sx:{mb:3},children:y}),(0,s.jsxs)(d.A,{spacing:3,children:[(0,s.jsx)(c.ks,{label:"Email",type:"email",value:e.email,onChange:j("email"),onKeyPress:k,error:!!w.email,helperText:w.email,fullWidth:!0,required:!0,autoComplete:"email"}),(0,s.jsx)(c.ks,{label:"Password",type:"password",value:e.password,onChange:j("password"),onKeyPress:k,error:!!w.password,helperText:w.password,fullWidth:!0,required:!0,autoComplete:"current-password"}),(0,s.jsx)(c.$n,{onClick:V,disabled:!P||a,fullWidth:!0,size:"large",sx:{mt:2},children:a?"Signing in...":"Sign In"})]}),(0,s.jsx)(l.default,{sx:{my:3,textAlign:"center"},children:(0,s.jsx)(o.default,{variant:"body2",color:"text.secondary",children:"Don't have an account?"})}),(0,s.jsx)(h(),{href:"/user-type",passHref:!0,children:(0,s.jsx)(c.$n,{variant:"outlined",fullWidth:!0,size:"large",children:"Create New Account"})}),(0,s.jsx)(l.default,{sx:{mt:3,textAlign:"center"},children:(0,s.jsx)(o.default,{variant:"body2",color:"text.secondary",sx:{textDecoration:"underline",cursor:"pointer","&:hover":{color:"primary.main"}},onClick:()=>{alert("Forgot password feature coming soon!")},children:"Forgot your password?"})})]})})})}}},e=>{e.O(0,[3965,7225,8795,4611,8534,5207,1101,8449,1190,9283,1986,7262,2649,7212,4171,8343,8441,5964,7358],()=>e(e.s=42236)),_N_E=e.O()}]);