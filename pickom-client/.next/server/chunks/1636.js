"use strict";exports.id=1636,exports.ids=[1517,1636,8404],exports.modules={1517:(a,b,c)=>{c.d(b,{TJ:()=>h,_z:()=>i,createChat:()=>e,iS:()=>j,m7:()=>g,ug:()=>f});var d=c(65290);let e=async a=>d.x.post("/chat/create",a),f=async()=>d.x.get("/chat"),g=async a=>d.x.get(`/chat/delivery/${a}`),h=async a=>d.x.get(`/chat/${a}`),i=async(a,b)=>d.x.post(`/chat/${a}/messages`,b),j=async a=>d.x.patch(`/chat/${a}/messages/mark-read`)},8404:(a,b,c)=>{c.d(b,{F8:()=>f,aT:()=>h,createOffer:()=>e,i6:()=>g});var d=c(65290);let e=async a=>d.x.post("/offers",a),f=async a=>d.x.get(`/offers/delivery/${a}`),g=async(a,b)=>d.x.patch(`/offers/${a}`,b),h=async()=>d.x.get("/offers/my")},55720:(a,b,c)=>{c.d(b,{A:()=>t});var d=c(60687),e=c(88931),f=c(76533),g=c(27463),h=c(91176),i=c(11830),j=c(16184),k=c(99737),l=c(42714),m=c(6046),n=c(36450),o=c(12879),p=c(18313),q=c(15823),r=c(96974);function s({picker:a,variant:b="compact"}){let c=a.trustLevel||0;return(0,d.jsx)(e.default,{sx:{p:2,borderRadius:2,backgroundColor:"background.paper",border:1,borderColor:"divider"},children:(0,d.jsxs)(i.A,{direction:"row",spacing:2,alignItems:"flex-start",children:[(0,d.jsx)(o.default,{src:a.avatarUrl,sx:{width:"full"===b?64:48,height:"full"===b?64:48,fontSize:"full"===b?"1.5rem":"1.2rem"},children:a.fullName.charAt(0).toUpperCase()}),(0,d.jsxs)(e.default,{sx:{flex:1},children:[(0,d.jsxs)(e.default,{sx:{display:"flex",alignItems:"center",gap:.5,mb:.5},children:[(0,d.jsx)(g.default,{variant:"full"===b?"h6":"subtitle2",sx:{fontWeight:600},children:a.fullName}),a.isVerified&&(0,d.jsx)(q.A,{sx:{fontSize:18,color:"primary.main"}})]}),(0,d.jsxs)(g.default,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["⭐ ",a.rating.toFixed(1)," (",a.reviewCount," ",1===a.reviewCount?"review":"reviews",")"]}),(0,d.jsxs)(i.A,{direction:"row",spacing:1,sx:{mb:1,flexWrap:"wrap",gap:.5},children:[a.vehicle&&(0,d.jsx)(f.A,{icon:(0,d.jsx)(r.A,{sx:{fontSize:14}}),label:a.vehicle,size:"small",color:"info",variant:"outlined",sx:{height:24,fontSize:"0.7rem"}}),(0,d.jsx)(f.A,{icon:(0,d.jsx)(m.default,{sx:{fontSize:14}}),label:`${a.completedDeliveries} ${1===a.completedDeliveries?"delivery":"deliveries"}`,size:"small",color:"success",variant:"outlined",sx:{height:24,fontSize:"0.7rem"}})]}),"full"===b&&c>0&&(0,d.jsxs)(e.default,{sx:{mt:2},children:[(0,d.jsxs)(e.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[(0,d.jsx)(g.default,{variant:"caption",color:"text.secondary",children:"Trust Level"}),(0,d.jsxs)(g.default,{variant:"caption",sx:{fontWeight:600,color:c>=80?"success.main":"warning.main"},children:[c,"%"]})]}),(0,d.jsx)(p.default,{variant:"determinate",value:c,sx:{height:6,borderRadius:3,backgroundColor:"action.hover","& .MuiLinearProgress-bar":{backgroundColor:c>=80?"success.main":c>=50?"warning.main":"error.main",borderRadius:3}}})]})]})]})})}function t({offer:a,picker:b,originalPrice:c,onChat:o,onAccept:p,onReject:q,disabled:r=!1}){let t=a.price-c,u=(t/c*100).toFixed(0),v="pending"===a.status;return(0,d.jsxs)(e.default,{sx:{p:2,mb:2,borderRadius:2,backgroundColor:"background.paper",border:2,borderColor:"accepted"===a.status?"success.main":"rejected"===a.status?"error.light":"divider",opacity:"rejected"===a.status?.7:1,transition:"all 0.2s"},children:[(0,d.jsxs)(e.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,d.jsx)(f.A,{label:(a=>{switch(a){case"pending":return"Pending";case"accepted":return"Accepted";case"rejected":return"Rejected";default:return a}})(a.status),size:"small",color:(a=>{switch(a){case"pending":return"warning";case"accepted":return"success";case"rejected":return"error";default:return"default"}})(a.status),sx:{fontWeight:600}}),(0,d.jsx)(g.default,{variant:"caption",color:"text.secondary",children:new Date(a.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,d.jsx)(s,{picker:b,variant:"full"}),(0,d.jsx)(h.A,{sx:{my:2}}),(0,d.jsxs)(e.default,{sx:{mb:2},children:[(0,d.jsx)(g.default,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:"Price Comparison"}),(0,d.jsxs)(i.A,{direction:"row",spacing:2,alignItems:"center",children:[(0,d.jsxs)(e.default,{children:[(0,d.jsx)(g.default,{variant:"caption",color:"text.secondary",children:"Offered Price"}),(0,d.jsxs)(e.default,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,d.jsx)(k.A,{sx:{fontSize:20,color:"primary.main"}}),(0,d.jsxs)(g.default,{variant:"h6",sx:{color:"primary.main",fontWeight:"bold"},children:[a.price," zł"]})]})]}),(0,d.jsxs)(e.default,{children:[(0,d.jsx)(g.default,{variant:"caption",color:"text.secondary",children:"Your Price"}),(0,d.jsxs)(g.default,{variant:"body2",sx:{fontWeight:500},children:[c," zł"]})]}),0!==t&&(0,d.jsx)(f.A,{label:`${t>0?"+":""}${u}%`,size:"small",color:t<0?"success":"warning",sx:{height:24,fontSize:"0.7rem"}})]})]}),a.message&&(0,d.jsxs)(e.default,{sx:{p:1.5,mb:2,borderRadius:1,backgroundColor:"action.hover",borderLeft:3,borderColor:"primary.main"},children:[(0,d.jsx)(g.default,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Message from picker"}),(0,d.jsxs)(g.default,{variant:"body2",sx:{fontStyle:"italic"},children:['"',a.message,'"']})]}),(0,d.jsxs)(i.A,{direction:"row",spacing:1,children:[(0,d.jsx)(j.A,{variant:"outlined",startIcon:(0,d.jsx)(l.A,{}),onClick:o,disabled:r,fullWidth:!0,sx:{textTransform:"none"},children:"Chat"}),v&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(j.A,{variant:"contained",color:"success",startIcon:(0,d.jsx)(m.default,{}),onClick:p,disabled:r,fullWidth:!0,sx:{textTransform:"none",fontWeight:600},children:"Accept"}),(0,d.jsx)(j.A,{variant:"outlined",color:"error",startIcon:(0,d.jsx)(n.A,{}),onClick:q,disabled:r,fullWidth:!0,sx:{textTransform:"none"},children:"Reject"})]})]})]})}},65290:(a,b,c)=>{c.d(b,{B:()=>g,x:()=>f});var d=c(41858),e=c(82566);let f=d.A.create({baseURL:"http://localhost:4242",withCredentials:!0,headers:{"Content-Type":"application/json"}});f.interceptors.request.use(async a=>{let b=e.j.currentUser;if(b){let c=await b.getIdToken();a.headers.Authorization=`Bearer ${c}`}return a},a=>Promise.reject(a));let g=d.A.create({baseURL:"http://localhost:4242",withCredentials:!0,headers:{"Content-Type":"application/json"}})},77345:(a,b,c)=>{c.d(b,{Nq:()=>g,mH:()=>f,mg:()=>e,vx:()=>h});var d=c(65290);let e=async a=>d.B.post("/auth/login",{},{headers:{Authorization:`Bearer ${a}`}}),f=async(a,b,c,e)=>d.B.post("/auth/register",{role:a,phone:c,name:e},{headers:{Authorization:`Bearer ${b}`}}),g=async()=>d.x.get("/auth/me"),h=async()=>d.x.post("/auth/logout")},81844:(a,b,c)=>{c.d(b,{$H:()=>h,HW:()=>g,TK:()=>f,op:()=>i,wz:()=>e});var d=c(65290);let e=async a=>(await d.x.get(`/user/${a}`)).data,f=async(a,b)=>(await d.x.put(`/user/${a}`,b)).data,g=async()=>(await d.x.get("/auth/me")).data,h=async(a,b)=>(await d.x.put(`/user/${a}/online-status`,{isOnline:b})).data,i=async a=>(await d.x.get(`/user/${a}/balance`)).data},82566:(a,b,c)=>{c.d(b,{j:()=>g});var d=c(67989),e=c(61448);let f=(0,d.Wp)({apiKey:"AIzaSyDiclg8XNo2L1hDBoaSoHmFMBggUKYjHH4",authDomain:"pickom-mvp.firebaseapp.com",projectId:"pickom-mvp",storageBucket:"pickom-mvp.firebasestorage.app",messagingSenderId:"168767828055",appId:"1:168767828055:web:2853961b44970c114ab312"}),g=(0,e.xI)(f)},99831:(a,b,c)=>{c.d(b,{IT:()=>h,S1:()=>l,TS:()=>o,XE:()=>i,confirmRecipient:()=>m,createDeliveryRequest:()=>f,qM:()=>k,rg:()=>n,updateDeliveryRequest:()=>j,vd:()=>e,zW:()=>g});var d=c(65290);let e=async()=>d.B.get("/delivery/pickers"),f=async a=>d.x.post("/delivery/requests",a),g=async()=>d.x.get("/delivery/requests"),h=async a=>d.x.get(`/delivery/requests/${a}`),i=async(a,b)=>d.x.put(`/delivery/requests/${a}/status`,{status:b}),j=async(a,b)=>d.x.patch(`/delivery/requests/${a}`,b),k=async()=>d.x.get("/delivery/completed"),l=async()=>d.x.get("/delivery/cancelled"),m=async(a,b)=>d.x.put(`/delivery/requests/${a}/confirm-recipient`,{confirmed:b}),n=async a=>d.x.post("/delivery/find-receiver",{email:a}),o=async()=>d.x.get("/delivery/incoming")}};