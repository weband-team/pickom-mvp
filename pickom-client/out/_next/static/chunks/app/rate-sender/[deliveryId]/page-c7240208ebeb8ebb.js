(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6085],{11190:(e,t,l)=>{Promise.resolve().then(l.bind(l,47649))},47649:(e,t,l)=>{"use strict";l.d(t,{default:()=>k});var a=l(95155),i=l(12115),n=l(54581),r=l(14426),s=l(92302),d=l(3127),o=l(71116),u=l(41218),c=l(16632),h=l(42663),x=l(1154),f=l(78449),m=l(68534),g=l(38464),v=l(68558),b=l(7304),j=l(35695),y=l(43452),p=l(97704),S=l(21787),C=l(6864),w=l(18986);function k(e){var t;let{params:l}=e,k=(0,i.use)(l),I=(0,j.useRouter)(),[A,z]=(0,i.useState)(null),[R,W]=(0,i.useState)(!0),[_,F]=(0,i.useState)(""),[N,E]=(0,i.useState)(!1),[H,M]=(0,i.useState)(5),[O,P]=(0,i.useState)("");(0,i.useEffect)(()=>{(async()=>{W(!0),F("");try{let e=(await (0,S.IT)(Number(k.deliveryId))).data;if(!e.senderId)return void F("Sender information not found");let t=await (0,C.wz)(e.senderId);z(t.user)}catch(e){F("Failed to load sender information")}finally{W(!1)}})()},[k.deliveryId]);let U=async()=>{if(A&&0!==H){E(!0);try{await (0,w.GS)({deliveryId:Number(k.deliveryId),toUserId:A.uid,rating:H,comment:O||void 0}),alert("Rating submitted successfully!"),I.push("/available-deliveries")}catch(l){var e,t;(null==(t=l.response)||null==(e=t.data)?void 0:e.message)?alert(l.response.data.message):alert("Failed to submit rating. Please try again.")}finally{E(!1)}}};return R?(0,a.jsx)(n.default,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"background.default"},children:(0,a.jsx)(r.default,{})}):_?(0,a.jsx)(n.default,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"background.default",p:2},children:(0,a.jsx)(s.A,{severity:"error",sx:{maxWidth:375},children:_})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.MobileContainer,{showFrame:!1,children:(0,a.jsxs)(n.default,{sx:{display:"flex",flexDirection:"column",height:"100vh",backgroundColor:"background.default"},children:[(0,a.jsxs)(n.default,{sx:{display:"flex",alignItems:"center",gap:1,p:2,borderBottom:1,borderColor:"divider"},children:[(0,a.jsx)(d.A,{onClick:()=>I.push("/available-deliveries"),size:"small",children:(0,a.jsx)(g.A,{})}),(0,a.jsx)(o.default,{variant:"h6",sx:{fontWeight:600},children:"Rate Sender"})]}),(0,a.jsxs)(n.default,{sx:{p:3,flex:1,overflow:"auto"},children:[(0,a.jsx)(u.A,{sx:{mb:3},children:(0,a.jsxs)(c.A,{sx:{textAlign:"center"},children:[(0,a.jsx)(h.default,{src:null==A?void 0:A.avatarUrl,sx:{width:80,height:80,mx:"auto",mb:2,bgcolor:"secondary.main",fontSize:32},children:null==A||null==(t=A.name)?void 0:t[0]}),(0,a.jsx)(o.default,{variant:"h6",sx:{fontWeight:600,mb:.5},children:null==A?void 0:A.name}),(0,a.jsx)(o.default,{variant:"body2",color:"text.secondary",children:"How was your experience with this sender?"})]})}),(0,a.jsxs)(n.default,{sx:{mb:3,textAlign:"center"},children:[(0,a.jsx)(o.default,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Rating"}),(0,a.jsx)(x.A,{value:H,onChange:(e,t)=>M(t||0),size:"large",icon:(0,a.jsx)(v.default,{fontSize:"inherit"}),emptyIcon:(0,a.jsx)(b.A,{fontSize:"inherit"}),sx:{fontSize:48,"& .MuiRating-iconFilled":{color:"primary.main"}}})]}),(0,a.jsx)(f.default,{label:"Comment (optional)",multiline:!0,rows:4,fullWidth:!0,value:O,onChange:e=>P(e.target.value),placeholder:"Share your experience...",sx:{mb:3}}),(0,a.jsx)(m.A,{variant:"contained",fullWidth:!0,size:"large",onClick:U,disabled:N||0===H,children:N?"Submitting...":"Submit Rating"})]})]})}),(0,a.jsx)(p.default,{})]})}}},e=>{e.O(0,[3965,7225,3964,8202,6592,8534,7844,5207,8449,1986,5394,3030,8441,5964,7358],()=>e(e.s=11190)),_N_E=e.O()}]);