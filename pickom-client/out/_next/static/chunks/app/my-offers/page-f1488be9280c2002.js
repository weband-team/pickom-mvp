(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[299,8780],{5687:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=r(14810).A},9362:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var a=r(95155),i=r(12115),s=r(54581),o=r(71116),n=r(70541),l=r(18096),c=r(14426),d=r(92302),u=r(41218),h=r(52596),f=r(17472),p=r(75955),x=r(40680),g=r(10186),v=r(55170),y=r(90870);function m(e){return(0,y.Ay)("MuiCardActionArea",e)}let b=(0,v.A)("MuiCardActionArea",["root","focusVisible","focusHighlight"]);var j=r(25466),A=r(47798);let w=(0,p.Ay)(j.A,{name:"MuiCardActionArea",slot:"Root"})((0,x.A)(e=>{let{theme:t}=e;return{display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",["&:hover .".concat(b.focusHighlight)]:{opacity:(t.vars||t).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},["&.".concat(b.focusVisible," .").concat(b.focusHighlight)]:{opacity:(t.vars||t).palette.action.focusOpacity}}})),C=(0,p.Ay)("span",{name:"MuiCardActionArea",slot:"FocusHighlight"})((0,x.A)(e=>{let{theme:t}=e;return{overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:t.transitions.create("opacity",{duration:t.transitions.duration.short})}})),k=i.forwardRef(function(e,t){let r=(0,g.b)({props:e,name:"MuiCardActionArea"}),{children:i,className:s,focusVisibleClassName:o,slots:n={},slotProps:l={},...c}=r,d=(e=>{let{classes:t}=e;return(0,f.A)({root:["root"],focusHighlight:["focusHighlight"]},m,t)})(r),u={slots:n,slotProps:l},[p,x]=(0,A.A)("root",{elementType:w,externalForwardedProps:{...u,...c},shouldForwardComponentProp:!0,ownerState:r,ref:t,className:(0,h.A)(d.root,s),additionalProps:{focusVisibleClassName:(0,h.A)(o,d.focusVisible)}}),[v,y]=(0,A.A)("focusHighlight",{elementType:C,externalForwardedProps:u,ownerState:r,ref:t,className:d.focusHighlight});return(0,a.jsxs)(p,{...x,children:[i,(0,a.jsx)(v,{...y})]})});var S=r(16632),I=r(41101),W=r(57773),z=r(52836),T=r(63645);let M=(0,r(31418).A)((0,a.jsx)("path",{d:"m16 18 2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z"}),"TrendingDown");var R=r(20250),P=r(35695),L=r(43452),F=r(97704),H=r(78780),D=r(21787);function B(){let e=(0,P.useRouter)(),[t,r]=(0,i.useState)([]),[h,f]=(0,i.useState)(!0),[p,x]=(0,i.useState)(""),[g,v]=(0,i.useState)("all");(0,i.useEffect)(()=>{(async()=>{f(!0),x("");try{let e=(await (0,H.aT)()).data,t=await Promise.all(e.map(async e=>{try{var t,r,a,i;let s=await (0,D.IT)(e.deliveryId);return{...e,delivery:{id:s.data.id,fromAddress:null==(t=s.data.fromLocation)?void 0:t.address,fromCity:null==(r=s.data.fromLocation)?void 0:r.city,toAddress:null==(a=s.data.toLocation)?void 0:a.address,toCity:null==(i=s.data.toLocation)?void 0:i.city,deliveryType:s.data.deliveryType,price:s.data.price,status:s.data.status}}}catch(t){return e}}));r(t)}catch(e){x("Failed to load your offers. Please try again.")}finally{f(!1)}})()},[]);let y=(0,i.useMemo)(()=>"all"===g?t:t.filter(e=>e.status===g),[t,g]),m=(0,i.useMemo)(()=>({all:t.length,pending:t.filter(e=>"pending"===e.status).length,accepted:t.filter(e=>"accepted"===e.status).length,rejected:t.filter(e=>"rejected"===e.status).length}),[t]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.MobileContainer,{showFrame:!1,children:(0,a.jsxs)(s.default,{sx:{display:"flex",flexDirection:"column",height:"100vh",backgroundColor:"background.default"},children:[(0,a.jsxs)(s.default,{sx:{display:"flex",alignItems:"center",gap:1,p:2,borderBottom:1,borderColor:"divider"},children:[(0,a.jsx)(W.A,{sx:{color:"primary.main",fontSize:28}}),(0,a.jsx)(o.default,{variant:"h5",sx:{fontWeight:600,flex:1},children:"My Offers"})]}),(0,a.jsxs)(n.A,{value:g,onChange:(e,t)=>{v(t)},variant:"fullWidth",sx:{borderBottom:1,borderColor:"divider",minHeight:48,"& .MuiTab-root":{minHeight:48,fontSize:"0.875rem",fontWeight:500,textTransform:"none"}},children:[(0,a.jsx)(l.A,{label:"All (".concat(m.all,")"),value:"all"}),(0,a.jsx)(l.A,{label:"Pending (".concat(m.pending,")"),value:"pending"}),(0,a.jsx)(l.A,{label:"Accepted (".concat(m.accepted,")"),value:"accepted"}),(0,a.jsx)(l.A,{label:"Rejected (".concat(m.rejected,")"),value:"rejected"})]}),(0,a.jsx)(s.default,{sx:{flex:1,overflow:"auto",pb:8},children:h?(0,a.jsx)(s.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:(0,a.jsx)(c.default,{})}):p?(0,a.jsx)(s.default,{sx:{p:3},children:(0,a.jsx)(d.A,{severity:"error",children:p})}):0===y.length?(()=>{let e={all:{icon:"\uD83D\uDCED",title:"No offers yet",description:"Browse available deliveries and make your first offer!"},pending:{icon:"⏳",title:"No pending offers",description:"All your offers have been reviewed."},accepted:{icon:"✅",title:"No accepted offers",description:"Accepted offers will appear here. Start delivering!"},rejected:{icon:"❌",title:"No rejected offers",description:"Keep making offers on new deliveries!"}}[g];return(0,a.jsxs)(s.default,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",py:8,px:3},children:[(0,a.jsx)(o.default,{sx:{fontSize:"4rem",mb:2},children:e.icon}),(0,a.jsx)(o.default,{variant:"h6",sx:{fontWeight:600,mb:1,textAlign:"center"},children:e.title}),(0,a.jsx)(o.default,{variant:"body2",color:"text.secondary",sx:{textAlign:"center"},children:e.description})]})})():(0,a.jsx)(s.default,{sx:{p:2},children:y.map(t=>{var r;let i=t.delivery?t.price-t.delivery.price:0,n=t.delivery?(i/t.delivery.price*100).toFixed(0):"0";return(0,a.jsx)(u.A,{sx:{mb:2,border:2,borderColor:"accepted"===t.status?"success.main":"rejected"===t.status?"error.light":"divider",opacity:"rejected"===t.status?.7:1},children:(0,a.jsx)(k,{onClick:()=>{t.status,e.push("/delivery-details/".concat(t.deliveryId))},children:(0,a.jsxs)(S.A,{children:[(0,a.jsxs)(s.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,flexWrap:"wrap",gap:1},children:[(0,a.jsxs)(s.default,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,a.jsx)(I.A,{label:(e=>{switch(e){case"pending":return"Pending";case"accepted":return"Accepted";case"rejected":return"Rejected";default:return e}})(t.status),size:"small",color:(e=>{switch(e){case"pending":return"warning";case"accepted":return"success";case"rejected":return"error";default:return"default"}})(t.status),sx:{fontWeight:600}}),(null==(r=t.delivery)?void 0:r.deliveryType)==="inter-city"&&(0,a.jsx)(I.A,{label:"Inter-City",size:"small",color:"info",sx:{fontWeight:600,fontSize:"0.7rem"}})]}),(0,a.jsx)(o.default,{variant:"caption",color:"text.secondary",children:new Date(t.createdAt).toLocaleDateString()})]}),t.delivery&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.default,{variant:"subtitle2",sx:{fontWeight:600,mb:1},children:["Delivery #",t.deliveryId]}),(0,a.jsxs)(s.default,{sx:{display:"flex",alignItems:"flex-start",gap:1,mb:1},children:[(0,a.jsx)(z.A,{sx:{fontSize:16,color:"text.secondary",mt:.25}}),(0,a.jsxs)(o.default,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.85rem"},children:[t.delivery.fromAddress," → ",t.delivery.toAddress]})]}),(0,a.jsxs)(s.default,{sx:{mt:2,pt:2,borderTop:1,borderColor:"divider",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,a.jsxs)(s.default,{children:[(0,a.jsx)(o.default,{variant:"caption",color:"text.secondary",children:"My offer"}),(0,a.jsxs)(s.default,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,a.jsx)(T.A,{sx:{fontSize:18,color:"primary.main"}}),(0,a.jsxs)(o.default,{variant:"h6",sx:{color:"primary.main",fontWeight:"bold"},children:[t.price," zł"]})]})]}),(0,a.jsxs)(s.default,{sx:{textAlign:"right"},children:[(0,a.jsx)(o.default,{variant:"caption",color:"text.secondary",children:"Listed price"}),(0,a.jsxs)(o.default,{variant:"body2",sx:{fontWeight:500},children:[t.delivery.price," zł"]})]}),0!==i&&(0,a.jsx)(I.A,{icon:i<0?(0,a.jsx)(M,{sx:{fontSize:14}}):(0,a.jsx)(R.A,{sx:{fontSize:14}}),label:"".concat(i>0?"+":"").concat(n,"%"),size:"small",color:i<0?"success":"warning",sx:{height:24,fontSize:"0.7rem"}})]})]}),t.message&&(0,a.jsx)(s.default,{sx:{mt:2,p:1,borderRadius:1,backgroundColor:"action.hover"},children:(0,a.jsxs)(o.default,{variant:"caption",color:"text.secondary",sx:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:["\uD83D\uDCAC ",t.message]})})]})})},t.id)})})})]})}),(0,a.jsx)(F.default,{})]})}},9700:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=r(22550).A},14140:(e,t,r)=>{"use strict";r.d(t,{j:()=>o});var a=r(23915),i=r(45404);let s=(0,a.Wp)({apiKey:"AIzaSyDiclg8XNo2L1hDBoaSoHmFMBggUKYjHH4",authDomain:"pickom-mvp.firebaseapp.com",projectId:"pickom-mvp",storageBucket:"pickom-mvp.firebasestorage.app",messagingSenderId:"168767828055",appId:"1:168767828055:web:2853961b44970c114ab312"}),o=(0,i.xI)(s)},14810:(e,t,r)=>{"use strict";function a(e){return e&&e.ownerDocument||document}r.d(t,{A:()=>a})},20250:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(31418),i=r(95155);let s=(0,a.A)((0,i.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp")},21329:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=r(43430).A},21787:(e,t,r)=>{"use strict";r.d(t,{IT:()=>n,S1:()=>u,TS:()=>p,XE:()=>l,confirmRecipient:()=>h,createDeliveryRequest:()=>s,qM:()=>d,rg:()=>f,updateDeliveryRequest:()=>c,vd:()=>i,zW:()=>o});var a=r(51070);let i=async()=>a.Bb.get("/delivery/pickers"),s=async e=>a.xh.post("/delivery/requests",e),o=async()=>a.xh.get("/delivery/requests"),n=async e=>a.xh.get("/delivery/requests/".concat(e)),l=async(e,t)=>a.xh.put("/delivery/requests/".concat(e,"/status"),{status:t}),c=async(e,t)=>a.xh.patch("/delivery/requests/".concat(e),t),d=async()=>a.xh.get("/delivery/completed"),u=async()=>a.xh.get("/delivery/cancelled"),h=async(e,t)=>a.xh.put("/delivery/requests/".concat(e,"/confirm-recipient"),{confirmed:t}),f=async e=>a.xh.post("/delivery/find-receiver",{email:e}),p=async()=>a.xh.get("/delivery/incoming")},22550:(e,t,r)=>{"use strict";function a(e,t=166){let r;function i(...a){clearTimeout(r),r=setTimeout(()=>{e.apply(this,a)},t)}return i.clear=()=>{clearTimeout(r)},i}r.d(t,{A:()=>a})},31178:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(14810);function i(e){return(0,a.A)(e).defaultView||window}},32299:(e,t,r)=>{"use strict";r.d(t,{A:()=>n,I:()=>o});var a=r(12115),i=r(95155);let s=a.createContext(),o=()=>{let e=a.useContext(s);return null!=e&&e},n=function(e){let{value:t,...r}=e;return(0,i.jsx)(s.Provider,{value:null==t||t,...r})}},34742:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=r(31178).A},43452:(e,t,r)=>{"use strict";r.d(t,{MobileContainer:()=>n});var a=r(95155);r(12115);var i=r(54581),s=r(18407),o=r(35695);let n=e=>{let{children:t,width:r=375,height:n=812,showFrame:l=!0,backgroundColor:c,showBottomNav:d=!0}=e,u=(0,o.usePathname)(),h=(null==u?void 0:u.includes("/login"))||(null==u?void 0:u.includes("/register")),f=d&&!h;return l?(0,a.jsx)(i.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",padding:3,backgroundColor:"#f5f5f5"},children:(0,a.jsx)(s.A,{elevation:3,sx:{width:r,height:f?"calc(".concat(n,"px - 70px)"):n,borderRadius:6,overflow:"hidden",position:"relative",bgcolor:c||"background.default",border:"8px solid #000000","&::before":{content:'""',position:"absolute",top:12,left:"50%",transform:"translateX(-50%)",width:134,height:6,backgroundColor:"#000000",borderRadius:3,zIndex:1},"&::after":{content:'""',position:"absolute",bottom:8,left:"50%",transform:"translateX(-50%)",width:134,height:5,backgroundColor:"#000000",borderRadius:2.5,zIndex:1}},children:(0,a.jsx)(i.default,{"data-mobile-container":!0,sx:{width:"100%",height:"100%",paddingTop:"calc(24px + var(--safe-area-top))",overflow:"auto",position:"relative","&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"},children:(0,a.jsx)(i.default,{sx:{paddingBottom:"calc(16px + var(--safe-area-bottom))",minHeight:"100%"},children:t})})})}):(0,a.jsx)(i.default,{"data-mobile-container":!0,sx:{width:"100vw",height:"100vh",bgcolor:c||"background.default",overflow:"hidden",position:"fixed",left:0,right:0,bottom:0,pt:"env(safe-area-inset-top)",pb:f?"68px":0,margin:0,"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"},children:(0,a.jsx)(i.default,{sx:{width:"100%",height:"100%",overflow:"auto",margin:0,padding:0,"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"},children:t})})}},50422:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(81616),i=r(62412),s=r(56501),o=r(89602);let n=function(e){var t;let{elementType:r,externalSlotProps:n,ownerState:l,skipResolvingSlotProps:c=!1,...d}=e,u=c?{}:(0,o.A)(n,l),{props:h,internalRef:f}=(0,s.A)({...d,externalSlotProps:u}),p=(0,a.A)(f,null==u?void 0:u.ref,null==(t=e.additionalProps)?void 0:t.ref);return(0,i.A)(r,{...h,ref:p},l)}},51070:(e,t,r)=>{"use strict";r.d(t,{Bb:()=>n,H$:()=>s,xh:()=>o,y3:()=>l});var a=r(23464),i=r(14140);let s=r(6267).Ii.isNativePlatform()?"http://10.0.2.2:4242":"http://localhost:4242",o=a.A.create({baseURL:s,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(async e=>{let t=i.j.currentUser;if(t)try{let r=await t.getIdToken();e.headers.Authorization="Bearer ".concat(r)}catch(e){}return e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>Promise.reject(e));let n=a.A.create({baseURL:s,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});async function l(){try{return await a.A.get("".concat(s,"/api"),{timeout:5e3}),!0}catch(e){return!1}}n.interceptors.response.use(e=>e,e=>Promise.reject(e))},52836:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(31418),i=r(95155);let s=(0,a.A)((0,i.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn")},57773:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(31418),i=r(95155);let s=(0,a.A)((0,i.jsx)("path",{d:"m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58s1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41s-.23-1.06-.59-1.42M5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7"}),"LocalOffer")},63645:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(31418),i=r(95155);let s=(0,a.A)((0,i.jsx)("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoney")},78780:(e,t,r)=>{"use strict";r.d(t,{F8:()=>s,aT:()=>n,createOffer:()=>i,i6:()=>o});var a=r(51070);let i=async e=>a.xh.post("/offers",e),s=async e=>a.xh.get("/offers/delivery/".concat(e)),o=async(e,t)=>a.xh.patch("/offers/".concat(e),t),n=async()=>a.xh.get("/offers/my")},79573:(e,t,r)=>{Promise.resolve().then(r.bind(r,9362))},97704:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r(95155),i=r(12115),s=r(35695),o=r(18407),n=r(40541),l=r(9111),c=r(26564),d=r(11335),u=r(21888),h=r(43290),f=r(60807);let p=e=>e>99?"99+":e,x=(0,i.memo)(function(){let{className:e,unreadChatsCount:t=0,activeOrdersCount:r=0,unreadNotificationsCount:x=0,userRole:g}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=(0,s.useRouter)(),y=(0,s.usePathname)(),[m,b]=(0,i.useState)(()=>localStorage.getItem("userRole"));(0,i.useEffect)(()=>{if(!g){let e=null;y.startsWith("/available-deliveries")?e="picker":y.startsWith("/delivery-methods")&&(e="sender"),e&&e!==m&&(b(e),localStorage.setItem("userRole",e))}},[y,g,m]);let j=g||m,A=(0,i.useMemo)(()=>y.startsWith("/delivery-methods")||y.startsWith("/orders")||y.startsWith("/available-deliveries")?0:y.startsWith("/chat")?1:y.startsWith("/notifications")?2:3*!!y.startsWith("/profile"),[y]),[w,C]=(0,i.useState)(A),k=(0,i.useCallback)((e,t)=>{switch(C(t),t){case 0:"picker"===j?v.push("/available-deliveries"):v.push("/delivery-methods");break;case 1:v.push("/chats");break;case 2:v.push("/notifications");break;case 3:v.push("/profile")}},[v,j]);return(0,a.jsx)(o.A,{className:e,sx:{position:"fixed",bottom:0,left:0,right:0,width:"100vw",zIndex:1200,paddingBottom:"env(safe-area-inset-bottom)",paddingLeft:0,paddingRight:0,backgroundColor:"background.paper",borderTop:1,borderColor:"divider",borderRadius:0,boxShadow:"0px -2px 4px rgba(0, 0, 0, 0.1)"},elevation:0,children:(0,a.jsxs)(n.A,{value:w,onChange:k,sx:{backgroundColor:"background.paper",width:"100%",height:"68px",paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)"},children:[(0,a.jsx)(l.A,{label:"Orders",icon:(0,a.jsx)(c.default,{badgeContent:p(r),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,a.jsx)(d.default,{})})}),(0,a.jsx)(l.A,{label:"Chat",icon:(0,a.jsx)(c.default,{badgeContent:p(t),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,a.jsx)(u.A,{})})}),(0,a.jsx)(l.A,{label:"Notifications",icon:(0,a.jsx)(c.default,{badgeContent:p(x),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,a.jsx)(h.A,{})})}),(0,a.jsx)(l.A,{label:"Profile",icon:(0,a.jsx)(f.default,{})})]})})})}},e=>{e.O(0,[3965,7225,9313,1623,3806,1101,1190,5394,8441,5964,7358],()=>e(e.s=79573)),_N_E=e.O()}]);