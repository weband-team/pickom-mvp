(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[226],{15466:(e,t,a)=>{Promise.resolve().then(a.bind(a,77274))},21717:(e,t,a)=>{"use strict";a.d(t,{n:()=>r});var i=a(51070);let r={getUserNotifications:async()=>(await i.xh.get("/notifications")).data,getUnreadCount:async()=>(await i.xh.get("/notifications/unread-count")).data.count,markAsRead:async e=>(await i.xh.patch("/notifications/".concat(e,"/read"))).data,markAllAsRead:async()=>{await i.xh.patch("/notifications/mark-all-read")},notifyOfferReceived:async e=>(await i.xh.post("/notifications/offer-received",e)).data,notifyOfferAccepted:async e=>(await i.xh.post("/notifications/offer-accepted",e)).data,notifyIncomingDelivery:async e=>(await i.xh.post("/notifications/incoming-delivery",e)).data,notifyStatusUpdate:async e=>(await i.xh.post("/notifications/status-update",e)).data,createNotification:async e=>(await i.xh.post("/notifications/create",e)).data}},21787:(e,t,a)=>{"use strict";a.d(t,{IT:()=>s,S1:()=>u,TS:()=>y,XE:()=>l,confirmRecipient:()=>h,createDeliveryRequest:()=>n,qM:()=>d,rg:()=>f,updateDeliveryRequest:()=>c,vd:()=>r,zW:()=>o});var i=a(51070);let r=async()=>i.Bb.get("/delivery/pickers"),n=async e=>i.xh.post("/delivery/requests",e),o=async()=>i.xh.get("/delivery/requests"),s=async e=>i.xh.get("/delivery/requests/".concat(e)),l=async(e,t)=>i.xh.put("/delivery/requests/".concat(e,"/status"),{status:t}),c=async(e,t)=>i.xh.patch("/delivery/requests/".concat(e),t),d=async()=>i.xh.get("/delivery/completed"),u=async()=>i.xh.get("/delivery/cancelled"),h=async(e,t)=>i.xh.put("/delivery/requests/".concat(e,"/confirm-recipient"),{confirmed:t}),f=async e=>i.xh.post("/delivery/find-receiver",{email:e}),y=async()=>i.xh.get("/delivery/incoming")},28307:(e,t,a)=>{"use strict";a.d(t,{H:()=>o});var i=a(95155),r=a(42663),n=a(35695);function o(e){let{name:t,avatarUrl:a,sx:o}=e,s=(0,n.useRouter)();return(0,i.jsx)(r.default,{src:a,sx:{width:40,height:40,cursor:"pointer","&:hover":{transform:"scale(1.05)",opacity:.8,boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},...o},onClick:()=>s.push("/profile"),children:t[0]})}},77274:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>M});var i=a(95155),r=a(12115),n=a(54581),o=a(72705),s=a(3127),l=a(71116),c=a(92302),d=a(38464),u=a(58343),h=a(50276),f=a(28307),y=a(97704),m=a(98226);let p=["Adam","Bartosz","Dawid","Filip","Grzegorz","Jakub","Jan","Kamil","Krzysztof","Łukasz","Maciej","Marcin","Mateusz","Michał","Paweł","Piotr","Przemysław","Rafał","Robert","Szymon","Tomasz","Wojciech","Zbigniew","Anna","Agnieszka","Aleksandra","Barbara","Beata","Ewa","Joanna","Justyna","Katarzyna","Magdalena","Małgorzata","Maria","Monika","Natalia","Sylwia"],x=["Nowak","Kowalski","Wiśniewski","W\xf3jcik","Kowalczyk","Kamiński","Lewandowski","Zieliński","Szymański","Woźniak","Dąbrowski","Kozłowski","Jankowski","Mazur","Kwiatkowski","Krawczyk","Piotrowski","Grabowski","Nowakowski","Pawłowski","Michalski","Nowicki","Adamczyk","Dudek","Zając","Wieczorek","Jabłoński","Kr\xf3l","Majewski","Olszewski","Jaworski","Malinowski"],v=["car","bike","scooter","walking"];function k(e){return e[Math.floor(Math.random()*e.length)]}Array.from({length:50},(e,t)=>(function(e){let t=k(p),a=k(x),i=Math.floor(100*Math.random())+1,r=Math.floor(20*Math.random())+10,n=Math.floor(45*Math.random())+15,o=Math.floor(500*Math.random())+10;return{id:"picker-".concat(e),fullName:"".concat(t," ").concat(a),email:"".concat(t.toLowerCase(),".").concat(a.toLowerCase(),"@example.com"),age:Math.floor(30*Math.random())+20,country:"Poland",city:"Warsaw",phoneNumber:"+48".concat(Math.floor(9e8*Math.random())+1e8),userType:m.u.PICKER,avatarUrl:void 0,description:k(["Experienced delivery professional","Quick and reliable service","Friendly neighborhood courier","Professional package handler","Fast and careful delivery","Trusted local delivery partner"]),rating:Math.round((2*Math.random()+3)*10)/10,trustLevel:i,price:r,duration:n,reviewCount:Math.floor(200*Math.random())+5,isOnline:Math.random()>.2,isVerified:i>60,isPhoneVerified:Math.random()>.3,isEmailVerified:Math.random()>.4,distance:Math.round((5*Math.random()+.5)*10)/10,vehicle:k(v),completedDeliveries:o,deliveryCount:o}})(t+1));var g=a(21787),w=a(21717),b=a(6864),j=a(35695);function M(){let e=(0,j.useRouter)(),[t,a]=(0,r.useState)([]),[p,x]=(0,r.useState)([]),[v,k]=(0,r.useState)([]),[M,C]=(0,r.useState)(0),[z,N]=(0,r.useState)(!0),[I,S]=(0,r.useState)(""),[A,T]=(0,r.useState)(!0),[E,P]=(0,r.useState)(!1),[D,R]=(0,r.useState)(!1),[L,_]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{N(!0),S("");try{let e=(await (0,g.vd)()).data.map(e=>({id:e.uid,fullName:e.name,email:e.email,age:0,country:"",city:"",phoneNumber:e.phone||"",isVerified:!0,avatarUrl:e.avatarUrl||"",description:"",userType:m.u.PICKER,rating:Number(e.rating)||0,trustLevel:20*(Number(e.rating)||0),price:Number(e.price)||15,duration:Math.floor(60*Math.random())+10,reviewCount:e.totalRatings||0,isOnline:e.isOnline||!1,isPhoneVerified:!!e.phone,isEmailVerified:!0,distance:Math.floor(20*Math.random())+1,vehicle:"car",completedDeliveries:0,deliveryCount:0}));k(e),x(e);let t=e.slice(0,10);a(t),T(e.length>10)}catch(e){S("Failed to load pickers. Please try again.")}finally{N(!1)}})()},[]),(0,r.useEffect)(()=>{if(p.length>0){N(!0);let e=setTimeout(()=>{a(p.slice(0,10)),C(0),T(p.length>10),N(!1)},500);return()=>clearTimeout(e)}},[p]);let K=(0,r.useCallback)(e=>{let t;x((t=[...v],e.maxPrice&&(t=t.filter(t=>t.price<=e.maxPrice)),e.maxDuration&&(t=t.filter(t=>t.duration<=e.maxDuration)),e.minTrustLevel&&(t=t.filter(t=>t.trustLevel>=e.minTrustLevel)),e.sortBy&&t.sort((t,a)=>{let i,r;switch(e.sortBy){case"price":i=t.price,r=a.price;break;case"duration":i=t.duration,r=a.duration;break;case"trust":i=t.trustLevel,r=a.trustLevel;break;case"rating":i=t.rating,r=a.rating;break;case"distance":i=t.distance,r=a.distance;break;default:return 0}return"desc"===e.sortOrder?r-i:i-r}),t))},[v]),O=(0,r.useCallback)(()=>{if(!z&&A)return N(!0),setTimeout(()=>{let e=M+1,t=10*e,i=t+10,r=p.slice(t,i);r.length>0?(a(e=>[...e,...r]),C(e),T(i<p.length)):T(!1),N(!1)},600)},[M,p,z,A]);(0,r.useEffect)(()=>{let e=e=>{let t=e.target;t.scrollTop+t.clientHeight>=t.scrollHeight-100&&O()},t=document.querySelector("[data-mobile-container]");if(t)return t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)},[O]);let W=(0,r.useCallback)(e=>{localStorage.setItem("selectedPickerId",e),window.location.href="/chat/".concat(e)},[]),q=(0,r.useCallback)(async t=>{let a=localStorage.getItem("deliveryData");if(!a){S("Delivery information not found. Please start from the beginning."),setTimeout(()=>e.push("/delivery-methods"),2e3);return}let i=JSON.parse(a),r=i.deliveryId;if(!r){S("Delivery ID not found. Please start from the beginning."),setTimeout(()=>e.push("/delivery-methods"),2e3);return}let n=v.find(e=>e.id===t);if(!n)return void S("Picker not found");R(!0),S("");try{let{user:a}=await (0,b.HW)();try{await w.n.createNotification({user_id:t,title:"New Delivery Invitation",message:"".concat(a.name," invited you to deliver a package from ").concat(i.fromAddress||"pickup location"," to ").concat(i.toAddress||"delivery location",". Check the delivery details and make an offer if interested."),type:"new_delivery",read:!1,related_delivery_id:r})}catch(e){throw e}_("Invitation sent to ".concat(n.fullName,"! They will be notified and can make an offer.")),localStorage.setItem("selectedPickerId",t),setTimeout(()=>{e.push("/delivery-methods?tab=manage")},2e3)}catch(e){var o,s;S((null==(s=e.response)||null==(o=s.data)?void 0:o.message)||"Failed to send invitation. Please try again.")}finally{R(!1)}},[v,e]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.kc,{showFrame:!1,children:[(0,i.jsx)(f.H,{name:"Vadim",sx:{position:"absolute",top:16,right:16,zIndex:10}}),(0,i.jsx)(n.default,{sx:{p:2,borderBottom:1,borderColor:"divider",backgroundColor:"background.paper",position:"sticky",top:0,zIndex:100},children:(0,i.jsxs)(o.A,{direction:"row",alignItems:"center",spacing:2,children:[(0,i.jsx)(s.A,{onClick:()=>window.history.back(),size:"small",sx:{p:1},children:(0,i.jsx)(d.A,{})}),(0,i.jsxs)(n.default,{sx:{flex:1},children:[(0,i.jsx)(l.default,{variant:"h6",sx:{fontWeight:"bold"},children:"Available Pickers"}),(0,i.jsxs)(l.default,{variant:"caption",color:"text.secondary",children:["Found ",p.length," pickers in your area"]})]}),(0,i.jsx)(u.Lm,{variant:"icon",size:"small"})]})}),L&&(0,i.jsx)(n.default,{sx:{p:2},children:(0,i.jsx)(c.A,{severity:"success",children:L})}),I&&(0,i.jsx)(n.default,{sx:{p:2},children:(0,i.jsx)(c.A,{severity:"error",children:I})}),(0,i.jsxs)(n.default,{sx:{borderBottom:1,borderColor:"divider"},children:[(0,i.jsx)(n.default,{sx:{p:2},children:(0,i.jsx)(u.$n,{variant:E?"contained":"outlined",onClick:()=>P(!E),size:"small",fullWidth:!0,children:"Filters & Sorting"})}),E&&(0,i.jsx)(n.default,{sx:{p:2,borderTop:1,borderColor:"divider"},children:(0,i.jsx)(h.Ez,{onFiltersChange:K})})]}),(0,i.jsx)(n.default,{sx:{flex:1,overflow:"auto"},children:z&&0===t.length?(0,i.jsx)(n.default,{sx:{py:8},children:(0,i.jsx)(u.Ip,{type:"dots",text:"Loading pickers..."})}):0===t.length?(0,i.jsxs)(n.default,{sx:{textAlign:"center",py:8},children:[(0,i.jsx)(l.default,{variant:"h1",sx:{fontSize:"4rem",mb:2},children:"\uD83D\uDCE6"}),(0,i.jsx)(l.default,{variant:"h6",sx:{mb:1,fontWeight:"bold"},children:"No pickers found"}),(0,i.jsx)(l.default,{variant:"body2",color:"text.secondary",children:"Try adjusting your search filters"})]}):(0,i.jsxs)(n.default,{sx:{p:2},children:[(0,i.jsx)(o.A,{spacing:2,children:t.map(e=>(0,i.jsx)(h.Xg,{picker:e,onChat:W,onSelect:q},e.id))}),z&&t.length>0&&(0,i.jsx)(n.default,{sx:{py:4},children:(0,i.jsx)(u.Ip,{type:"dots",text:"Loading more pickers..."})}),A&&!z&&(0,i.jsx)(n.default,{sx:{py:2,textAlign:"center"},children:(0,i.jsx)(u.$n,{variant:"outlined",onClick:O,children:"Load More"})}),!A&&t.length>0&&(0,i.jsx)(n.default,{sx:{textAlign:"center",py:4},children:(0,i.jsxs)(l.default,{variant:"body2",color:"text.secondary",children:["All pickers loaded (",t.length," of ",p.length,")"]})})]})})]}),(0,i.jsx)(y.default,{})]})}},98226:(e,t,a)=>{"use strict";a.d(t,{u:()=>i,y:()=>r});var i=function(e){return e.SENDER="sender",e.PICKER="picker",e}({}),r=function(e){return e.WITHIN_CITY="within_city",e.INTER_CITY="inter_city",e.INTERNATIONAL="international",e.COMBINED="combined",e}({})}},e=>{e.O(0,[6084,3965,7225,9313,1623,3806,8534,1101,5207,8449,1190,9283,1986,7262,2649,7212,1530,2112,9087,8343,4597,9141,8441,5964,7358],()=>e(e.s=15466)),_N_E=e.O()}]);