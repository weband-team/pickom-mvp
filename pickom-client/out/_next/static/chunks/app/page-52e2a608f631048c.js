(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{14140:(e,r,a)=>{"use strict";a.d(r,{j:()=>l});var t=a(23915),s=a(45404);let i=(0,t.Wp)({apiKey:"AIzaSyDiclg8XNo2L1hDBoaSoHmFMBggUKYjHH4",authDomain:"pickom-mvp.firebaseapp.com",projectId:"pickom-mvp",storageBucket:"pickom-mvp.firebasestorage.app",messagingSenderId:"168767828055",appId:"1:168767828055:web:2853961b44970c114ab312"}),l=(0,s.xI)(i)},28069:(e,r,a)=>{"use strict";a.d(r,{Nq:()=>n,c4:()=>i,mH:()=>o,mg:()=>l,vx:()=>d});var t=a(51070),s=a(14140);let i=async()=>{let e=s.j.currentUser;return e?await e.getIdToken():null},l=async e=>t.Bb.post("/auth/login",{},{headers:{Authorization:"Bearer ".concat(e)}}),o=async(e,r,a,s)=>t.Bb.post("/auth/register",{role:e,phone:a,name:s},{headers:{Authorization:"Bearer ".concat(r)}}),n=async()=>t.xh.get("/auth/me"),d=async()=>t.xh.post("/auth/logout")},32181:(e,r,a)=>{Promise.resolve().then(a.bind(a,41057))},41057:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>f});var t=a(95155),s=a(12115),i=a(35695),l=a(54581),o=a(71116),n=a(92302),d=a(71803),c=a(58343),u=a(6874),m=a.n(u),h=a(41819),p=a(45404),g=a(14140),y=a(28069);function f(){let[e,r]=(0,s.useState)({email:"",password:""}),[a,u]=(0,s.useState)(!1),[f,x]=(0,s.useState)(""),[w,v]=(0,s.useState)({}),b=(0,i.useRouter)(),j=e=>a=>{let t=a.target.value;r(r=>({...r,[e]:t})),f&&x("");let s="email"===e?(0,h.DT)(t):(0,h.Oj)(t);s.isValid?v(r=>({...r,[e]:void 0})):v(r=>({...r,[e]:s.error}))},V=async()=>{let r=(0,h.DT)(e.email),a=(0,h.Oj)(e.password),t={};if(r.isValid||(t.email=r.error),a.isValid||(t.password=a.error),Object.keys(t).length>0)return void v(t);u(!0),x(""),v({});try{let r=await (0,p.x9)(g.j,e.email,e.password),a=await r.user.getIdToken(),t=await (0,y.mg)(a);"picker"===t.data.role?b.push("/available-deliveries"):b.push("/delivery-methods")}catch(r){let e="Invalid email or password. Please try again.";if(r&&"object"==typeof r&&"code"in r)"auth/invalid-credential"===r.code?e="Invalid email or password.":"auth/user-not-found"===r.code?e="No account found with this email.":"auth/wrong-password"===r.code?e="Incorrect password.":"auth/too-many-requests"===r.code&&(e="Too many failed attempts. Please try again later.");else{var s,i;(null==(i=r.response)||null==(s=i.data)?void 0:s.message)&&(e=r.response.data.message)}x(e)}finally{u(!1)}},P=e=>{"Enter"===e.key&&V()},k=e.email&&e.password&&!w.email&&!w.password;return(0,t.jsx)(l.default,{sx:{minHeight:"100vh",backgroundColor:"#ffffff",display:"flex",alignItems:"center",justifyContent:"center",p:2},children:(0,t.jsx)(c.kc,{showFrame:!1,children:(0,t.jsxs)(l.default,{sx:{p:3},children:[(0,t.jsxs)(l.default,{sx:{textAlign:"center",mb:4},children:[(0,t.jsx)(c.Lm,{variant:"full",size:"large"}),(0,t.jsx)(o.default,{variant:"h4",sx:{fontWeight:"bold",mt:2,mb:1},children:"Welcome to Pickom"}),(0,t.jsx)(o.default,{variant:"body1",color:"text.secondary",children:"People-Powered Delivery Platform"})]}),f&&(0,t.jsx)(n.A,{severity:"error",sx:{mb:3},children:f}),(0,t.jsxs)(d.A,{spacing:3,children:[(0,t.jsx)(c.ks,{label:"Email",type:"email",value:e.email,onChange:j("email"),onKeyPress:P,error:!!w.email,helperText:w.email,fullWidth:!0,required:!0,autoComplete:"email"}),(0,t.jsx)(c.ks,{label:"Password",type:"password",value:e.password,onChange:j("password"),onKeyPress:P,error:!!w.password,helperText:w.password,fullWidth:!0,required:!0,autoComplete:"current-password"}),(0,t.jsx)(c.$n,{onClick:V,disabled:!k||a,fullWidth:!0,size:"large",sx:{mt:2},children:a?"Signing in...":"Sign In"})]}),(0,t.jsx)(l.default,{sx:{my:3,textAlign:"center"},children:(0,t.jsx)(o.default,{variant:"body2",color:"text.secondary",children:"Don't have an account?"})}),(0,t.jsx)(m(),{href:"/user-type",passHref:!0,children:(0,t.jsx)(c.$n,{variant:"outlined",fullWidth:!0,size:"large",children:"Create New Account"})}),(0,t.jsx)(l.default,{sx:{mt:3,textAlign:"center"},children:(0,t.jsx)(o.default,{variant:"body2",color:"text.secondary",sx:{textDecoration:"underline",cursor:"pointer","&:hover":{color:"primary.main"}},onClick:()=>{alert("Forgot password feature coming soon!")},children:"Forgot your password?"})})]})})})}},41819:(e,r,a)=>{"use strict";a.d(r,{DT:()=>t,Gn:()=>i,Lo:()=>n,Oj:()=>s,Q7:()=>o,Tl:()=>l,Y$:()=>d,nY:()=>c});let t=e=>e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?{isValid:!0}:{isValid:!1,error:"Please enter a valid email address"}:{isValid:!1,error:"Email is required"},s=e=>{if(!e)return{isValid:!1,error:"Password is required"};if(e.length<8)return{isValid:!1,error:"Password must be at least 8 characters long"};let r=/[a-zA-Z]/.test(e),a=/\d/.test(e);return r&&a?{isValid:!0}:{isValid:!1,error:"Password must contain both letters and numbers"}},i=e=>!e||isNaN(e)?{isValid:!1,error:"Age is required"}:e<18?{isValid:!1,error:"You must be at least 18 years old"}:e>80?{isValid:!1,error:"Age must be 80 or less"}:{isValid:!0},l=e=>{if(!e)return{isValid:!1,error:"Full name is required"};let r=e.trim();return r.length<2?{isValid:!1,error:"Full name must be at least 2 characters long"}:r.length>50?{isValid:!1,error:"Full name must be 50 characters or less"}:{isValid:!0}},o=e=>e?/^\+[1-9]\d{1,3}\d{4,14}$/.test(e)?{isValid:!0}:{isValid:!1,error:"Please enter a valid international phone number (e.g., +1234567890)"}:{isValid:!0},n=e=>e?e.trim().length<2?{isValid:!1,error:"Please enter a valid country name"}:{isValid:!0}:{isValid:!1,error:"Country is required"},d=e=>e?e.trim().length<2?{isValid:!1,error:"Please enter a valid city name"}:{isValid:!0}:{isValid:!1,error:"City is required"},c=(e,r)=>r?e!==r?{isValid:!1,error:"Passwords do not match"}:{isValid:!0}:{isValid:!1,error:"Please confirm your password"}},51070:(e,r,a)=>{"use strict";a.d(r,{Bb:()=>d,xh:()=>n,y3:()=>c});var t=a(23464),s=a(14140),i=a(6267),l=a(87358);let o=i.Ii.isNativePlatform()?"https://pickom.qirelab.com":l.env.NEXT_PUBLIC_API_URL||"https://pickom.qirelab.com",n=t.A.create({baseURL:o,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(async e=>{let r=s.j.currentUser;if(r)try{let a=await r.getIdToken();e.headers.Authorization="Bearer ".concat(a)}catch(e){}return e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>Promise.reject(e));let d=t.A.create({baseURL:o,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});async function c(){try{return await t.A.get("".concat(o,"/api"),{timeout:5e3}),!0}catch(e){return!1}}d.interceptors.response.use(e=>e,e=>Promise.reject(e))}},e=>{e.O(0,[3965,7225,3964,8202,6592,8534,7844,1101,5207,8652,8449,1190,7615,1986,2649,7212,9473,8343,8441,5964,7358],()=>e(e.s=32181)),_N_E=e.O()}]);