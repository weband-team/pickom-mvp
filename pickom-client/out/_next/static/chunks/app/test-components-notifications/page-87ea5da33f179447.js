(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[755],{14140:(e,t,a)=>{"use strict";a.d(t,{j:()=>n});var i=a(23915),r=a(45404);let o=(0,i.Wp)({apiKey:"AIzaSyDiclg8XNo2L1hDBoaSoHmFMBggUKYjHH4",authDomain:"pickom-mvp.firebaseapp.com",projectId:"pickom-mvp",storageBucket:"pickom-mvp.firebasestorage.app",messagingSenderId:"168767828055",appId:"1:168767828055:web:2853961b44970c114ab312"}),n=(0,r.xI)(o)},21717:(e,t,a)=>{"use strict";a.d(t,{n:()=>r});var i=a(51070);let r={getUserNotifications:async()=>(await i.xh.get("/notifications")).data,getUnreadCount:async()=>(await i.xh.get("/notifications/unread-count")).data.count,markAsRead:async e=>(await i.xh.patch("/notifications/".concat(e,"/read"))).data,markAllAsRead:async()=>{await i.xh.patch("/notifications/mark-all-read")},notifyOfferReceived:async e=>(await i.xh.post("/notifications/offer-received",e)).data,notifyOfferAccepted:async e=>(await i.xh.post("/notifications/offer-accepted",e)).data,notifyIncomingDelivery:async e=>(await i.xh.post("/notifications/incoming-delivery",e)).data,notifyStatusUpdate:async e=>(await i.xh.post("/notifications/status-update",e)).data,createNotification:async e=>(await i.xh.post("/notifications/create",e)).data}},32963:(e,t,a)=>{"use strict";a.d(t,{default:()=>n});var i=a(95155),r=a(12115),o=a(71234);function n(){let{createOfferReceivedNotification:e,createOfferAcceptedNotification:t,createIncomingDeliveryNotification:a,createStatusUpdateNotification:n,createCustomNotification:s}=(0,o.E)(),[c,l]=(0,r.useState)(!1),d=async()=>{l(!0);try{await e({senderId:"X43wZP2lAdNA9GyhMxxRjd4rQPg1",deliveryId:1,pickerName:"Ivan Petrov",price:25})}catch(e){}finally{l(!1)}},u=async()=>{l(!0);try{await t({senderId:"X43wZP2lAdNA9GyhMxxRjd4rQPg1",deliveryId:1})}catch(e){}finally{l(!1)}},f=async()=>{l(!0);try{await a({recipientId:"X43wZP2lAdNA9GyhMxxRjd4rQPg1",deliveryId:2,senderName:"Anna Koval"})}catch(e){}finally{l(!1)}},h=async()=>{l(!0);try{await n({userId:"X43wZP2lAdNA9GyhMxxRjd4rQPg1",deliveryId:1,status:"picked_up",message:"The picker has collected your package and is heading to the recipient."})}catch(e){}finally{l(!1)}},p=async()=>{l(!0);try{await s({user_id:"X43wZP2lAdNA9GyhMxxRjd4rQPg1",title:"Special Offer",message:"We have a special offer for you!",type:"new_delivery",read:!1,related_delivery_id:3})}catch(e){}finally{l(!1)}};return(0,i.jsxs)("div",{className:"p-6 bg-white rounded-lg shadow-sm border",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notification Actions"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,i.jsx)("button",{onClick:d,disabled:c,className:"px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:'\uD83D\uDCBC Create "New Offer"'}),(0,i.jsx)("button",{onClick:u,disabled:c,className:"px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:'âœ… Create "Offer Accepted"'}),(0,i.jsx)("button",{onClick:f,disabled:c,className:"px-4 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:'\uD83D\uDCE5 Create "Incoming Delivery"'}),(0,i.jsx)("button",{onClick:h,disabled:c,className:"px-4 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:'\uD83D\uDCE6 Create "Status Update"'}),(0,i.jsx)("button",{onClick:p,disabled:c,className:"px-4 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed md:col-span-2 transition-colors",children:"\uD83D\uDD14 Create Custom Notification"})]}),c&&(0,i.jsxs)("div",{className:"mt-4 flex items-center justify-center",children:[(0,i.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),(0,i.jsx)("span",{className:"ml-2 text-gray-600",children:"Creating notification..."})]})]})}},43452:(e,t,a)=>{"use strict";a.d(t,{MobileContainer:()=>s});var i=a(95155);a(12115);var r=a(54581),o=a(18407),n=a(35695);let s=e=>{let{children:t,width:a=375,height:s=812,showFrame:c=!0,backgroundColor:l,showBottomNav:d=!0}=e,u=(0,n.usePathname)(),f=(null==u?void 0:u.includes("/login"))||(null==u?void 0:u.includes("/register")),h=d&&!f;return c?(0,i.jsx)(r.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",padding:3,backgroundColor:"#f5f5f5"},children:(0,i.jsx)(o.A,{elevation:3,sx:{width:a,height:h?"calc(".concat(s,"px - 70px)"):s,borderRadius:6,overflow:"hidden",position:"relative",bgcolor:l||"background.default",border:"8px solid #000000","&::before":{content:'""',position:"absolute",top:12,left:"50%",transform:"translateX(-50%)",width:134,height:6,backgroundColor:"#000000",borderRadius:3,zIndex:1},"&::after":{content:'""',position:"absolute",bottom:8,left:"50%",transform:"translateX(-50%)",width:134,height:5,backgroundColor:"#000000",borderRadius:2.5,zIndex:1}},children:(0,i.jsx)(r.default,{"data-mobile-container":!0,sx:{width:"100%",height:"100%",paddingTop:"calc(24px + var(--safe-area-top))",overflow:"auto",position:"relative","&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"},children:(0,i.jsx)(r.default,{sx:{paddingBottom:"calc(16px + var(--safe-area-bottom))",minHeight:"100%"},children:t})})})}):(0,i.jsx)(r.default,{"data-mobile-container":!0,sx:{width:"100vw",height:"100vh",bgcolor:l||"background.default",overflow:"hidden",position:"fixed",left:0,right:0,bottom:0,pt:"env(safe-area-inset-top)",pb:h?"68px":0,margin:0,"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"},children:(0,i.jsx)(r.default,{sx:{width:"100%",height:"100%",overflow:"auto",margin:0,padding:0,"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"},children:t})})}},51070:(e,t,a)=>{"use strict";a.d(t,{Bb:()=>l,xh:()=>c,y3:()=>d});var i=a(23464),r=a(14140),o=a(6267),n=a(87358);let s=o.Ii.isNativePlatform()?"https://pickom.qirelab.com":n.env.NEXT_PUBLIC_API_URL||"https://pickom.qirelab.com",c=i.A.create({baseURL:s,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});c.interceptors.request.use(async e=>{let t=r.j.currentUser;if(t)try{let a=await t.getIdToken();e.headers.Authorization="Bearer ".concat(a)}catch(e){}return e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e,e=>Promise.reject(e));let l=i.A.create({baseURL:s,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});async function d(){try{return await i.A.get("".concat(s,"/api"),{timeout:5e3}),!0}catch(e){return!1}}l.interceptors.response.use(e=>e,e=>Promise.reject(e))},71234:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var i=a(12115),r=a(21717),o=a(31530);let n=()=>{let[e,t]=(0,i.useState)([]),[a,n]=(0,i.useState)(0),[s,c]=(0,i.useState)(!0),[l,d]=(0,i.useState)(null),u=(0,i.useCallback)(async()=>{try{c(!0),d(null);let[e,a]=await Promise.all([r.n.getUserNotifications(),r.n.getUnreadCount()]);t(e),n(a)}catch(e){d(e instanceof Error?e.message:"Failed to load notifications")}finally{c(!1)}},[]),f=(0,i.useCallback)(async e=>{try{await r.n.markAsRead(e),t(t=>t.map(t=>t.id===e?{...t,read:!0}:t)),n(e=>Math.max(0,e-1))}catch(t){let e=t instanceof Error?t.message:"Failed to mark notification as read";o.default.error(e)}},[]),h=(0,i.useCallback)(async()=>{try{await r.n.markAllAsRead(),t(e=>e.map(e=>({...e,read:!0}))),n(0),o.default.success("All notifications marked as read")}catch(t){let e=t instanceof Error?t.message:"Failed to mark all as read";o.default.error(e)}},[]),p=(0,i.useCallback)(async e=>{try{let a=await r.n.notifyOfferReceived(e);return t(e=>[a,...e]),n(e=>e+1),o.default.success("Offer notification created"),a}catch(t){let e=t instanceof Error?t.message:"Failed to create notification";throw o.default.error(e),t}},[]),y=(0,i.useCallback)(async e=>{try{let a=await r.n.notifyOfferAccepted(e);return t(e=>[a,...e]),n(e=>e+1),o.default.success("Offer accepted notification created"),a}catch(t){let e=t instanceof Error?t.message:"Failed to create notification";throw o.default.error(e),t}},[]),b=(0,i.useCallback)(async e=>{try{let a=await r.n.notifyIncomingDelivery(e);return t(e=>[a,...e]),n(e=>e+1),o.default.success("Incoming delivery notification created"),a}catch(t){let e=t instanceof Error?t.message:"Failed to create notification";throw o.default.error(e),t}},[]),g=(0,i.useCallback)(async e=>{try{let a=await r.n.notifyStatusUpdate(e);return t(e=>[a,...e]),n(e=>e+1),o.default.success("Status update notification created"),a}catch(t){let e=t instanceof Error?t.message:"Failed to create notification";throw o.default.error(e),t}},[]),m=(0,i.useCallback)(async e=>{try{let a=await r.n.createNotification(e);return t(e=>[a,...e]),n(e=>e+1),o.default.success("Notification created"),a}catch(t){let e=t instanceof Error?t.message:"Failed to create notification";throw o.default.error(e),t}},[]),x=e.filter(e=>!e.read);return(0,i.useEffect)(()=>{u()},[u]),{notifications:e,unreadNotifications:x,unreadCount:a,isLoading:s,error:l,fetchNotifications:u,markAsRead:f,markAllAsRead:h,createOfferReceivedNotification:p,createOfferAcceptedNotification:y,createIncomingDeliveryNotification:b,createStatusUpdateNotification:g,createCustomNotification:m}}},76007:(e,t,a)=>{Promise.resolve().then(a.bind(a,32963)),Promise.resolve().then(a.bind(a,43452))}},e=>{e.O(0,[3965,7225,3964,6592,1530,8441,5964,7358],()=>e(e.s=76007)),_N_E=e.O()}]);