(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3304],{14140:(e,t,a)=>{"use strict";a.d(t,{j:()=>o});var r=a(23915),i=a(45404);let s=(0,r.Wp)({apiKey:"AIzaSyDiclg8XNo2L1hDBoaSoHmFMBggUKYjHH4",authDomain:"pickom-mvp.firebaseapp.com",projectId:"pickom-mvp",storageBucket:"pickom-mvp.firebasestorage.app",messagingSenderId:"168767828055",appId:"1:168767828055:web:2853961b44970c114ab312"}),o=(0,i.xI)(s)},21787:(e,t,a)=>{"use strict";a.d(t,{IT:()=>n,S1:()=>h,TS:()=>p,XE:()=>l,confirmRecipient:()=>u,createDeliveryRequest:()=>s,qM:()=>c,rg:()=>x,updateDeliveryRequest:()=>d,vd:()=>i,zW:()=>o});var r=a(51070);let i=async()=>r.Bb.get("/delivery/pickers"),s=async e=>r.xh.post("/delivery/requests",e),o=async()=>r.xh.get("/delivery/requests"),n=async e=>r.xh.get("/delivery/requests/".concat(e)),l=async(e,t)=>r.xh.put("/delivery/requests/".concat(e,"/status"),{status:t}),d=async(e,t)=>r.xh.patch("/delivery/requests/".concat(e),t),c=async()=>r.xh.get("/delivery/completed"),h=async()=>r.xh.get("/delivery/cancelled"),u=async(e,t)=>r.xh.put("/delivery/requests/".concat(e,"/confirm-recipient"),{confirmed:t}),x=async e=>r.xh.post("/delivery/find-receiver",{email:e}),p=async()=>r.xh.get("/delivery/incoming")},38464:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(31418),i=a(95155);let s=(0,r.A)((0,i.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},43452:(e,t,a)=>{"use strict";a.d(t,{MobileContainer:()=>n});var r=a(95155);a(12115);var i=a(54581),s=a(18407),o=a(35695);let n=e=>{let{children:t,width:a=375,height:n=812,showFrame:l=!0,backgroundColor:d,showBottomNav:c=!0}=e,h=(0,o.usePathname)(),u=(null==h?void 0:h.includes("/login"))||(null==h?void 0:h.includes("/register")),x=c&&!u;return l?(0,r.jsx)(i.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",padding:3,backgroundColor:"#f5f5f5"},children:(0,r.jsx)(s.A,{elevation:3,sx:{width:a,height:x?"calc(".concat(n,"px - 70px)"):n,borderRadius:6,overflow:"hidden",position:"relative",bgcolor:d||"background.default",border:"8px solid #000000","&::before":{content:'""',position:"absolute",top:12,left:"50%",transform:"translateX(-50%)",width:134,height:6,backgroundColor:"#000000",borderRadius:3,zIndex:1},"&::after":{content:'""',position:"absolute",bottom:8,left:"50%",transform:"translateX(-50%)",width:134,height:5,backgroundColor:"#000000",borderRadius:2.5,zIndex:1}},children:(0,r.jsx)(i.default,{"data-mobile-container":!0,sx:{width:"100%",height:"100%",paddingTop:"calc(24px + var(--safe-area-top))",overflow:"auto",position:"relative","&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"},children:(0,r.jsx)(i.default,{sx:{paddingBottom:"calc(16px + var(--safe-area-bottom))",minHeight:"100%"},children:t})})})}):(0,r.jsx)(i.default,{"data-mobile-container":!0,sx:{width:"100vw",height:"100vh",bgcolor:d||"background.default",overflow:"hidden",position:"fixed",left:0,right:0,bottom:0,pt:"env(safe-area-inset-top)",pb:x?"68px":0,margin:0,"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"},children:(0,r.jsx)(i.default,{sx:{width:"100%",height:"100%",overflow:"auto",margin:0,padding:0,"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"},children:t})})}},51070:(e,t,a)=>{"use strict";a.d(t,{Bb:()=>n,H$:()=>s,xh:()=>o,y3:()=>l});var r=a(23464),i=a(14140);let s=a(6267).Ii.isNativePlatform()?"http://10.0.2.2:4242":"http://localhost:4242",o=r.A.create({baseURL:s,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(async e=>{let t=i.j.currentUser;if(t)try{let a=await t.getIdToken();e.headers.Authorization="Bearer ".concat(a)}catch(e){}return e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>Promise.reject(e));let n=r.A.create({baseURL:s,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});async function l(){try{return await r.A.get("".concat(s,"/api"),{timeout:5e3}),!0}catch(e){return!1}}n.interceptors.response.use(e=>e,e=>Promise.reject(e))},74588:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(31418),i=a(95155);let s=(0,r.A)((0,i.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel")},77059:(e,t,a)=>{Promise.resolve().then(a.bind(a,98481))},97704:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var r=a(95155),i=a(12115),s=a(35695),o=a(18407),n=a(40541),l=a(9111),d=a(26564),c=a(11335),h=a(21888),u=a(43290),x=a(60807);let p=e=>e>99?"99+":e,f=(0,i.memo)(function(){let{className:e,unreadChatsCount:t=0,activeOrdersCount:a=0,unreadNotificationsCount:f=0,userRole:g}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=(0,s.useRouter)(),v=(0,s.usePathname)(),[m,y]=(0,i.useState)(()=>localStorage.getItem("userRole"));(0,i.useEffect)(()=>{if(!g){let e=null;v.startsWith("/available-deliveries")?e="picker":v.startsWith("/delivery-methods")&&(e="sender"),e&&e!==m&&(y(e),localStorage.setItem("userRole",e))}},[v,g,m]);let j=g||m,k=(0,i.useMemo)(()=>v.startsWith("/delivery-methods")||v.startsWith("/orders")||v.startsWith("/available-deliveries")?0:v.startsWith("/chat")?1:v.startsWith("/notifications")?2:3*!!v.startsWith("/profile"),[v]),[C,w]=(0,i.useState)(k),A=(0,i.useCallback)((e,t)=>{switch(w(t),t){case 0:"picker"===j?b.push("/available-deliveries"):b.push("/delivery-methods");break;case 1:b.push("/chats");break;case 2:b.push("/notifications");break;case 3:b.push("/profile")}},[b,j]);return(0,r.jsx)(o.A,{className:e,sx:{position:"fixed",bottom:0,left:0,right:0,width:"100vw",zIndex:1200,paddingBottom:"env(safe-area-inset-bottom)",paddingLeft:0,paddingRight:0,backgroundColor:"background.paper",borderTop:1,borderColor:"divider",borderRadius:0,boxShadow:"0px -2px 4px rgba(0, 0, 0, 0.1)"},elevation:0,children:(0,r.jsxs)(n.A,{value:C,onChange:A,sx:{backgroundColor:"background.paper",width:"100%",height:"68px",paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)"},children:[(0,r.jsx)(l.A,{label:"Orders",icon:(0,r.jsx)(d.default,{badgeContent:p(a),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,r.jsx)(c.default,{})})}),(0,r.jsx)(l.A,{label:"Chat",icon:(0,r.jsx)(d.default,{badgeContent:p(t),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,r.jsx)(h.A,{})})}),(0,r.jsx)(l.A,{label:"Notifications",icon:(0,r.jsx)(d.default,{badgeContent:p(f),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,r.jsx)(u.A,{})})}),(0,r.jsx)(l.A,{label:"Profile",icon:(0,r.jsx)(x.default,{})})]})})})},98481:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var r=a(95155),i=a(54581),s=a(14426),o=a(68534),n=a(71116),l=a(92302),d=a(41218),c=a(16632),h=a(41101),u=a(38464),x=a(74588),p=a(35695),f=a(12115),g=a(43452),b=a(97704),v=a(21787);function m(){let e=(0,p.useRouter)(),[t,a]=(0,f.useState)([]),[m,y]=(0,f.useState)(!0),[j,k]=(0,f.useState)("");return((0,f.useEffect)(()=>{(async()=>{try{let e=await (0,v.S1)();a(e.data||[])}catch(e){k("Failed to load cancelled deliveries.")}finally{y(!1)}})()},[]),m)?(0,r.jsx)(i.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:(0,r.jsx)(s.default,{})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.MobileContainer,{showFrame:!1,children:(0,r.jsxs)(i.default,{sx:{p:3,pb:10,backgroundColor:"background.default",minHeight:"100vh"},children:[(0,r.jsxs)(i.default,{sx:{mb:3,display:"flex",alignItems:"center"},children:[(0,r.jsx)(o.A,{onClick:()=>{e.back()},sx:{minWidth:"auto",p:1,mr:1},children:(0,r.jsx)(u.A,{})}),(0,r.jsx)(n.default,{variant:"h5",sx:{fontWeight:600},children:"Cancelled Deliveries"})]}),j&&(0,r.jsx)(l.A,{severity:"error",sx:{mb:3},children:j}),0===t.length?(0,r.jsxs)(i.default,{sx:{textAlign:"center",py:8},children:[(0,r.jsx)(x.A,{sx:{fontSize:80,color:"text.disabled",mb:2}}),(0,r.jsx)(n.default,{variant:"h6",color:"text.secondary",children:"No cancelled deliveries"}),(0,r.jsx)(n.default,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Your cancelled deliveries will appear here"})]}):(0,r.jsx)(i.default,{sx:{display:"flex",flexDirection:"column",gap:2},children:t.map(e=>{var t,a,s,o;return(0,r.jsx)(d.A,{children:(0,r.jsxs)(c.A,{children:[(0,r.jsxs)(i.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start",mb:2},children:[(0,r.jsx)(n.default,{variant:"h6",sx:{fontWeight:600},children:e.title}),(0,r.jsx)(h.A,{label:"Cancelled",color:"error",size:"small"})]}),(0,r.jsxs)(i.default,{sx:{mb:2},children:[(0,r.jsxs)(n.default,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:["From: ",null==(t=e.fromLocation)?void 0:t.address,(null==(a=e.fromLocation)?void 0:a.city)&&", ".concat(e.fromLocation.city)]}),(0,r.jsxs)(n.default,{variant:"body2",color:"text.secondary",children:["To: ",null==(s=e.toLocation)?void 0:s.address,(null==(o=e.toLocation)?void 0:o.city)&&", ".concat(e.toLocation.city)]})]}),(0,r.jsxs)(i.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsx)(n.default,{variant:"caption",color:"text.secondary",children:new Date(e.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),(0,r.jsxs)(n.default,{variant:"h6",sx:{fontWeight:700,color:"text.secondary"},children:["$",e.price.toFixed(2)]})]})]})},e.id)})})]})}),(0,r.jsx)(b.default,{})]})}}},e=>{e.O(0,[3965,7225,9313,1623,3806,8534,1101,5394,8441,5964,7358],()=>e(e.s=77059)),_N_E=e.O()}]);