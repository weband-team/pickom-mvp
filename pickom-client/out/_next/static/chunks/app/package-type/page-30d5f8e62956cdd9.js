(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8856],{14140:(e,t,r)=>{"use strict";r.d(t,{j:()=>l});var a=r(23915),i=r(45404);let n=(0,a.Wp)({apiKey:"AIzaSyDiclg8XNo2L1hDBoaSoHmFMBggUKYjHH4",authDomain:"pickom-mvp.firebaseapp.com",projectId:"pickom-mvp",storageBucket:"pickom-mvp.firebasestorage.app",messagingSenderId:"168767828055",appId:"1:168767828055:web:2853961b44970c114ab312"}),l=(0,i.xI)(n)},21787:(e,t,r)=>{"use strict";r.d(t,{IT:()=>o,S1:()=>u,TS:()=>x,XE:()=>s,confirmRecipient:()=>h,createDeliveryRequest:()=>n,qM:()=>d,rg:()=>p,updateDeliveryRequest:()=>c,vd:()=>i,zW:()=>l});var a=r(51070);let i=async()=>a.Bb.get("/delivery/pickers"),n=async e=>a.xh.post("/delivery/requests",e),l=async()=>a.xh.get("/delivery/requests"),o=async e=>a.xh.get("/delivery/requests/".concat(e)),s=async(e,t)=>a.xh.put("/delivery/requests/".concat(e,"/status"),{status:t}),c=async(e,t)=>a.xh.patch("/delivery/requests/".concat(e),t),d=async()=>a.xh.get("/delivery/completed"),u=async()=>a.xh.get("/delivery/cancelled"),h=async(e,t)=>a.xh.put("/delivery/requests/".concat(e,"/confirm-recipient"),{confirmed:t}),p=async e=>a.xh.post("/delivery/find-receiver",{email:e}),x=async()=>a.xh.get("/delivery/incoming")},33960:(e,t,r)=>{Promise.resolve().then(r.bind(r,45120))},45120:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(95155),i=r(12115),n=r(35695),l=r(54581),o=r(71116),s=r(72705),c=r(58343),d=function(e){return e.SMALL_PARCEL="small-parcel",e.LARGE_PARCEL="large-parcel",e.DOCUMENT="document",e.OTHER="other",e}({}),u=r(16950),h=r(97644),p=r(14426),x=r(92302),m=r(42663),f=r(41101),g=r(21787);function v(e){let{recipientId:t,recipientPhone:r,onRecipientIdChange:n,onRecipientPhoneChange:d}=e,[v,b]=(0,i.useState)(()=>t?"email":r?"phone":"none"),[y,j]=(0,i.useState)(""),[C,k]=(0,i.useState)(!1),[A,L]=(0,i.useState)(null),[E,R]=(0,i.useState)(null),S=(0,i.useRef)(null),P=(0,i.useCallback)(async e=>{if(!e.trim()){L(null),R(null),n("");return}k(!0),R(null);try{let t=await (0,g.rg)(e.trim());t.data?(L(t.data),n(t.data.email),R(null)):(L(null),n(""),R("User not found"))}catch(e){L(null),n(""),R("Failed to search. Please try again.")}finally{k(!1)}},[n]);return(0,i.useEffect)(()=>()=>{S.current&&clearTimeout(S.current)},[]),(0,a.jsxs)(l.default,{sx:{mb:3},children:[(0,a.jsx)(o.default,{variant:"h6",sx:{mb:2},children:"Receiver (Optional)"}),(0,a.jsxs)(u.A,{value:v,exclusive:!0,onChange:(e,t)=>{null!==t&&(b(t),j(""),L(null),R(null),"none"===t?(n(""),d("")):"email"===t?d(""):"phone"===t&&n(""))},fullWidth:!0,sx:{mb:2},children:[(0,a.jsx)(h.A,{value:"none",children:"No Receiver"}),(0,a.jsx)(h.A,{value:"email",children:"Email"}),(0,a.jsx)(h.A,{value:"phone",children:"Phone Number"})]}),"email"===v&&(0,a.jsxs)(s.A,{spacing:2,children:[(0,a.jsx)(c.ks,{label:"Search by Email",value:y,onChange:e=>{let t=e.target.value;j(t),S.current&&clearTimeout(S.current),S.current=setTimeout(()=>{P(t)},500)},placeholder:"receiver@example.com",fullWidth:!0}),C&&(0,a.jsx)(l.default,{sx:{display:"flex",justifyContent:"center",p:1},children:(0,a.jsx)(p.default,{size:20})}),E&&!C&&(0,a.jsx)(x.A,{severity:"warning",children:E}),A&&!C&&(0,a.jsxs)(l.default,{sx:{p:2,border:"2px solid",borderColor:"success.main",borderRadius:2,backgroundColor:"success.light",display:"flex",alignItems:"center",gap:2},children:[A.avatarUrl&&(0,a.jsx)(m.default,{src:A.avatarUrl,alt:A.name,sx:{width:48,height:48}}),(0,a.jsxs)(l.default,{sx:{flex:1},children:[(0,a.jsx)(o.default,{variant:"subtitle1",fontWeight:"bold",children:A.name}),(0,a.jsx)(o.default,{variant:"body2",color:"text.secondary",children:A.email})]}),(0,a.jsx)(f.A,{label:"Found",color:"success",size:"small"})]})]}),"phone"===v&&(0,a.jsx)(c.ks,{label:"Receiver Phone Number",type:"tel",value:r,onChange:e=>d(e.target.value),placeholder:"+1234567890",fullWidth:!0})]})}function b(){let e=(0,n.useRouter)(),[t,u]=(0,i.useState)(""),[h,p]=(0,i.useState)(""),[x,m]=(0,i.useState)(""),[f,g]=(0,i.useState)(""),[b,y]=(0,i.useState)(""),[j,C]=(0,i.useState)(""),[k,A]=(0,i.useState)(""),[L,E]=(0,i.useState)(""),[R,S]=(0,i.useState)(null),[P,w]=(0,i.useState)(!1),D=()=>R===d.DOCUMENT||R===d.SMALL_PARCEL?"small":R===d.LARGE_PARCEL?"large":"medium";return(0,a.jsx)(l.default,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5",p:2},children:(0,a.jsx)(c.kc,{showFrame:!1,children:(0,a.jsxs)(l.default,{sx:{p:3,pb:6},children:[(0,a.jsxs)(l.default,{sx:{textAlign:"center",mb:4},children:[(0,a.jsx)(c.Lm,{size:"medium"}),(0,a.jsx)(o.default,{variant:"h4",sx:{mt:2,mb:1},children:"Select Package Type"})]}),(0,a.jsxs)(s.A,{spacing:2,sx:{mb:3},children:[(0,a.jsx)(l.default,{onClick:()=>{S(d.SMALL_PARCEL)},sx:{p:3,border:R===d.SMALL_PARCEL?"3px solid":"2px solid",borderColor:R===d.SMALL_PARCEL?"primary.main":"divider",borderRadius:2,cursor:"pointer",backgroundColor:R===d.SMALL_PARCEL?"action.selected":"background.paper",transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"action.hover",transform:"translateY(-2px)",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"}},children:(0,a.jsxs)(s.A,{direction:"row",alignItems:"center",spacing:2,children:[(0,a.jsx)(o.default,{fontSize:"2rem",children:"\uD83D\uDCE6"}),(0,a.jsxs)(l.default,{children:[(0,a.jsx)(o.default,{variant:"h6",sx:{color:R===d.SMALL_PARCEL?"primary.main":"text.primary",fontWeight:R===d.SMALL_PARCEL?"bold":"normal"},children:"Small Parcel"}),(0,a.jsx)(o.default,{variant:"body2",color:"text.secondary",children:"Documents, small items up to 2kg"})]})]})}),(0,a.jsx)(l.default,{onClick:()=>{S(d.LARGE_PARCEL)},sx:{p:3,border:R===d.LARGE_PARCEL?"3px solid":"2px solid",borderColor:R===d.LARGE_PARCEL?"primary.main":"divider",borderRadius:2,cursor:"pointer",backgroundColor:R===d.LARGE_PARCEL?"action.selected":"background.paper",transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"action.hover",transform:"translateY(-2px)",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"}},children:(0,a.jsxs)(s.A,{direction:"row",alignItems:"center",spacing:2,children:[(0,a.jsx)(o.default,{fontSize:"2rem",children:"\uD83D\uDCEB"}),(0,a.jsxs)(l.default,{children:[(0,a.jsx)(o.default,{variant:"h6",sx:{color:R===d.LARGE_PARCEL?"primary.main":"text.primary",fontWeight:R===d.LARGE_PARCEL?"bold":"normal"},children:"Large Parcel"}),(0,a.jsx)(o.default,{variant:"body2",color:"text.secondary",children:"Furniture, large packages over 2kg"})]})]})}),(0,a.jsx)(l.default,{onClick:()=>{S(d.DOCUMENT)},sx:{p:3,border:R===d.DOCUMENT?"3px solid":"2px solid",borderColor:R===d.DOCUMENT?"primary.main":"divider",borderRadius:2,cursor:"pointer",backgroundColor:R===d.DOCUMENT?"action.selected":"background.paper",transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"action.hover",transform:"translateY(-2px)",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"}},children:(0,a.jsxs)(s.A,{direction:"row",alignItems:"center",spacing:2,children:[(0,a.jsx)(o.default,{fontSize:"2rem",children:"\uD83D\uDCC4"}),(0,a.jsxs)(l.default,{children:[(0,a.jsx)(o.default,{variant:"h6",sx:{color:R===d.DOCUMENT?"primary.main":"text.primary",fontWeight:R===d.DOCUMENT?"bold":"normal"},children:"Document"}),(0,a.jsx)(o.default,{variant:"body2",color:"text.secondary",children:"Papers, contracts, certificates"})]})]})}),(0,a.jsx)(l.default,{onClick:()=>{S(d.OTHER)},sx:{p:3,border:R===d.OTHER?"3px solid":"2px solid",borderColor:R===d.OTHER?"primary.main":"divider",borderRadius:2,cursor:"pointer",backgroundColor:R===d.OTHER?"action.selected":"background.paper",transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:"action.hover",transform:"translateY(-2px)",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"}},children:(0,a.jsxs)(s.A,{direction:"row",alignItems:"center",spacing:2,children:[(0,a.jsx)(o.default,{fontSize:"2rem",children:"â“"}),(0,a.jsxs)(l.default,{children:[(0,a.jsx)(o.default,{variant:"h6",sx:{color:R===d.OTHER?"primary.main":"text.primary",fontWeight:R===d.OTHER?"bold":"normal"},children:"Other"}),(0,a.jsx)(o.default,{variant:"body2",color:"text.secondary",children:"Tell us what you're sending"})]})]})})]}),(0,a.jsxs)(l.default,{sx:{mb:3},children:[(0,a.jsx)(o.default,{variant:"h6",sx:{mb:2},children:"Package Details"}),(0,a.jsxs)(s.A,{spacing:2,children:[(0,a.jsx)(c.ks,{label:"What are you sending?",value:t,onChange:e=>u(e.target.value),placeholder:"e.g., Documents, Flowers, Phone",required:!0,fullWidth:!0}),(0,a.jsx)(c.ks,{label:"Description (optional)",value:h,onChange:e=>p(e.target.value),multiline:!0,rows:2,placeholder:"Additional details about the package",fullWidth:!0}),(0,a.jsx)(c.ks,{label:"Price (zÅ‚)",type:"number",value:x,onChange:e=>m(e.target.value),required:!0,fullWidth:!0}),(0,a.jsx)(c.ks,{label:"Weight (kg) - optional",type:"number",value:f,onChange:e=>g(e.target.value),fullWidth:!0})]})]}),(0,a.jsxs)(l.default,{sx:{mb:3},children:[(0,a.jsx)(o.default,{variant:"h6",sx:{mb:2},children:"Special Instructions (Optional)"}),(0,a.jsx)(c.ks,{multiline:!0,rows:3,value:b,onChange:e=>y(e.target.value),fullWidth:!0,placeholder:"e.g., Call before delivery, Fragile"})]}),R===d.OTHER&&(0,a.jsx)(l.default,{sx:{mb:3},children:(0,a.jsx)(c.ks,{label:"Please describe what you're sending",value:j,onChange:e=>C(e.target.value),fullWidth:!0,required:!0})}),(0,a.jsx)(v,{recipientId:k,recipientPhone:L,onRecipientIdChange:A,onRecipientPhoneChange:E}),(0,a.jsxs)(s.A,{direction:"row",justifyContent:"space-between",sx:{mt:2},children:[(0,a.jsx)(c.$n,{variant:"outlined",onClick:()=>e.back(),children:"Back"}),(0,a.jsx)(c.$n,{onClick:async()=>{w(!0);try{let a=localStorage.getItem("deliveryData");if(!a){(await r.e(1530).then(r.bind(r,31530))).default.error("Delivery information not found. Please start from the beginning."),e.push("/delivery-methods");return}let i=JSON.parse(a);if(!i.fromLocation||!i.toLocation){(await r.e(1530).then(r.bind(r,31530))).default.error("Location information not found. Please start from the beginning."),e.push("/delivery-methods");return}let n="within-city",l=i.fromLocation.city,o=i.toLocation.city;l&&o&&l!==o&&(n="inter-city");let{createDeliveryRequest:s}=await Promise.resolve().then(r.bind(r,21787)),c=(await r.e(1530).then(r.bind(r,31530))).default,u=c.loading("Creating delivery..."),p=(await s({title:t,description:h||void 0,fromLocation:i.fromLocation,toLocation:i.toLocation,deliveryType:n,price:parseFloat(x),size:D(),weight:f?parseFloat(f):void 0,notes:b||void 0,recipientEmail:k||void 0,recipientPhone:L||void 0})).data.id;c.success("Delivery created successfully!",{id:u});let m={...i,deliveryId:p,packageType:R,title:t,description:h||void 0,size:D(),price:parseFloat(x),weight:f?parseFloat(f):void 0,notes:b||void 0,otherDescription:R===d.OTHER?j:void 0,recipientEmail:k||void 0,recipientPhone:L||void 0};localStorage.setItem("deliveryData",JSON.stringify(m)),e.push("/searching-pickers")}catch(n){var a,i;let e=(await r.e(1530).then(r.bind(r,31530))).default,t=(null==(i=n.response)||null==(a=i.data)?void 0:a.message)||"Failed to create delivery. Please try again.";e.error(t),w(!1)}},disabled:!R||!t||!x||R===d.OTHER&&!j||P,loading:P,variant:R&&t&&x?"contained":"outlined",sx:{"&.Mui-disabled":{backgroundColor:"action.disabled",color:"text.disabled",borderColor:"divider"}},children:"Create Order & Find Pickers"})]})]})})})}},51070:(e,t,r)=>{"use strict";r.d(t,{Bb:()=>o,H$:()=>n,xh:()=>l,y3:()=>s});var a=r(23464),i=r(14140);let n=r(6267).Ii.isNativePlatform()?"http://10.0.2.2:4242":"http://localhost:4242",l=a.A.create({baseURL:n,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(async e=>{let t=i.j.currentUser;if(t)try{let r=await t.getIdToken();e.headers.Authorization="Bearer ".concat(r)}catch(e){}return e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,e=>Promise.reject(e));let o=a.A.create({baseURL:n,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});async function s(){try{return await a.A.get("".concat(n,"/api"),{timeout:5e3}),!0}catch(e){return!1}}o.interceptors.response.use(e=>e,e=>Promise.reject(e))},72705:(e,t,r)=>{"use strict";r.d(t,{A:()=>j});var a=r(12115),i=r(52596),n=r(72890),l=r(90870),o=r(17472);let s=(0,r(11772).Ay)();var c=r(25560),d=r(5300),u=r(85799),h=r(648),p=r(83130),x=r(95155);let m=(0,u.A)(),f=s("div",{name:"MuiStack",slot:"Root"});function g(e){return(0,c.A)({props:e,name:"MuiStack",defaultTheme:m})}let v=e=>{let{ownerState:t,theme:r}=e,a={display:"flex",flexDirection:"column",...(0,h.NI)({theme:r},(0,h.kW)({values:t.direction,breakpoints:r.breakpoints.values}),e=>({flexDirection:e}))};if(t.spacing){let e=(0,p.LX)(r),i=Object.keys(r.breakpoints.values).reduce((e,r)=>(("object"==typeof t.spacing&&null!=t.spacing[r]||"object"==typeof t.direction&&null!=t.direction[r])&&(e[r]=!0),e),{}),l=(0,h.kW)({values:t.direction,base:i}),o=(0,h.kW)({values:t.spacing,base:i});"object"==typeof l&&Object.keys(l).forEach((e,t,r)=>{if(!l[e]){let a=t>0?l[r[t-1]]:"column";l[e]=a}}),a=(0,n.A)(a,(0,h.NI)({theme:r},o,(r,a)=>t.useFlexGap?{gap:(0,p._W)(e,r)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{["margin".concat({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[a?l[a]:t.direction])]:(0,p._W)(e,r)}}))}return(0,h.iZ)(r.breakpoints,a)};var b=r(75955),y=r(10186);let j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{createStyledComponent:t=f,useThemeProps:r=g,componentName:n="MuiStack"}=e,s=t(v);return a.forwardRef(function(e,t){let c=r(e),{component:u="div",direction:h="column",spacing:p=0,divider:m,children:f,className:g,useFlexGap:v=!1,...b}=(0,d.A)(c),y=(0,o.A)({root:["root"]},e=>(0,l.Ay)(n,e),{});return(0,x.jsx)(s,{as:u,ownerState:{direction:h,spacing:p,useFlexGap:v},ref:t,className:(0,i.A)(y.root,g),...b,children:m?function(e,t){let r=a.Children.toArray(e).filter(Boolean);return r.reduce((e,i,n)=>(e.push(i),n<r.length-1&&e.push(a.cloneElement(t,{key:"separator-".concat(n)})),e),[])}(f,m):f})})}({createStyledComponent:(0,b.Ay)("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>(0,y.b)({props:e,name:"MuiStack"})})}},e=>{e.O(0,[3965,7225,9313,1623,3806,8534,1101,5207,8449,1190,9283,1986,7262,2649,7212,8142,8343,8441,5964,7358],()=>e(e.s=33960)),_N_E=e.O()}]);