(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2118],{14140:(e,t,r)=>{"use strict";r.d(t,{j:()=>o});var i=r(23915),a=r(45404);let s=(0,i.Wp)({apiKey:"AIzaSyDiclg8XNo2L1hDBoaSoHmFMBggUKYjHH4",authDomain:"pickom-mvp.firebaseapp.com",projectId:"pickom-mvp",storageBucket:"pickom-mvp.firebasestorage.app",messagingSenderId:"168767828055",appId:"1:168767828055:web:2853961b44970c114ab312"}),o=(0,a.xI)(s)},21787:(e,t,r)=>{"use strict";r.d(t,{IT:()=>n,S1:()=>u,TS:()=>p,XE:()=>l,confirmRecipient:()=>h,createDeliveryRequest:()=>s,qM:()=>c,rg:()=>x,updateDeliveryRequest:()=>d,vd:()=>a,zW:()=>o});var i=r(51070);let a=async()=>i.Bb.get("/delivery/pickers"),s=async e=>i.xh.post("/delivery/requests",e),o=async()=>i.xh.get("/delivery/requests"),n=async e=>i.xh.get("/delivery/requests/".concat(e)),l=async(e,t)=>i.xh.put("/delivery/requests/".concat(e,"/status"),{status:t}),d=async(e,t)=>i.xh.patch("/delivery/requests/".concat(e),t),c=async()=>i.xh.get("/delivery/completed"),u=async()=>i.xh.get("/delivery/cancelled"),h=async(e,t)=>i.xh.put("/delivery/requests/".concat(e,"/confirm-recipient"),{confirmed:t}),x=async e=>i.xh.post("/delivery/find-receiver",{email:e}),p=async()=>i.xh.get("/delivery/incoming")},23406:(e,t,r)=>{Promise.resolve().then(r.bind(r,51833))},28307:(e,t,r)=>{"use strict";r.d(t,{H:()=>o});var i=r(95155),a=r(42663),s=r(35695);function o(e){let{name:t,avatarUrl:r,sx:o}=e,n=(0,s.useRouter)();return(0,i.jsx)(a.default,{src:r,sx:{width:40,height:40,cursor:"pointer","&:hover":{transform:"scale(1.05)",opacity:.8,boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},...o},onClick:()=>n.push("/profile"),children:t[0]})}},37429:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r(31418),a=r(95155);let s=(0,i.A)((0,a.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm-2 16-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9z"}),"VerifiedUser")},38464:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var i=r(31418),a=r(95155);let s=(0,i.A)((0,a.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},51070:(e,t,r)=>{"use strict";r.d(t,{Bb:()=>n,H$:()=>s,xh:()=>o,y3:()=>l});var i=r(23464),a=r(14140);let s=r(6267).Ii.isNativePlatform()?"http://10.0.2.2:4242":"http://localhost:4242",o=i.A.create({baseURL:s,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(async e=>{let t=a.j.currentUser;if(t)try{let r=await t.getIdToken();e.headers.Authorization="Bearer ".concat(r)}catch(e){}return e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,e=>Promise.reject(e));let n=i.A.create({baseURL:s,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});async function l(){try{return await i.A.get("".concat(s,"/api"),{timeout:5e3}),!0}catch(e){return!1}}n.interceptors.response.use(e=>e,e=>Promise.reject(e))},51833:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>z});var i=r(95155),a=r(12115),s=r(54581),o=r(72705),n=r(3127),l=r(71116),d=r(92302),c=r(41218),u=r(16632),h=r(42663),x=r(41101),p=r(38464),f=r(37429),m=r(68558),g=r(26290),v=r(2582),b=r(11335),y=r(58343),j=r(28307),k=r(97704),w=r(66518),A=r(35695),C=r(21787);let S={"sender-1":{id:"sender-1",fullName:"Anna Kowalska",email:"anna.k@example.com",avatarUrl:"",rating:4.8,totalOrders:23,isPhoneVerified:!0,isEmailVerified:!0,memberSince:"2024-01-15"},"sender-2":{id:"sender-2",fullName:"Jan Nowak",email:"jan.nowak@example.com",avatarUrl:"",rating:4.5,totalOrders:12,isPhoneVerified:!0,isEmailVerified:!1,memberSince:"2024-03-20"},"sender-3":{id:"sender-3",fullName:"Maria Wiśniewska",email:"maria.w@example.com",avatarUrl:"",rating:4.9,totalOrders:45,isPhoneVerified:!0,isEmailVerified:!0,memberSince:"2023-11-10"},"sender-4":{id:"sender-4",fullName:"Piotr Lewandowski",email:"p.lewandowski@example.com",avatarUrl:"",rating:4.6,totalOrders:8,isPhoneVerified:!1,isEmailVerified:!0,memberSince:"2024-05-05"}};function z(){let e=(0,A.useRouter)(),[t,r]=(0,a.useState)([]),[z,W]=(0,a.useState)(!0),[I,R]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{W(!0),R("");try{let e=(await (0,C.zW)()).data.filter(e=>"pending"===e.status),t=new Map;e.forEach(e=>{let r=t.get(e.senderId)||[];t.set(e.senderId,[...r,e])});let i=[];t.forEach((e,t)=>{let r=S[t];r&&i.push({...r,activeOrders:e})}),i.sort((e,t)=>t.totalOrders-e.totalOrders),r(i)}catch(e){R("Failed to load senders. Please try again.")}finally{W(!1)}})()},[]);let N=t=>{e.push("/delivery-details/".concat(t))};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(y.kc,{showFrame:!1,children:[(0,i.jsx)(j.H,{name:"Vadim",sx:{position:"absolute",top:16,right:16,zIndex:10}}),(0,i.jsx)(s.default,{sx:{p:2,borderBottom:"1px solid ".concat(w.w4.colors.border),backgroundColor:w.w4.colors.white,position:"sticky",top:0,zIndex:100},children:(0,i.jsxs)(o.A,{direction:"row",alignItems:"center",spacing:2,children:[(0,i.jsx)(n.A,{onClick:()=>e.back(),size:"small",sx:{p:1},children:(0,i.jsx)(p.A,{})}),(0,i.jsxs)(s.default,{sx:{flex:1},children:[(0,i.jsx)(l.default,{variant:"h6",sx:{fontWeight:"bold"},children:"Browse Senders"}),(0,i.jsxs)(l.default,{variant:"caption",color:"text.secondary",children:[t.length," senders looking for pickers"]})]}),(0,i.jsx)(y.Lm,{variant:"icon",size:"small"})]})}),I&&(0,i.jsx)(s.default,{sx:{p:2},children:(0,i.jsx)(d.A,{severity:"error",children:I})}),(0,i.jsx)(s.default,{sx:{flex:1,overflow:"auto",pb:8},children:z?(0,i.jsx)(s.default,{sx:{py:8},children:(0,i.jsx)(y.Ip,{type:"dots",text:"Loading senders..."})}):0===t.length?(0,i.jsxs)(s.default,{sx:{textAlign:"center",py:8},children:[(0,i.jsx)(l.default,{variant:"h1",sx:{fontSize:"4rem",mb:2},children:"\uD83D\uDCE6"}),(0,i.jsx)(l.default,{variant:"h6",sx:{mb:1,fontWeight:"bold"},children:"No senders found"}),(0,i.jsx)(l.default,{variant:"body2",color:"text.secondary",children:"No senders are currently looking for pickers"})]}):(0,i.jsx)(s.default,{sx:{p:2},children:(0,i.jsx)(o.A,{spacing:2,children:t.map(t=>(0,i.jsx)(c.A,{sx:{border:1,borderColor:"divider",boxShadow:1,"&:hover":{boxShadow:3,borderColor:"primary.main"}},children:(0,i.jsxs)(u.A,{sx:{p:2},children:[(0,i.jsxs)(o.A,{direction:"row",spacing:2,sx:{mb:2},children:[(0,i.jsx)(h.default,{sx:{width:56,height:56,bgcolor:"primary.main"},children:t.fullName.charAt(0)}),(0,i.jsxs)(s.default,{sx:{flex:1},children:[(0,i.jsxs)(s.default,{sx:{display:"flex",alignItems:"center",gap:.5,mb:.5},children:[(0,i.jsx)(l.default,{variant:"subtitle1",sx:{fontWeight:600},children:t.fullName}),t.isPhoneVerified&&t.isEmailVerified&&(0,i.jsx)(f.A,{sx:{fontSize:16,color:"primary.main"}})]}),(0,i.jsxs)(s.default,{sx:{display:"flex",alignItems:"center",gap:.5,mb:1},children:[(0,i.jsx)(m.default,{sx:{fontSize:16,color:"warning.main"}}),(0,i.jsxs)(l.default,{variant:"body2",color:"text.secondary",children:[t.rating.toFixed(1)," (",t.totalOrders," orders)"]})]}),(0,i.jsxs)(s.default,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:[t.isPhoneVerified&&(0,i.jsx)(x.A,{icon:(0,i.jsx)(g.default,{sx:{fontSize:12}}),label:"Phone",size:"small",sx:{height:20,fontSize:"0.7rem"}}),t.isEmailVerified&&(0,i.jsx)(x.A,{icon:(0,i.jsx)(v.default,{sx:{fontSize:12}}),label:"Email",size:"small",sx:{height:20,fontSize:"0.7rem"}})]})]})]}),(0,i.jsxs)(s.default,{sx:{backgroundColor:"grey.50",borderRadius:1,p:1.5,mb:2},children:[(0,i.jsxs)(s.default,{sx:{display:"flex",alignItems:"center",gap:.5,mb:1},children:[(0,i.jsx)(b.default,{sx:{fontSize:16,color:"primary.main"}}),(0,i.jsxs)(l.default,{variant:"subtitle2",sx:{fontWeight:600},children:["Active Requests (",t.activeOrders.length,")"]})]}),(0,i.jsxs)(o.A,{spacing:1,children:[t.activeOrders.slice(0,2).map(e=>{var t,r;return(0,i.jsxs)(s.default,{sx:{p:1,backgroundColor:"background.paper",borderRadius:1,border:1,borderColor:"divider",cursor:"pointer","&:hover":{borderColor:"primary.main",backgroundColor:"action.hover"}},onClick:()=>N(e.id),children:[(0,i.jsxs)(l.default,{variant:"caption",color:"text.secondary",children:["#",e.id]}),(0,i.jsxs)(l.default,{variant:"body2",sx:{fontWeight:500,fontSize:"0.875rem"},children:[null==(t=e.fromLocation)?void 0:t.address," → ",null==(r=e.toLocation)?void 0:r.address]}),(0,i.jsxs)(s.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:.5},children:[(0,i.jsxs)(l.default,{variant:"subtitle2",sx:{color:"primary.main",fontWeight:"bold"},children:[e.price," zł"]}),e.deliveryType&&(0,i.jsx)(x.A,{label:"within-city"===e.deliveryType?"City":"Inter-City",size:"small",color:"within-city"===e.deliveryType?"primary":"warning",sx:{height:18,fontSize:"0.65rem"}})]})]},e.id)}),t.activeOrders.length>2&&(0,i.jsxs)(l.default,{variant:"caption",color:"text.secondary",sx:{textAlign:"center",pt:.5},children:["+",t.activeOrders.length-2," more orders"]})]})]}),(0,i.jsxs)(o.A,{direction:"row",spacing:1,children:[(0,i.jsx)(y.$n,{variant:"outlined",size:"small",onClick:()=>{var r;return r=t.id,void e.push("/chats/".concat(r))},sx:{flex:1,textTransform:"none"},children:"Chat"}),(0,i.jsx)(y.$n,{variant:"contained",size:"small",onClick:()=>N(t.activeOrders[0].id),sx:{flex:1,textTransform:"none"},children:"View Orders"})]})]})},t.id))})})})]}),(0,i.jsx)(k.default,{})]})}},72705:(e,t,r)=>{"use strict";r.d(t,{A:()=>j});var i=r(12115),a=r(52596),s=r(72890),o=r(90870),n=r(17472);let l=(0,r(11772).Ay)();var d=r(25560),c=r(5300),u=r(85799),h=r(648),x=r(83130),p=r(95155);let f=(0,u.A)(),m=l("div",{name:"MuiStack",slot:"Root"});function g(e){return(0,d.A)({props:e,name:"MuiStack",defaultTheme:f})}let v=e=>{let{ownerState:t,theme:r}=e,i={display:"flex",flexDirection:"column",...(0,h.NI)({theme:r},(0,h.kW)({values:t.direction,breakpoints:r.breakpoints.values}),e=>({flexDirection:e}))};if(t.spacing){let e=(0,x.LX)(r),a=Object.keys(r.breakpoints.values).reduce((e,r)=>(("object"==typeof t.spacing&&null!=t.spacing[r]||"object"==typeof t.direction&&null!=t.direction[r])&&(e[r]=!0),e),{}),o=(0,h.kW)({values:t.direction,base:a}),n=(0,h.kW)({values:t.spacing,base:a});"object"==typeof o&&Object.keys(o).forEach((e,t,r)=>{if(!o[e]){let i=t>0?o[r[t-1]]:"column";o[e]=i}}),i=(0,s.A)(i,(0,h.NI)({theme:r},n,(r,i)=>t.useFlexGap?{gap:(0,x._W)(e,r)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{["margin".concat({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i?o[i]:t.direction])]:(0,x._W)(e,r)}}))}return(0,h.iZ)(r.breakpoints,i)};var b=r(75955),y=r(10186);let j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{createStyledComponent:t=m,useThemeProps:r=g,componentName:s="MuiStack"}=e,l=t(v);return i.forwardRef(function(e,t){let d=r(e),{component:u="div",direction:h="column",spacing:x=0,divider:f,children:m,className:g,useFlexGap:v=!1,...b}=(0,c.A)(d),y=(0,n.A)({root:["root"]},e=>(0,o.Ay)(s,e),{});return(0,p.jsx)(l,{as:u,ownerState:{direction:h,spacing:x,useFlexGap:v},ref:t,className:(0,a.A)(y.root,g),...b,children:f?function(e,t){let r=i.Children.toArray(e).filter(Boolean);return r.reduce((e,a,s)=>(e.push(a),s<r.length-1&&e.push(i.cloneElement(t,{key:"separator-".concat(s)})),e),[])}(m,f):m})})}({createStyledComponent:(0,b.Ay)("div",{name:"MuiStack",slot:"Root"}),useThemeProps:e=>(0,y.b)({props:e,name:"MuiStack"})})},97704:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var i=r(95155),a=r(12115),s=r(35695),o=r(18407),n=r(40541),l=r(9111),d=r(26564),c=r(11335),u=r(21888),h=r(43290),x=r(60807);let p=e=>e>99?"99+":e,f=(0,a.memo)(function(){let{className:e,unreadChatsCount:t=0,activeOrdersCount:r=0,unreadNotificationsCount:f=0,userRole:m}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},g=(0,s.useRouter)(),v=(0,s.usePathname)(),[b,y]=(0,a.useState)(()=>localStorage.getItem("userRole"));(0,a.useEffect)(()=>{if(!m){let e=null;v.startsWith("/available-deliveries")?e="picker":v.startsWith("/delivery-methods")&&(e="sender"),e&&e!==b&&(y(e),localStorage.setItem("userRole",e))}},[v,m,b]);let j=m||b,k=(0,a.useMemo)(()=>v.startsWith("/delivery-methods")||v.startsWith("/orders")||v.startsWith("/available-deliveries")?0:v.startsWith("/chat")?1:v.startsWith("/notifications")?2:3*!!v.startsWith("/profile"),[v]),[w,A]=(0,a.useState)(k),C=(0,a.useCallback)((e,t)=>{switch(A(t),t){case 0:"picker"===j?g.push("/available-deliveries"):g.push("/delivery-methods");break;case 1:g.push("/chats");break;case 2:g.push("/notifications");break;case 3:g.push("/profile")}},[g,j]);return(0,i.jsx)(o.A,{className:e,sx:{position:"fixed",bottom:0,left:0,right:0,width:"100vw",zIndex:1200,paddingBottom:"env(safe-area-inset-bottom)",paddingLeft:0,paddingRight:0,backgroundColor:"background.paper",borderTop:1,borderColor:"divider",borderRadius:0,boxShadow:"0px -2px 4px rgba(0, 0, 0, 0.1)"},elevation:0,children:(0,i.jsxs)(n.A,{value:w,onChange:C,sx:{backgroundColor:"background.paper",width:"100%",height:"68px",paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)"},children:[(0,i.jsx)(l.A,{label:"Orders",icon:(0,i.jsx)(d.default,{badgeContent:p(r),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,i.jsx)(c.default,{})})}),(0,i.jsx)(l.A,{label:"Chat",icon:(0,i.jsx)(d.default,{badgeContent:p(t),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,i.jsx)(u.A,{})})}),(0,i.jsx)(l.A,{label:"Notifications",icon:(0,i.jsx)(d.default,{badgeContent:p(f),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,i.jsx)(h.A,{})})}),(0,i.jsx)(l.A,{label:"Profile",icon:(0,i.jsx)(x.default,{})})]})})})}},e=>{e.O(0,[3965,7225,9313,1623,3806,8534,1101,5207,8449,1190,9283,1986,7262,2649,7212,5394,8343,8441,5964,7358],()=>e(e.s=23406)),_N_E=e.O()}]);