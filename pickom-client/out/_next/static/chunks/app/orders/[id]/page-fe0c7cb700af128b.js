(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6040],{6864:(e,t,r)=>{"use strict";r.d(t,{$H:()=>c,HW:()=>s,TK:()=>n,op:()=>l,wz:()=>a});var i=r(51070);let a=async e=>(await i.xh.get("/user/".concat(e))).data,n=async(e,t)=>(await i.xh.put("/user/".concat(e),t)).data,s=async()=>(await i.xh.get("/auth/me")).data,c=async(e,t)=>(await i.xh.put("/user/".concat(e,"/online-status"),{isOnline:t})).data,l=async e=>(await i.xh.get("/user/".concat(e,"/balance"))).data},11019:(e,t,r)=>{"use strict";r.d(t,{default:()=>U});var i=r(95155),a=r(12115),n=r(54581),s=r(14426),c=r(92302),l=r(3127),d=r(71116),o=r(72705),u=r(41101),x=r(74964),h=r(38464),f=r(52836),p=r(64341),v=r(11335),m=r(37857),y=r(35695),j=r(43452),g=r(58343),b=r(97704),k=r(91204),C=r(86335),A=r(36114),w=r(54492),I=r(99927),P=r(71977),R=r(70978);function W(e){let{open:t,orderTrackingNumber:r,onConfirm:a,onCancel:s}=e;return(0,i.jsxs)(A.A,{open:t,onClose:s,maxWidth:"xs",fullWidth:!0,sx:{"& .MuiDialog-paper":{margin:"var(--safe-area-top) var(--safe-area-right) var(--safe-area-bottom) var(--safe-area-left)"}},children:[(0,i.jsx)(w.A,{children:(0,i.jsxs)(n.default,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(R.A,{sx:{color:"warning.main"}}),(0,i.jsx)(d.default,{variant:"h6",children:"Cancel Order?"})]})}),(0,i.jsxs)(I.A,{children:[(0,i.jsxs)(d.default,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["Are you sure you want to cancel order ",(0,i.jsx)("strong",{children:r}),"?"]}),(0,i.jsx)(d.default,{variant:"body2",color:"text.secondary",children:"This action cannot be undone."})]}),(0,i.jsxs)(P.A,{sx:{px:3,pb:2},children:[(0,i.jsx)(g.$n,{variant:"outlined",onClick:s,fullWidth:!0,children:"No, Keep Order"}),(0,i.jsx)(g.$n,{variant:"contained",onClick:a,color:"error",fullWidth:!0,children:"Yes, Cancel Order"})]})]})}var S=r(1154),D=r(78449),E=r(68558);function N(e){let{open:t,pickerName:r,onSubmit:s,onCancel:c}=e,[l,o]=(0,a.useState)(5),[u,x]=(0,a.useState)(""),h=()=>{c(),o(5),x("")};return(0,i.jsxs)(A.A,{open:t,onClose:h,maxWidth:"sm",fullWidth:!0,sx:{"& .MuiDialog-paper":{margin:"var(--safe-area-top) var(--safe-area-right) var(--safe-area-bottom) var(--safe-area-left)"}},children:[(0,i.jsx)(w.A,{children:(0,i.jsx)(d.default,{variant:"h6",children:"Leave a Review"})}),(0,i.jsxs)(I.A,{children:[(0,i.jsxs)(d.default,{variant:"body2",color:"text.secondary",sx:{mb:3},children:["How was your experience with ",(0,i.jsx)("strong",{children:r}),"?"]}),(0,i.jsxs)(n.default,{sx:{mb:3},children:[(0,i.jsx)(d.default,{variant:"body2",sx:{mb:1},children:"Rating"}),(0,i.jsx)(S.A,{value:l,onChange:(e,t)=>{null!==t&&o(t)},size:"large",icon:(0,i.jsx)(E.default,{fontSize:"inherit"}),emptyIcon:(0,i.jsx)(E.default,{fontSize:"inherit"})})]}),(0,i.jsxs)(n.default,{children:[(0,i.jsx)(d.default,{variant:"body2",sx:{mb:1},children:"Comment (optional)"}),(0,i.jsx)(D.default,{fullWidth:!0,multiline:!0,rows:4,value:u,onChange:e=>x(e.target.value),placeholder:"Share your experience...",variant:"outlined"})]})]}),(0,i.jsxs)(P.A,{sx:{px:3,pb:2},children:[(0,i.jsx)(g.$n,{variant:"outlined",onClick:h,fullWidth:!0,children:"Cancel"}),(0,i.jsx)(g.$n,{variant:"contained",onClick:()=>{s(l,u),o(5),x("")},fullWidth:!0,children:"Submit Review"})]})]})}var F=r(70005),M=r(31530),L=r(21787),T=r(6864);function U(e){var t,A,w;let{params:I}=e,P=(0,y.useRouter)(),{orderId:R}=(0,a.use)(I),[S,D]=(0,a.useState)(),[E,U]=(0,a.useState)(null),[H,z]=(0,a.useState)(!0),[$,O]=(0,a.useState)(""),[q,B]=(0,a.useState)(!1),[V,G]=(0,a.useState)(!1),[_,Y]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{(async()=>{try{let{user:e}=await (0,T.HW)();U(e)}catch(e){}})()},[]),(0,a.useEffect)(()=>{(async()=>{z(!0),O("");try{var e,t,r,i;let a,n,s,c=(await (0,L.IT)(parseInt(R))).data;switch(c.status){case"pending":default:a=k.Re.PENDING;break;case"accepted":case"picked_up":a=k.Re.ACTIVE;break;case"delivered":a=k.Re.COMPLETED;break;case"cancelled":a=k.Re.CANCELLED}if(c.pickerId)try{let{user:e}=await (0,T.wz)(c.pickerId);n={id:e.uid,fullName:e.name||"Picker",rating:e.rating||0,avatarUrl:e.avatarUrl}}catch(e){}if(c.recipientId)try{let{user:e}=await (0,T.wz)(c.recipientId);s={id:e.uid,fullName:e.name||"Recipient",rating:e.rating||0,avatarUrl:e.avatarUrl,isPhoneVerified:!0,isEmailVerified:!0}}catch(e){}let l={id:c.id.toString(),trackingNumber:"PCK".concat(c.id.toString().padStart(6,"0")),status:a,deliveryMethod:"within-city",packageType:"SMALL_PARCEL",pickup:{address:null==(e=c.fromLocation)?void 0:e.address,city:null==(t=c.fromLocation)?void 0:t.city},dropoff:{address:null==(r=c.toLocation)?void 0:r.address,city:null==(i=c.toLocation)?void 0:i.city},createdAt:new Date(c.createdAt),pickupDateTime:new Date(c.createdAt),price:c.price,currency:"USD",picker:n,receiver:s,receiverPhone:c.recipientPhone||void 0,recipientConfirmed:c.recipientConfirmed,notes:c.notes||void 0,packageDescription:c.description||void 0};D(l)}catch(e){O("Failed to load order. Please try again.")}finally{z(!1)}})()},[R]),H)return(0,i.jsx)(n.default,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"background.default"},children:(0,i.jsx)(s.default,{})});if($||!S)return(0,i.jsx)(n.default,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"background.default",p:2},children:(0,i.jsx)(c.A,{severity:"error",children:$||"Order not found"})});let K=async()=>{if(S.picker)try{let{createChat:e}=await r.e(6509).then(r.bind(r,16509)),{chatId:t}=(await e({participantId:S.picker.id,deliveryId:parseInt(S.id)})).data;P.push("/chat/".concat(t))}catch(e){M.toast.error("Failed to open chat")}},X=async()=>{if(S.receiver)try{let{createChat:e}=await r.e(6509).then(r.bind(r,16509)),{chatId:t}=(await e({participantId:S.receiver.id,deliveryId:parseInt(S.id)})).data;P.push("/chat/".concat(t))}catch(e){M.toast.error("Failed to open chat")}},J=async()=>{if(S){Y(!0);try{await (0,L.confirmRecipient)(parseInt(S.id),!0),M.toast.success("Delivery confirmed successfully!");let e=(await (0,L.IT)(parseInt(R))).data;D({...S,recipientConfirmed:e.recipientConfirmed})}catch(e){M.toast.error("Failed to confirm delivery. Please try again.")}finally{Y(!1)}}},Q=async()=>{if(S){Y(!0);try{await (0,L.confirmRecipient)(parseInt(S.id),!1),M.toast.success("Delivery rejected. Order has been cancelled."),setTimeout(()=>P.push("/orders"),1500)}catch(e){M.toast.error("Failed to reject delivery. Please try again."),Y(!1)}}},Z=E&&(null==S||null==(t=S.receiver)?void 0:t.id)===E.uid,ee=Z&&!(null==S?void 0:S.recipientConfirmed)&&(null==S?void 0:S.status)===k.Re.PENDING;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.MobileContainer,{showFrame:!1,children:(0,i.jsxs)(n.default,{sx:{display:"flex",flexDirection:"column",height:"100vh",backgroundColor:"background.default"},children:[(0,i.jsxs)(n.default,{sx:{display:"flex",alignItems:"center",p:2,borderBottom:1,borderColor:"divider"},children:[(0,i.jsx)(l.A,{onClick:()=>{P.back()},sx:{mr:1,p:1},children:(0,i.jsx)(h.A,{})}),(0,i.jsx)(d.default,{variant:"h5",sx:{fontWeight:600,fontSize:"1.5rem"},children:"Order Details"})]}),(0,i.jsxs)(n.default,{sx:{flex:1,overflow:"auto",pb:10,px:3,pt:2},children:[(0,i.jsxs)(o.A,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{mb:3},children:[(0,i.jsx)(d.default,{variant:"body2",color:"text.secondary",children:S.trackingNumber}),(0,i.jsx)(u.A,{label:(0,k.ps)(S.status),sx:{backgroundColor:(0,k.qY)(S.status),color:"#fff",fontWeight:"bold"}})]}),(0,i.jsxs)(n.default,{sx:{mb:3},children:[(0,i.jsx)(d.default,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Route"}),(0,i.jsxs)(o.A,{spacing:2,children:[(0,i.jsxs)(n.default,{sx:{display:"flex",alignItems:"flex-start"},children:[(0,i.jsx)(f.A,{sx:{mr:1,color:"primary.main"}}),(0,i.jsxs)(n.default,{children:[(0,i.jsx)(d.default,{variant:"body2",sx:{fontWeight:600},children:"Pickup"}),(0,i.jsx)(d.default,{variant:"body2",color:"text.secondary",children:S.pickup.address}),S.pickup.city&&(0,i.jsxs)(d.default,{variant:"caption",color:"text.secondary",children:[S.pickup.city,S.pickup.country&&", ".concat(S.pickup.country)]})]})]}),(0,i.jsxs)(n.default,{sx:{display:"flex",alignItems:"flex-start"},children:[(0,i.jsx)(f.A,{sx:{mr:1,color:"error.main"}}),(0,i.jsxs)(n.default,{children:[(0,i.jsx)(d.default,{variant:"body2",sx:{fontWeight:600},children:"Dropoff"}),(0,i.jsx)(d.default,{variant:"body2",color:"text.secondary",children:S.dropoff.address}),S.dropoff.city&&(0,i.jsxs)(d.default,{variant:"caption",color:"text.secondary",children:[S.dropoff.city,S.dropoff.country&&", ".concat(S.dropoff.country)]})]})]})]})]}),(0,i.jsx)(x.A,{sx:{my:3}}),(0,i.jsxs)(n.default,{sx:{mb:3},children:[(0,i.jsx)(d.default,{variant:"subtitle2",color:"text.secondary",sx:{mb:2},children:"Timeline"}),(0,i.jsxs)(o.A,{spacing:1.5,children:[(0,i.jsxs)(n.default,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(p.A,{sx:{fontSize:"1rem",mr:1,color:"text.secondary"}}),(0,i.jsxs)(n.default,{children:[(0,i.jsx)(d.default,{variant:"caption",color:"text.secondary",children:"Created"}),(0,i.jsx)(d.default,{variant:"body2",children:(0,C.GP)(S.createdAt,"MMM dd, yyyy HH:mm")})]})]}),(0,i.jsxs)(n.default,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(v.default,{sx:{fontSize:"1rem",mr:1,color:"text.secondary"}}),(0,i.jsxs)(n.default,{children:[(0,i.jsx)(d.default,{variant:"caption",color:"text.secondary",children:"Scheduled Pickup"}),(0,i.jsx)(d.default,{variant:"body2",children:(0,C.GP)(S.pickupDateTime,"MMM dd, yyyy HH:mm")})]})]}),S.deliveredAt&&(0,i.jsxs)(n.default,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(p.A,{sx:{fontSize:"1rem",mr:1,color:"success.main"}}),(0,i.jsxs)(n.default,{children:[(0,i.jsx)(d.default,{variant:"caption",color:"text.secondary",children:"Delivered"}),(0,i.jsx)(d.default,{variant:"body2",children:(0,C.GP)(S.deliveredAt,"MMM dd, yyyy HH:mm")})]})]}),S.cancelledAt&&(0,i.jsxs)(n.default,{sx:{display:"flex",alignItems:"center"},children:[(0,i.jsx)(p.A,{sx:{fontSize:"1rem",mr:1,color:"error.main"}}),(0,i.jsxs)(n.default,{children:[(0,i.jsx)(d.default,{variant:"caption",color:"text.secondary",children:"Cancelled"}),(0,i.jsx)(d.default,{variant:"body2",children:(0,C.GP)(S.cancelledAt,"MMM dd, yyyy HH:mm")})]})]})]})]}),(0,i.jsx)(x.A,{sx:{my:3}}),(0,i.jsxs)(n.default,{sx:{mb:3},children:[(0,i.jsx)(d.default,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Price"}),(0,i.jsxs)(d.default,{variant:"h5",sx:{fontWeight:"bold",color:"primary.main"},children:[S.price," ",S.currency]})]}),S.picker&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.A,{sx:{my:3}}),(0,i.jsxs)(n.default,{sx:{mb:3},children:[(0,i.jsx)(d.default,{variant:"subtitle2",color:"text.secondary",sx:{mb:2},children:"Picker"}),(0,i.jsxs)(o.A,{direction:"row",spacing:2,alignItems:"center",children:[(0,i.jsx)(g.H8,{type:"picker",name:S.picker.fullName,src:S.picker.avatarUrl}),(0,i.jsxs)(n.default,{sx:{flex:1},children:[(0,i.jsx)(d.default,{variant:"body1",sx:{fontWeight:600},children:S.picker.fullName}),(0,i.jsxs)(d.default,{variant:"caption",color:"text.secondary",children:["⭐ ",S.picker.rating.toFixed(1)]})]})]})]})]}),(S.receiver||S.receiverPhone)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.A,{sx:{my:3}}),(0,i.jsxs)(n.default,{sx:{mb:3},children:[(0,i.jsx)(d.default,{variant:"subtitle2",color:"text.secondary",sx:{mb:2},children:"Receiver"}),(0,i.jsx)(F.A,{receiver:{recipientId:null==(A=S.receiver)?void 0:A.id,recipientPhone:S.receiverPhone,recipientUser:S.receiver?{uid:S.receiver.id,fullName:S.receiver.fullName,avatarUrl:S.receiver.avatarUrl,rating:S.receiver.rating,isPhoneVerified:S.receiver.isPhoneVerified,isEmailVerified:S.receiver.isEmailVerified}:void 0},onContactClick:S.receiver?X:void 0,variant:"compact"})]})]}),S.notes&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.A,{sx:{my:3}}),(0,i.jsxs)(n.default,{sx:{mb:3},children:[(0,i.jsx)(d.default,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Notes"}),(0,i.jsx)(d.default,{variant:"body2",children:S.notes})]})]}),S.packageDescription&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.A,{sx:{my:3}}),(0,i.jsxs)(n.default,{sx:{mb:3},children:[(0,i.jsx)(d.default,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Package Description"}),(0,i.jsx)(d.default,{variant:"body2",children:S.packageDescription})]})]}),S.review&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.A,{sx:{my:3}}),(0,i.jsxs)(n.default,{sx:{mb:3},children:[(0,i.jsx)(d.default,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Your Review"}),(0,i.jsxs)(d.default,{variant:"body2",sx:{mb:.5},children:["⭐ ",S.review.rating,"/5"]}),S.review.comment&&(0,i.jsx)(d.default,{variant:"body2",color:"text.secondary",children:S.review.comment})]})]})]}),(0,i.jsx)(n.default,{sx:{position:"absolute",bottom:56,left:0,right:0,p:2,backgroundColor:"background.paper",borderTop:1,borderColor:"divider"},children:(0,i.jsxs)(o.A,{spacing:1,children:[ee&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.A,{severity:"info",sx:{mb:1},children:"You have been selected as the recipient. Please confirm or reject this delivery."}),(0,i.jsx)(g.$n,{variant:"contained",fullWidth:!0,onClick:J,disabled:_,children:_?"Confirming...":"Confirm Delivery"}),(0,i.jsx)(g.$n,{variant:"outlined",fullWidth:!0,onClick:Q,color:"error",disabled:_,children:_?"Rejecting...":"Reject Delivery"})]}),Z&&(null==S?void 0:S.recipientConfirmed)&&(null==S?void 0:S.status)===k.Re.PENDING&&(0,i.jsx)(c.A,{severity:"success",sx:{mb:1},children:"You have confirmed this delivery. Waiting for sender to proceed."}),(0,k.po)(S)&&(0,i.jsx)(g.$n,{variant:"contained",fullWidth:!0,onClick:K,children:"Contact Picker"}),(0,k.HX)(S)&&!ee&&(0,i.jsx)(g.$n,{variant:"outlined",fullWidth:!0,onClick:()=>{B(!0)},color:"error",children:"Cancel Order"}),(0,k.$2)(S)&&(0,i.jsx)(g.$n,{variant:"contained",fullWidth:!0,onClick:()=>{G(!0)},children:"Leave Review"}),(S.status===k.Re.COMPLETED||S.status===k.Re.CANCELLED)&&(0,i.jsx)(g.$n,{variant:"outlined",fullWidth:!0,onClick:()=>{M.toast.success("Redirecting to create new order..."),setTimeout(()=>P.push("/delivery-methods"),1e3)},startIcon:(0,i.jsx)(m.A,{}),children:"Repeat Order"})]})})]})}),(0,i.jsx)(b.default,{}),(0,i.jsx)(W,{open:q,orderTrackingNumber:S.trackingNumber,onConfirm:()=>{D({...S,status:k.Re.CANCELLED,cancelledAt:new Date}),B(!1),M.toast.success("Order cancelled successfully"),setTimeout(()=>P.push("/orders"),1500)},onCancel:()=>B(!1)}),(0,i.jsx)(N,{open:V,pickerName:(null==(w=S.picker)?void 0:w.fullName)||"Picker",onSubmit:(e,t)=>{D({...S,review:{rating:e,comment:t,createdAt:new Date}}),G(!1),M.toast.success("Review submitted successfully")},onCancel:()=>G(!1)})]})}},14140:(e,t,r)=>{"use strict";r.d(t,{j:()=>s});var i=r(23915),a=r(45404);let n=(0,i.Wp)({apiKey:"AIzaSyDiclg8XNo2L1hDBoaSoHmFMBggUKYjHH4",authDomain:"pickom-mvp.firebaseapp.com",projectId:"pickom-mvp",storageBucket:"pickom-mvp.firebasestorage.app",messagingSenderId:"168767828055",appId:"1:168767828055:web:2853961b44970c114ab312"}),s=(0,a.xI)(n)},16673:(e,t,r)=>{Promise.resolve().then(r.bind(r,11019))},21787:(e,t,r)=>{"use strict";r.d(t,{IT:()=>c,S1:()=>u,TS:()=>f,XE:()=>l,confirmRecipient:()=>x,createDeliveryRequest:()=>n,qM:()=>o,rg:()=>h,updateDeliveryRequest:()=>d,vd:()=>a,zW:()=>s});var i=r(51070);let a=async()=>i.Bb.get("/delivery/pickers"),n=async e=>i.xh.post("/delivery/requests",e),s=async()=>i.xh.get("/delivery/requests"),c=async e=>i.xh.get("/delivery/requests/".concat(e)),l=async(e,t)=>i.xh.put("/delivery/requests/".concat(e,"/status"),{status:t}),d=async(e,t)=>i.xh.patch("/delivery/requests/".concat(e),t),o=async()=>i.xh.get("/delivery/completed"),u=async()=>i.xh.get("/delivery/cancelled"),x=async(e,t)=>i.xh.put("/delivery/requests/".concat(e,"/confirm-recipient"),{confirmed:t}),h=async e=>i.xh.post("/delivery/find-receiver",{email:e}),f=async()=>i.xh.get("/delivery/incoming")},51070:(e,t,r)=>{"use strict";r.d(t,{Bb:()=>c,H$:()=>n,xh:()=>s,y3:()=>l});var i=r(23464),a=r(14140);let n=r(6267).Ii.isNativePlatform()?"http://10.0.2.2:4242":"http://localhost:4242",s=i.A.create({baseURL:n,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(async e=>{let t=a.j.currentUser;if(t)try{let r=await t.getIdToken();e.headers.Authorization="Bearer ".concat(r)}catch(e){}return e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>Promise.reject(e));let c=i.A.create({baseURL:n,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});async function l(){try{return await i.A.get("".concat(n,"/api"),{timeout:5e3}),!0}catch(e){return!1}}c.interceptors.response.use(e=>e,e=>Promise.reject(e))},70005:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var i=r(95155),a=r(54581),n=r(72705),s=r(42663),c=r(71116),l=r(37429),d=r(26290),o=r(58343);function u(e){let{receiver:t,onContactClick:r,variant:u="compact"}=e;if(t.recipientId&&t.recipientUser){let e=t.recipientUser.isPhoneVerified&&t.recipientUser.isEmailVerified;return(0,i.jsxs)(a.default,{sx:{p:2,borderRadius:2,backgroundColor:"background.paper",border:1,borderColor:"divider"},children:[(0,i.jsxs)(n.A,{direction:"row",spacing:2,alignItems:"flex-start",children:[(0,i.jsx)(s.default,{src:t.recipientUser.avatarUrl,sx:{width:"full"===u?64:48,height:"full"===u?64:48,bgcolor:"success.main",fontSize:"full"===u?"1.5rem":"1.2rem"},children:t.recipientUser.fullName.charAt(0).toUpperCase()}),(0,i.jsxs)(a.default,{sx:{flex:1},children:[(0,i.jsxs)(a.default,{sx:{display:"flex",alignItems:"center",gap:.5,mb:.5},children:[(0,i.jsx)(c.default,{variant:"full"===u?"h6":"subtitle2",sx:{fontWeight:600},children:t.recipientUser.fullName}),e&&(0,i.jsx)(l.A,{sx:{fontSize:18,color:"success.main"}})]}),(0,i.jsxs)(c.default,{variant:"body2",color:"text.secondary",children:["⭐ ","number"==typeof t.recipientUser.rating?t.recipientUser.rating.toFixed(1):"0.0"]})]})]}),r&&(0,i.jsx)(o.$n,{variant:"contained",fullWidth:!0,onClick:r,sx:{mt:2},children:"Contact Receiver"})]})}return t.recipientPhone?(0,i.jsxs)(a.default,{sx:{p:2,borderRadius:2,backgroundColor:"background.paper",border:1,borderColor:"divider"},children:[(0,i.jsxs)(n.A,{direction:"row",spacing:2,alignItems:"center",children:[(0,i.jsx)(d.default,{sx:{color:"text.secondary",fontSize:24}}),(0,i.jsxs)(a.default,{sx:{flex:1},children:[(0,i.jsx)(c.default,{variant:"caption",color:"text.secondary",children:"Receiver Phone"}),(0,i.jsx)(c.default,{variant:"body1",sx:{fontWeight:600},children:t.recipientPhone})]})]}),(0,i.jsx)(o.$n,{variant:"contained",fullWidth:!0,onClick:()=>window.open("tel:".concat(t.recipientPhone)),sx:{mt:2},startIcon:(0,i.jsx)(d.default,{}),children:"Call"})]}):null}},91204:(e,t,r)=>{"use strict";r.d(t,{$2:()=>n,HX:()=>a,Re:()=>i,dH:()=>d,po:()=>s,ps:()=>l,qY:()=>c});var i=function(e){return e.PENDING="pending",e.ACTIVE="active",e.COMPLETED="completed",e.CANCELLED="cancelled",e}({});function a(e){return"pending"===e.status||"active"===e.status}function n(e){return"completed"===e.status&&!e.review}function s(e){return"active"===e.status&&!!e.picker}function c(e){switch(e){case"pending":return"#FF9500";case"active":return"#2196F3";case"completed":return"#4CAF50";default:return"#9E9E9E"}}function l(e){switch(e){case"pending":return"Pending";case"active":return"Active";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return"Unknown"}}function d(e){let t=e.pickup.city||e.pickup.address,r=e.dropoff.city||e.dropoff.address;return"".concat(t," → ").concat(r)}},97704:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var i=r(95155),a=r(12115),n=r(35695),s=r(18407),c=r(40541),l=r(9111),d=r(26564),o=r(11335),u=r(21888),x=r(43290),h=r(60807);let f=e=>e>99?"99+":e,p=(0,a.memo)(function(){let{className:e,unreadChatsCount:t=0,activeOrdersCount:r=0,unreadNotificationsCount:p=0,userRole:v}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=(0,n.useRouter)(),y=(0,n.usePathname)(),[j,g]=(0,a.useState)(()=>localStorage.getItem("userRole"));(0,a.useEffect)(()=>{if(!v){let e=null;y.startsWith("/available-deliveries")?e="picker":y.startsWith("/delivery-methods")&&(e="sender"),e&&e!==j&&(g(e),localStorage.setItem("userRole",e))}},[y,v,j]);let b=v||j,k=(0,a.useMemo)(()=>y.startsWith("/delivery-methods")||y.startsWith("/orders")||y.startsWith("/available-deliveries")?0:y.startsWith("/chat")?1:y.startsWith("/notifications")?2:3*!!y.startsWith("/profile"),[y]),[C,A]=(0,a.useState)(k),w=(0,a.useCallback)((e,t)=>{switch(A(t),t){case 0:"picker"===b?m.push("/available-deliveries"):m.push("/delivery-methods");break;case 1:m.push("/chats");break;case 2:m.push("/notifications");break;case 3:m.push("/profile")}},[m,b]);return(0,i.jsx)(s.A,{className:e,sx:{position:"fixed",bottom:0,left:0,right:0,width:"100vw",zIndex:1200,paddingBottom:"env(safe-area-inset-bottom)",paddingLeft:0,paddingRight:0,backgroundColor:"background.paper",borderTop:1,borderColor:"divider",borderRadius:0,boxShadow:"0px -2px 4px rgba(0, 0, 0, 0.1)"},elevation:0,children:(0,i.jsxs)(c.A,{value:C,onChange:w,sx:{backgroundColor:"background.paper",width:"100%",height:"68px",paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)"},children:[(0,i.jsx)(l.A,{label:"Orders",icon:(0,i.jsx)(d.default,{badgeContent:f(r),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,i.jsx)(o.default,{})})}),(0,i.jsx)(l.A,{label:"Chat",icon:(0,i.jsx)(d.default,{badgeContent:f(t),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,i.jsx)(u.A,{})})}),(0,i.jsx)(l.A,{label:"Notifications",icon:(0,i.jsx)(d.default,{badgeContent:f(p),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,i.jsx)(x.A,{})})}),(0,i.jsx)(l.A,{label:"Profile",icon:(0,i.jsx)(h.default,{})})]})})})}},e=>{e.O(0,[3965,7225,9313,1623,3806,8534,1101,5207,8449,1190,9283,1986,7262,2649,7212,1530,2112,7269,8343,8441,5964,7358],()=>e(e.s=16673)),_N_E=e.O()}]);