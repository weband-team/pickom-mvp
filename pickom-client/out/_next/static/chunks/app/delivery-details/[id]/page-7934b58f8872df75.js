(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6509,6878,8780],{335:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var i=a(31418),r=a(95155);let l=(0,i.A)([(0,r.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,r.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule")},2295:(e,t,a)=>{Promise.resolve().then(a.bind(a,36292))},10255:(e,t,a)=>{"use strict";function i(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return i}}),a(95155),a(47650),a(85744),a(20589)},16509:(e,t,a)=>{"use strict";a.d(t,{TJ:()=>n,_z:()=>d,createChat:()=>r,iS:()=>o,m7:()=>s,ug:()=>l});var i=a(51070);let r=async e=>i.xh.post("/chat/create",e),l=async()=>i.xh.get("/chat"),s=async e=>i.xh.get("/chat/delivery/".concat(e)),n=async e=>i.xh.get("/chat/".concat(e)),d=async(e,t)=>i.xh.post("/chat/".concat(e,"/messages"),t),o=async e=>i.xh.patch("/chat/".concat(e,"/messages/mark-read"))},17828:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return i}});let i=(0,a(64054).createAsyncLocalStorage)()},36292:(e,t,a)=>{"use strict";a.d(t,{default:()=>Z});var i=a(95155),r=a(12115),l=a(54581),s=a(14426),n=a(92302),d=a(3127),o=a(71116),c=a(41101),u=a(41218),f=a(16632),x=a(71803),h=a(68534),p=a(5716),g=a(78449),j=a(36114),m=a(54492),y=a(99927),v=a(71977),b=a(38464),k=a(52836),A=a(11335),C=a(63645),w=a(64341),S=a(31418);let I=(0,S.A)((0,i.jsx)("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}),"Done");var P=a(335),_=a(11414),W=a(74802),z=a(74588),L=a(21888),O=a(57773),D=a(68558);let M=(0,S.A)((0,i.jsx)("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5zm-.5 1.5 1.96 2.5H17V9.5zM6 18c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m2.22-3c-.55-.61-1.33-1-2.22-1s-1.67.39-2.22 1H3V6h12v9zM18 18c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"LocalShippingOutlined");var R=a(69242),U=a(35695),E=a(43452),N=a(97704),T=a(21787),F=a(78780),V=a(6864),H=a(54670),B=a(70005),G=a(16509),X=a(23464);let Y=a(87358).env.NEXT_PUBLIC_API_URL||"https://pickom.qirelab.com",q=X.A.create({baseURL:Y,withCredentials:!0}),J=async(e,t)=>q.put("/traking/".concat(e,"/location"),t),K=async e=>q.get("/traking/".concat(e,"/location")),Q=(0,a(55028).default)(()=>Promise.all([a.e(9484),a.e(1761),a.e(922)]).then(a.bind(a,922)),{loadableGenerated:{webpack:()=>[922]},ssr:!1,loading:()=>(0,i.jsx)(l.default,{sx:{height:300,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"grey.100",borderRadius:1},children:(0,i.jsx)(s.default,{size:24})})});function Z(e){let{params:t}=e,a=(0,r.use)(t),S=(0,U.useRouter)(),[X,Y]=(0,r.useState)(null),[q,Z]=(0,r.useState)(null),[$,ee]=(0,r.useState)(null),[et,ea]=(0,r.useState)(null),[ei,er]=(0,r.useState)(null),[el,es]=(0,r.useState)(null),[en,ed]=(0,r.useState)(!0),[eo,ec]=(0,r.useState)(""),[eu,ef]=(0,r.useState)(!1),[ex,eh]=(0,r.useState)(!1),[ep,eg]=(0,r.useState)(0),[ej,em]=(0,r.useState)(""),[ey,ev]=(0,r.useState)(null),[eb,ek]=(0,r.useState)(!1),[eA,eC]=(0,r.useState)(!1),[ew,eS]=(0,r.useState)(null),[eI,eP]=(0,r.useState)(null),[e_,eW]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{ed(!0),ec("");try{var e,t;let i=await (0,V.HW)();er(i.user),es(i.user.role);let r=(await (0,T.IT)(Number(a.id))).data,l={id:r.id,senderId:r.senderId||"",pickerId:r.pickerId,recipientId:r.recipientId?Number(r.recipientId):void 0,recipientPhone:r.recipientPhone,title:r.title,description:r.description,fromAddress:(null==(e=r.fromLocation)?void 0:e.address)||"",toAddress:(null==(t=r.toLocation)?void 0:t.address)||"",fromLocation:r.fromLocation?{lat:r.fromLocation.lat,lng:r.fromLocation.lng}:void 0,toLocation:r.toLocation?{lat:r.toLocation.lat,lng:r.toLocation.lng}:void 0,price:r.price,size:r.size,weight:r.weight,notes:r.notes,deliveryType:r.deliveryType,packageDescription:r.description,packageImageUrl:r.packageImageUrl,status:r.status,createdAt:r.createdAt};Y(l);try{let e=(await (0,V.wz)(r.senderId)).user;if(e){let t={uid:e.uid,fullName:e.name,avatarUrl:e.avatarUrl,rating:4.8,totalOrders:45,isPhoneVerified:!!e.phone,isEmailVerified:!0,memberSince:e.createdAt,phone:e.phone,email:e.email};Z(t)}}catch(e){}if(r.pickerId)try{let e=(await (0,V.wz)(r.pickerId)).user;if(e){let t={uid:e.uid,fullName:e.name,avatarUrl:e.avatarUrl,rating:4.5,completedDeliveries:100,phone:e.phone};ee(t)}}catch(e){}if(r.recipientId)try{let e=(await (0,V.wz)(String(r.recipientId))).user;if(e){let t={uid:e.uid,fullName:e.name,avatarUrl:e.avatarUrl,rating:e.rating||0,isPhoneVerified:!!e.phone,isEmailVerified:!0};ea(t)}}catch(e){}}catch(e){ec("Failed to load delivery details. Please try again.")}finally{ed(!1)}})()},[a.id]),(0,r.useEffect)(()=>{ev(document.querySelector("[data-mobile-container]"))},[]),(0,r.useEffect)(()=>{if(X&&el&&("accepted"===X.status||"picked_up"===X.status)&&"sender"===el){let e=async()=>{try{let e=await K(X.id);e.data.pickerLocation&&(eP({lat:e.data.pickerLocation.lat,lng:e.data.pickerLocation.lng}),eW(new Date))}catch(e){console.error("Failed to fetch picker location:",e)}};e();let t=setInterval(e,15e3);return()=>clearInterval(t)}},[X,el]),(0,r.useEffect)(()=>{if(!X||"picker"!==el||"accepted"!==X.status&&"picked_up"!==X.status||X.pickerId!==(null==ei?void 0:ei.uid))return;let e=null;return(()=>{if(!navigator.geolocation)return console.error("Geolocation not supported");e=navigator.geolocation.watchPosition(async e=>{let t={lat:e.coords.latitude,lng:e.coords.longitude};try{await J(X.id,t),eP(t),eW(new Date)}catch(e){console.error("Failed to update location:",e)}},e=>{console.error("Geolocation error:",e)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:5e3})})(),()=>{null!==e&&navigator.geolocation.clearWatch(e)}},[X,el,ei]);let ez=async e=>{try{let{chatId:t}=(await (0,G.createChat)({participantId:e,deliveryId:null==X?void 0:X.id})).data;S.push("/chat/".concat(t))}catch(e){alert("Failed to open chat. Please try again.")}},eL=async()=>{if(et)try{let{chatId:e}=(await (0,G.createChat)({participantId:et.uid,deliveryId:null==X?void 0:X.id})).data;S.push("/chat/".concat(e))}catch(e){alert("Failed to open chat. Please try again.")}},eO=async()=>{if(X){ef(!0);try{await (0,F.createOffer)({deliveryId:X.id,price:ep,message:ej||void 0}),alert("Offer submitted successfully!"),eh(!1),eg(0),em("")}catch(e){alert("Failed to submit offer. Please try again.")}finally{ef(!1)}}},eD=async()=>{if(X){ef(!0);try{await (0,T.XE)(X.id,"cancelled"),alert("Delivery cancelled successfully"),ek(!1),S.push("/delivery-methods?tab=manage")}catch(e){alert("Failed to cancel delivery. Please try again.")}finally{ef(!1)}}},eM=async e=>{eS(e),eC(!0)},eR=async()=>{if(X&&ew){ef(!0);try{await (0,T.XE)(X.id,ew),Y({...X,status:ew}),alert("Status updated to ".concat("picked_up"===ew?"Picked Up":"Delivered","!")),eC(!1),eS(null),"delivered"===ew&&eE&&S.push("/rate-sender/".concat(X.id))}catch(e){alert("Failed to update status. Please try again.")}finally{ef(!1)}}};if(en)return(0,i.jsx)(l.default,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#f5f5f5"},children:(0,i.jsx)(s.default,{})});if(eo||!X)return(0,i.jsx)(l.default,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"#f5f5f5",p:2},children:(0,i.jsx)(n.A,{severity:"error",sx:{maxWidth:375},children:eo||"Delivery not found"})});let eU="sender"===el,eE="picker"===el,eN=eE&&X.pickerId===(null==ei?void 0:ei.uid);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(E.MobileContainer,{showFrame:!1,children:(0,i.jsxs)(l.default,{sx:{display:"flex",flexDirection:"column",height:"100vh",backgroundColor:"background.default"},children:[(0,i.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",gap:1,p:2,borderBottom:1,borderColor:"divider"},children:[(0,i.jsx)(d.A,{onClick:()=>{"sender"===el?S.push("/delivery-methods?tab=manage"):S.push("/available-deliveries")},size:"small",children:(0,i.jsx)(b.A,{})}),(0,i.jsxs)(o.default,{variant:"h6",sx:{fontWeight:600,flex:1},children:["Delivery #",X.id]}),(0,i.jsx)(c.A,{label:(e=>{switch(e){case"pending":return"Pending";case"accepted":return"Accepted";case"picked_up":return"Picked Up";case"delivered":return"Delivered";case"cancelled":return"Cancelled";default:return e}})(X.status),size:"small",color:(e=>{switch(e){case"pending":return"warning";case"accepted":return"info";case"picked_up":return"primary";case"delivered":return"success";case"cancelled":return"error";default:return"default"}})(X.status),sx:{fontWeight:600}})]}),(0,i.jsxs)(l.default,{sx:{flex:1,overflowY:"auto",pb:2},children:[(0,i.jsx)(u.A,{sx:{m:2,boxShadow:1},children:(0,i.jsxs)(f.A,{children:[(0,i.jsx)(o.default,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Route Details"}),(0,i.jsxs)(l.default,{sx:{display:"flex",alignItems:"flex-start",gap:1.5,mb:2},children:[(0,i.jsx)(k.A,{sx:{color:"success.main",mt:.5}}),(0,i.jsxs)(l.default,{children:[(0,i.jsx)(o.default,{variant:"caption",color:"text.secondary",children:"Pickup"}),(0,i.jsx)(o.default,{variant:"body2",sx:{fontWeight:500},children:X.fromAddress})]})]}),(0,i.jsxs)(l.default,{sx:{display:"flex",alignItems:"flex-start",gap:1.5,mb:2},children:[(0,i.jsx)(k.A,{sx:{color:"error.main",mt:.5}}),(0,i.jsxs)(l.default,{children:[(0,i.jsx)(o.default,{variant:"caption",color:"text.secondary",children:"Dropoff"}),(0,i.jsx)(o.default,{variant:"body2",sx:{fontWeight:500},children:X.toAddress})]})]}),X.packageDescription&&(0,i.jsxs)(l.default,{sx:{display:"flex",alignItems:"flex-start",gap:1.5,mb:2},children:[(0,i.jsx)(A.default,{sx:{color:"text.secondary",mt:.5}}),(0,i.jsxs)(l.default,{children:[(0,i.jsx)(o.default,{variant:"caption",color:"text.secondary",children:"Package"}),(0,i.jsx)(o.default,{variant:"body2",sx:{fontWeight:500},children:X.packageDescription})]})]}),X.packageImageUrl&&(0,i.jsxs)(l.default,{sx:{mb:2},children:[(0,i.jsx)(o.default,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:"Package Image"}),(0,i.jsx)(l.default,{component:"img",src:X.packageImageUrl,alt:"Package",sx:{width:"100%",maxHeight:300,objectFit:"contain",borderRadius:1,border:1,borderColor:"divider"}})]}),(0,i.jsxs)(l.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,pt:2,borderTop:1,borderColor:"divider"},children:[(0,i.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(C.A,{sx:{color:"primary.main"}}),(0,i.jsxs)(o.default,{variant:"h6",sx:{color:"primary.main",fontWeight:"bold"},children:[X.price," zł"]})]}),(0,i.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,i.jsx)(w.A,{sx:{fontSize:16,color:"text.secondary"}}),(0,i.jsx)(o.default,{variant:"caption",color:"text.secondary",children:new Date(X.createdAt).toLocaleDateString()})]})]})]})}),(0,i.jsx)(u.A,{sx:{m:2,boxShadow:1},children:(0,i.jsxs)(f.A,{children:[(0,i.jsx)(o.default,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Delivery Progress"}),(0,i.jsxs)(l.default,{sx:{position:"relative",pl:3},children:[(0,i.jsx)(l.default,{sx:{position:"absolute",left:11,top:12,bottom:12,width:2,bgcolor:"divider"}}),(0,i.jsxs)(l.default,{sx:{display:"flex",alignItems:"flex-start",mb:2,position:"relative"},children:[(0,i.jsx)(l.default,{sx:{position:"absolute",left:-19,width:24,height:24,borderRadius:"50%",bgcolor:"cancelled"!==X.status?"success.main":"grey.400",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(I,{sx:{fontSize:14,color:"white"}})}),(0,i.jsxs)(l.default,{children:[(0,i.jsx)(o.default,{variant:"body2",sx:{fontWeight:600},children:"Created"}),(0,i.jsx)(o.default,{variant:"caption",color:"text.secondary",children:new Date(X.createdAt).toLocaleString()})]})]}),(0,i.jsxs)(l.default,{sx:{display:"flex",alignItems:"flex-start",mb:2,position:"relative"},children:[(0,i.jsx)(l.default,{sx:{position:"absolute",left:-19,width:24,height:24,borderRadius:"50%",bgcolor:["accepted","picked_up","delivered"].includes(X.status)?"success.main":"grey.300",display:"flex",alignItems:"center",justifyContent:"center"},children:["accepted","picked_up","delivered"].includes(X.status)?(0,i.jsx)(I,{sx:{fontSize:14,color:"white"}}):(0,i.jsx)(P.A,{sx:{fontSize:14,color:"grey.500"}})}),(0,i.jsxs)(l.default,{children:[(0,i.jsx)(o.default,{variant:"body2",sx:{fontWeight:["accepted","picked_up","delivered"].includes(X.status)?600:400,color:["accepted","picked_up","delivered"].includes(X.status)?"text.primary":"text.secondary"},children:"Accepted by Picker"}),["accepted","picked_up","delivered"].includes(X.status)&&(0,i.jsx)(o.default,{variant:"caption",color:"text.secondary",children:"Picker assigned"})]})]}),(0,i.jsxs)(l.default,{sx:{display:"flex",alignItems:"flex-start",mb:2,position:"relative"},children:[(0,i.jsx)(l.default,{sx:{position:"absolute",left:-19,width:24,height:24,borderRadius:"50%",bgcolor:["picked_up","delivered"].includes(X.status)?"success.main":"grey.300",display:"flex",alignItems:"center",justifyContent:"center"},children:["picked_up","delivered"].includes(X.status)?(0,i.jsx)(I,{sx:{fontSize:14,color:"white"}}):(0,i.jsx)(A.default,{sx:{fontSize:14,color:"grey.500"}})}),(0,i.jsxs)(l.default,{children:[(0,i.jsx)(o.default,{variant:"body2",sx:{fontWeight:["picked_up","delivered"].includes(X.status)?600:400,color:["picked_up","delivered"].includes(X.status)?"text.primary":"text.secondary"},children:"Picked Up"}),["picked_up","delivered"].includes(X.status)&&(0,i.jsx)(o.default,{variant:"caption",color:"text.secondary",children:"Package collected"})]})]}),(0,i.jsxs)(l.default,{sx:{display:"flex",alignItems:"flex-start",mb:2,position:"relative"},children:[(0,i.jsx)(l.default,{sx:{position:"absolute",left:-19,width:24,height:24,borderRadius:"50%",bgcolor:"picked_up"===X.status?"primary.main":"delivered"===X.status?"success.main":"grey.300",display:"flex",alignItems:"center",justifyContent:"center"},children:"delivered"===X.status?(0,i.jsx)(I,{sx:{fontSize:14,color:"white"}}):"picked_up"===X.status?(0,i.jsx)(_.A,{sx:{fontSize:14,color:"white"}}):(0,i.jsx)(_.A,{sx:{fontSize:14,color:"grey.500"}})}),(0,i.jsxs)(l.default,{children:[(0,i.jsx)(o.default,{variant:"body2",sx:{fontWeight:"picked_up"===X.status||"delivered"===X.status?600:400,color:"picked_up"===X.status||"delivered"===X.status?"text.primary":"text.secondary"},children:"In Transit"}),"picked_up"===X.status&&(0,i.jsx)(o.default,{variant:"caption",color:"primary.main",children:"On the way..."})]})]}),(0,i.jsxs)(l.default,{sx:{display:"flex",alignItems:"flex-start",position:"relative"},children:[(0,i.jsx)(l.default,{sx:{position:"absolute",left:-19,width:24,height:24,borderRadius:"50%",bgcolor:"delivered"===X.status?"success.main":"grey.300",display:"flex",alignItems:"center",justifyContent:"center"},children:"delivered"===X.status?(0,i.jsx)(W.default,{sx:{fontSize:14,color:"white"}}):(0,i.jsx)(W.default,{sx:{fontSize:14,color:"grey.500"}})}),(0,i.jsxs)(l.default,{children:[(0,i.jsx)(o.default,{variant:"body2",sx:{fontWeight:"delivered"===X.status?600:400,color:"delivered"===X.status?"success.main":"text.secondary"},children:"Delivered"}),"delivered"===X.status&&(0,i.jsx)(o.default,{variant:"caption",color:"success.main",children:"Package delivered!"})]})]}),"cancelled"===X.status&&(0,i.jsxs)(l.default,{sx:{display:"flex",alignItems:"flex-start",mt:2,position:"relative"},children:[(0,i.jsx)(l.default,{sx:{position:"absolute",left:-19,width:24,height:24,borderRadius:"50%",bgcolor:"error.main",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(z.A,{sx:{fontSize:14,color:"white"}})}),(0,i.jsxs)(l.default,{children:[(0,i.jsx)(o.default,{variant:"body2",sx:{fontWeight:600,color:"error.main"},children:"Cancelled"}),(0,i.jsx)(o.default,{variant:"caption",color:"text.secondary",children:"Delivery was cancelled"})]})]})]})]})}),("accepted"===X.status||"picked_up"===X.status)&&(0,i.jsx)(u.A,{sx:{m:2,boxShadow:1},children:(0,i.jsxs)(f.A,{children:[(0,i.jsx)(o.default,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Live Tracking"}),(0,i.jsx)(Q,{pickupLocation:X.fromLocation,dropoffLocation:X.toLocation,pickerLocation:eI||X.pickerLocation,pickerName:null==$?void 0:$.fullName,status:X.status,userRole:el,fromAddress:X.fromAddress,toAddress:X.toAddress}),e_&&(0,i.jsxs)(o.default,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:1,textAlign:"center"},children:["Last updated: ",e_.toLocaleTimeString()]})]})}),eU&&$&&(0,i.jsxs)(l.default,{sx:{m:2},children:[(0,i.jsx)(o.default,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:"Picker Information"}),(0,i.jsx)(u.A,{children:(0,i.jsx)(f.A,{children:(0,i.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,i.jsx)(l.default,{sx:{width:60,height:60,borderRadius:"50%",backgroundColor:"primary.light",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(o.default,{variant:"h5",children:$.fullName[0]})}),(0,i.jsxs)(l.default,{sx:{flex:1},children:[(0,i.jsx)(o.default,{variant:"subtitle1",sx:{fontWeight:600},children:$.fullName}),(0,i.jsxs)(o.default,{variant:"body2",color:"text.secondary",children:["⭐ ",$.rating," • ",$.completedDeliveries," deliveries"]})]}),(0,i.jsx)(d.A,{onClick:()=>ez($.uid),children:(0,i.jsx)(L.A,{})})]})})})]}),eE&&q&&(0,i.jsxs)(l.default,{sx:{m:2},children:[(0,i.jsx)(o.default,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:"Sender Information"}),(0,i.jsx)(H.A,{sender:q,variant:"full"})]}),eE&&(et||(null==X?void 0:X.recipientPhone))&&(0,i.jsxs)(l.default,{sx:{m:2},children:[(0,i.jsx)(o.default,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:"Receiver Information"}),(0,i.jsx)(B.A,{receiver:{recipientId:null==et?void 0:et.uid,recipientPhone:null==X?void 0:X.recipientPhone,recipientUser:et?{uid:et.uid,fullName:et.fullName,avatarUrl:et.avatarUrl,rating:et.rating,isPhoneVerified:et.isPhoneVerified,isEmailVerified:et.isEmailVerified}:void 0},onContactClick:et?eL:void 0,variant:"compact"})]})]}),(0,i.jsx)(l.default,{sx:{p:2,backgroundColor:"background.paper",borderTop:1,borderColor:"divider",boxShadow:"0 -2px 8px rgba(0,0,0,0.1)",pb:8},children:(0,i.jsxs)(x.A,{spacing:1.5,children:[eU&&"pending"===X.status&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.A,{variant:"outlined",onClick:()=>S.push("/delivery-methods/".concat(X.id,"/offers")),fullWidth:!0,startIcon:(0,i.jsx)(O.A,{}),children:"View Offers"}),(0,i.jsx)(h.A,{variant:"outlined",color:"error",onClick:()=>ek(!0),fullWidth:!0,startIcon:(0,i.jsx)(z.A,{}),children:"Cancel Delivery"})]}),eU&&("accepted"===X.status||"picked_up"===X.status)&&$&&(0,i.jsx)(h.A,{variant:"outlined",onClick:()=>ez($.uid),fullWidth:!0,startIcon:(0,i.jsx)(L.A,{}),children:"Chat with Picker"}),eU&&"delivered"===X.status&&$&&(0,i.jsx)(h.A,{variant:"contained",color:"primary",onClick:()=>S.push("/rate-picker/".concat(X.id)),fullWidth:!0,startIcon:(0,i.jsx)(D.default,{}),children:"Rate Picker"}),eE&&!eN&&"pending"===X.status&&(0,i.jsxs)(i.Fragment,{children:[q&&(0,i.jsx)(h.A,{variant:"outlined",onClick:()=>ez(q.uid),fullWidth:!0,startIcon:(0,i.jsx)(L.A,{}),children:"Chat with Sender"}),(0,i.jsx)(h.A,{variant:"outlined",color:"secondary",onClick:()=>{eg((null==X?void 0:X.price)||0),eh(!0)},fullWidth:!0,startIcon:(0,i.jsx)(O.A,{}),children:"Make an Offer"})]}),eN&&"accepted"===X.status&&(0,i.jsxs)(i.Fragment,{children:[q&&(0,i.jsx)(h.A,{variant:"outlined",onClick:()=>ez(q.uid),fullWidth:!0,startIcon:(0,i.jsx)(L.A,{}),children:"Chat with Sender"}),(0,i.jsx)(h.A,{variant:"contained",color:"primary",onClick:()=>eM("picked_up"),fullWidth:!0,startIcon:(0,i.jsx)(M,{}),children:"Mark as Picked Up"})]}),eN&&"picked_up"===X.status&&(0,i.jsxs)(i.Fragment,{children:[q&&(0,i.jsx)(h.A,{variant:"outlined",onClick:()=>ez(q.uid),fullWidth:!0,startIcon:(0,i.jsx)(L.A,{}),children:"Chat with Sender"}),(0,i.jsx)(h.A,{variant:"contained",color:"success",onClick:()=>eM("delivered"),fullWidth:!0,startIcon:(0,i.jsx)(W.default,{}),children:"Mark as Delivered"})]})]})})]})}),(0,i.jsx)(N.default,{}),(0,i.jsxs)(p.A,{anchor:"bottom",open:ex,onClose:()=>!eu&&eh(!1),onOpen:()=>{},disableSwipeToOpen:!0,disablePortal:!0,container:ey,ModalProps:{keepMounted:!1},PaperProps:{sx:{maxHeight:"90vh",maxWidth:"375px",margin:"0 auto",borderTopLeftRadius:16,borderTopRightRadius:16,backgroundColor:"background.paper"}},children:[(0,i.jsx)(()=>(0,i.jsx)(l.default,{sx:{width:40,height:4,backgroundColor:"action.disabled",borderRadius:2,position:"absolute",top:8,left:"calc(50% - 20px)"}}),{}),(0,i.jsxs)(l.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:3,pt:3,pb:1},children:[(0,i.jsx)(o.default,{variant:"h6",sx:{fontWeight:600},children:"Make an Offer"}),(0,i.jsx)(d.A,{onClick:()=>eh(!1),size:"small",disabled:eu,children:(0,i.jsx)(R.A,{})})]}),(0,i.jsx)(l.default,{sx:{px:3,pb:2,overflowY:"auto"},children:(0,i.jsxs)(l.default,{sx:{pt:1},children:[(0,i.jsxs)(o.default,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["Current price: ",(0,i.jsxs)("strong",{children:[X.price," zł"]})]}),(0,i.jsx)(g.default,{label:"Your Price (zł)",type:"number",fullWidth:!0,value:ep,onChange:e=>eg(Number(e.target.value)),sx:{mb:2},inputProps:{min:0,step:.01},disabled:eu}),(0,i.jsx)(g.default,{label:"Message (optional)",multiline:!0,rows:3,fullWidth:!0,value:ej,onChange:e=>em(e.target.value),placeholder:"Add a message to the sender...",disabled:eu})]})}),(0,i.jsxs)(l.default,{sx:{px:3,py:2,borderTop:1,borderColor:"divider",display:"flex",gap:2},children:[(0,i.jsx)(h.A,{onClick:()=>eh(!1),disabled:eu,variant:"outlined",fullWidth:!0,children:"Cancel"}),(0,i.jsx)(h.A,{onClick:eO,variant:"contained",disabled:eu||ep<=0,fullWidth:!0,children:eu?"Submitting...":"Submit Offer"})]})]}),(0,i.jsxs)(j.A,{open:eb,onClose:()=>!eu&&ek(!1),maxWidth:"xs",fullWidth:!0,children:[(0,i.jsx)(m.A,{children:"Cancel Delivery?"}),(0,i.jsx)(y.A,{children:(0,i.jsxs)(o.default,{variant:"body2",children:["Are you sure you want to cancel delivery #",X.id,"?"]})}),(0,i.jsxs)(v.A,{children:[(0,i.jsx)(h.A,{onClick:()=>ek(!1),disabled:eu,children:"No"}),(0,i.jsx)(h.A,{onClick:eD,variant:"contained",color:"error",disabled:eu,children:eu?"Cancelling...":"Yes, Cancel"})]})]}),(0,i.jsxs)(j.A,{open:eA,onClose:()=>!eu&&eC(!1),maxWidth:"xs",fullWidth:!0,children:[(0,i.jsx)(m.A,{children:"Update Status?"}),(0,i.jsx)(y.A,{children:(0,i.jsxs)(o.default,{variant:"body2",children:["Mark delivery as ","picked_up"===ew?"Picked Up":"Delivered","?"]})}),(0,i.jsxs)(v.A,{children:[(0,i.jsx)(h.A,{onClick:()=>{eC(!1),eS(null)},disabled:eu,children:"Cancel"}),(0,i.jsx)(h.A,{onClick:eR,variant:"contained",color:"delivered"===ew?"success":"primary",disabled:eu,children:eu?"Updating...":"Confirm"})]})]})]})}},36645:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let i=a(88229)._(a(67357));function r(e,t){var a;let r={};"function"==typeof e&&(r.loader=e);let l={...r,...t};return(0,i.default)({...l,modules:null==(a=l.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},38464:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var i=a(31418),r=a(95155);let l=(0,i.A)((0,r.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},54670:(e,t,a)=>{"use strict";a.d(t,{A:()=>x});var i=a(95155),r=a(54581),l=a(71803),s=a(42663),n=a(71116),d=a(41101),o=a(37429),c=a(26290),u=a(2582),f=a(64341);function x(e){let{sender:t,variant:a="compact",showContact:x=!1}=e,h=t.isPhoneVerified&&t.isEmailVerified;return(0,i.jsx)(r.default,{sx:{p:2,borderRadius:2,backgroundColor:"background.paper",border:1,borderColor:"divider"},children:(0,i.jsxs)(l.A,{direction:"row",spacing:2,alignItems:"flex-start",children:[(0,i.jsx)(s.default,{src:t.avatarUrl,sx:{width:"full"===a?64:48,height:"full"===a?64:48,bgcolor:"primary.main",fontSize:"full"===a?"1.5rem":"1.2rem"},children:t.fullName.charAt(0).toUpperCase()}),(0,i.jsxs)(r.default,{sx:{flex:1},children:[(0,i.jsxs)(r.default,{sx:{display:"flex",alignItems:"center",gap:.5,mb:.5},children:[(0,i.jsx)(n.default,{variant:"full"===a?"h6":"subtitle2",sx:{fontWeight:600},children:t.fullName}),h&&(0,i.jsx)(o.A,{sx:{fontSize:18,color:"primary.main"}})]}),(0,i.jsxs)(n.default,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["⭐ ",t.rating.toFixed(1)," • ",t.totalOrders," ",1===t.totalOrders?"order":"orders"]}),(0,i.jsxs)(r.default,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:1},children:[t.isPhoneVerified&&(0,i.jsx)(d.A,{icon:(0,i.jsx)(c.default,{sx:{fontSize:14}}),label:"Phone",size:"small",color:"success",variant:"outlined",sx:{height:24,fontSize:"0.7rem"}}),t.isEmailVerified&&(0,i.jsx)(d.A,{icon:(0,i.jsx)(u.default,{sx:{fontSize:14}}),label:"Email",size:"small",color:"success",variant:"outlined",sx:{height:24,fontSize:"0.7rem"}})]}),"full"===a&&(0,i.jsxs)(r.default,{sx:{display:"flex",alignItems:"center",gap:.5,mt:1},children:[(0,i.jsx)(f.A,{sx:{fontSize:14,color:"text.secondary"}}),(0,i.jsxs)(n.default,{variant:"caption",color:"text.secondary",children:["Member since ",new Date(t.memberSince).toLocaleDateString("en-US",{month:"short",year:"numeric"})]})]}),x&&"full"===a&&(0,i.jsxs)(r.default,{sx:{mt:2,pt:2,borderTop:1,borderColor:"divider"},children:[(0,i.jsx)(n.default,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:"Contact Information"}),t.phone&&(0,i.jsxs)(r.default,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[(0,i.jsx)(c.default,{sx:{fontSize:16,color:"text.secondary"}}),(0,i.jsx)(n.default,{variant:"body2",children:t.phone})]}),t.email&&(0,i.jsxs)(r.default,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,i.jsx)(u.default,{sx:{fontSize:16,color:"text.secondary"}}),(0,i.jsx)(n.default,{variant:"body2",children:t.email})]})]})]})]})})}},55028:(e,t,a)=>{"use strict";a.d(t,{default:()=>r.a});var i=a(36645),r=a.n(i)},57773:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var i=a(31418),r=a(95155);let l=(0,i.A)((0,r.jsx)("path",{d:"m21.41 11.58-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58s1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41s-.23-1.06-.59-1.42M5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7"}),"LocalOffer")},62146:(e,t,a)=>{"use strict";function i(e){let{reason:t,children:a}=e;return a}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return i}}),a(45262)},63645:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var i=a(31418),r=a(95155);let l=(0,i.A)((0,r.jsx)("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoney")},64054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{bindSnapshot:function(){return s},createAsyncLocalStorage:function(){return l},createSnapshot:function(){return n}});let a=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class i{disable(){throw a}getStore(){}run(){throw a}exit(){throw a}enterWith(){throw a}static bind(e){return e}}let r="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function l(){return r?new r:new i}function s(e){return r?r.bind(e):i.bind(e)}function n(){return r?r.snapshot():function(e,...t){return e(...t)}}},67357:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let i=a(95155),r=a(12115),l=a(62146);function s(e){return{default:e&&"default"in e?e.default:e}}a(10255);let n={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},d=function(e){let t={...n,...e},a=(0,r.lazy)(()=>t.loader().then(s)),d=t.loading;function o(e){let s=d?(0,i.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,n=!t.ssr||!!t.loading,o=n?r.Suspense:r.Fragment,c=t.ssr?(0,i.jsxs)(i.Fragment,{children:[null,(0,i.jsx)(a,{...e})]}):(0,i.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,i.jsx)(a,{...e})});return(0,i.jsx)(o,{...n?{fallback:s}:{},children:c})}return o.displayName="LoadableComponent",o}},78780:(e,t,a)=>{"use strict";a.d(t,{F8:()=>l,aT:()=>n,createOffer:()=>r,i6:()=>s});var i=a(51070);let r=async e=>i.xh.post("/offers",e),l=async e=>i.xh.get("/offers/delivery/".concat(e)),s=async(e,t)=>i.xh.patch("/offers/".concat(e),t),n=async()=>i.xh.get("/offers/my")},85744:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return i.workAsyncStorageInstance}});let i=a(17828)}},e=>{e.O(0,[3965,7225,3964,8202,6592,8534,7844,1101,5207,8652,8449,1190,7615,1986,2649,7212,5394,8523,8343,9267,8441,5964,7358],()=>e(e.s=2295)),_N_E=e.O()}]);