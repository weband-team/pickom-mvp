"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5409,6509,8780],{6864:(e,t,a)=>{a.d(t,{$H:()=>o,HW:()=>n,TK:()=>i,op:()=>c,wz:()=>s});var r=a(51070);let s=async e=>(await r.xh.get("/user/".concat(e))).data,i=async(e,t)=>(await r.xh.put("/user/".concat(e),t)).data,n=async()=>(await r.xh.get("/auth/me")).data,o=async(e,t)=>(await r.xh.put("/user/".concat(e,"/online-status"),{isOnline:t})).data,c=async e=>(await r.xh.get("/user/".concat(e,"/balance"))).data},14140:(e,t,a)=>{a.d(t,{j:()=>n});var r=a(23915),s=a(45404);let i=(0,r.Wp)({apiKey:"AIzaSyDiclg8XNo2L1hDBoaSoHmFMBggUKYjHH4",authDomain:"pickom-mvp.firebaseapp.com",projectId:"pickom-mvp",storageBucket:"pickom-mvp.firebasestorage.app",messagingSenderId:"168767828055",appId:"1:168767828055:web:2853961b44970c114ab312"}),n=(0,s.xI)(i)},16509:(e,t,a)=>{a.d(t,{TJ:()=>o,_z:()=>c,createChat:()=>s,iS:()=>l,m7:()=>n,ug:()=>i});var r=a(51070);let s=async e=>r.xh.post("/chat/create",e),i=async()=>r.xh.get("/chat"),n=async e=>r.xh.get("/chat/delivery/".concat(e)),o=async e=>r.xh.get("/chat/".concat(e)),c=async(e,t)=>r.xh.post("/chat/".concat(e,"/messages"),t),l=async e=>r.xh.patch("/chat/".concat(e,"/messages/mark-read"))},21787:(e,t,a)=>{a.d(t,{IT:()=>c,S1:()=>h,TS:()=>f,XE:()=>l,confirmRecipient:()=>x,createDeliveryRequest:()=>n,fI:()=>i,qM:()=>u,rg:()=>p,updateDeliveryRequest:()=>d,vd:()=>s,zW:()=>o});var r=a(51070);let s=async()=>r.Bb.get("/delivery/pickers"),i=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"within-city";return r.Bb.get("/delivery/pickers/nearby?lat=".concat(e,"&lng=").concat(t,"&deliveryType=").concat(a))},n=async e=>r.xh.post("/delivery/requests",e),o=async()=>r.xh.get("/delivery/requests"),c=async e=>r.xh.get("/delivery/requests/".concat(e)),l=async(e,t)=>r.xh.put("/delivery/requests/".concat(e,"/status"),{status:t}),d=async(e,t)=>r.xh.patch("/delivery/requests/".concat(e),t),u=async()=>r.xh.get("/delivery/completed"),h=async()=>r.xh.get("/delivery/cancelled"),x=async(e,t)=>r.xh.put("/delivery/requests/".concat(e,"/confirm-recipient"),{confirmed:t}),p=async e=>r.xh.post("/delivery/find-receiver",{email:e}),f=async()=>r.xh.get("/delivery/incoming")},28069:(e,t,a)=>{a.d(t,{Nq:()=>c,c4:()=>i,mH:()=>o,mg:()=>n,vx:()=>l});var r=a(51070),s=a(14140);let i=async()=>{let e=s.j.currentUser;return e?await e.getIdToken():null},n=async e=>r.Bb.post("/auth/login",{},{headers:{Authorization:"Bearer ".concat(e)}}),o=async(e,t,a,s)=>r.Bb.post("/auth/register",{role:e,phone:a,name:s},{headers:{Authorization:"Bearer ".concat(t)}}),c=async()=>r.xh.get("/auth/me"),l=async()=>r.xh.post("/auth/logout")},43452:(e,t,a)=>{a.d(t,{MobileContainer:()=>o});var r=a(95155);a(12115);var s=a(54581),i=a(18407),n=a(35695);let o=e=>{let{children:t,width:a=375,height:o=812,showFrame:c=!0,backgroundColor:l,showBottomNav:d=!0}=e,u=(0,n.usePathname)(),h=(null==u?void 0:u.includes("/login"))||(null==u?void 0:u.includes("/register")),x=d&&!h;return c?(0,r.jsx)(s.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",padding:3,backgroundColor:"#f5f5f5"},children:(0,r.jsx)(i.A,{elevation:3,sx:{width:a,height:x?"calc(".concat(o,"px - 70px)"):o,borderRadius:6,overflow:"hidden",position:"relative",bgcolor:l||"background.default",border:"8px solid #000000","&::before":{content:'""',position:"absolute",top:12,left:"50%",transform:"translateX(-50%)",width:134,height:6,backgroundColor:"#000000",borderRadius:3,zIndex:1},"&::after":{content:'""',position:"absolute",bottom:8,left:"50%",transform:"translateX(-50%)",width:134,height:5,backgroundColor:"#000000",borderRadius:2.5,zIndex:1}},children:(0,r.jsx)(s.default,{"data-mobile-container":!0,sx:{width:"100%",height:"100%",paddingTop:"calc(24px + var(--safe-area-top))",overflow:"auto",position:"relative","&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"},children:(0,r.jsx)(s.default,{sx:{paddingBottom:"calc(16px + var(--safe-area-bottom))",minHeight:"100%"},children:t})})})}):(0,r.jsx)(s.default,{"data-mobile-container":!0,sx:{width:"100vw",height:"100vh",bgcolor:l||"background.default",overflow:"hidden",position:"fixed",left:0,right:0,bottom:0,pt:"env(safe-area-inset-top)",pb:x?"68px":0,margin:0,"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"},children:(0,r.jsx)(s.default,{sx:{width:"100%",height:"100%",overflow:"auto",margin:0,padding:0,"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"},children:t})})}},47075:(e,t,a)=>{a.d(t,{A:()=>v});var r=a(95155),s=a(54581),i=a(41101),n=a(71116),o=a(74964),c=a(71803),l=a(68534),d=a(63645),u=a(21888),h=a(74802),x=a(74588),p=a(42663),f=a(77262),g=a(37429),b=a(11414);function m(e){let{picker:t,variant:a="compact"}=e,o=t.trustLevel||0;return(0,r.jsx)(s.default,{sx:{p:2,borderRadius:2,backgroundColor:"background.paper",border:1,borderColor:"divider"},children:(0,r.jsxs)(c.A,{direction:"row",spacing:2,alignItems:"flex-start",children:[(0,r.jsx)(p.default,{src:t.avatarUrl,sx:{width:"full"===a?64:48,height:"full"===a?64:48,fontSize:"full"===a?"1.5rem":"1.2rem"},children:t.fullName.charAt(0).toUpperCase()}),(0,r.jsxs)(s.default,{sx:{flex:1},children:[(0,r.jsxs)(s.default,{sx:{display:"flex",alignItems:"center",gap:.5,mb:.5},children:[(0,r.jsx)(n.default,{variant:"full"===a?"h6":"subtitle2",sx:{fontWeight:600},children:t.fullName}),t.isVerified&&(0,r.jsx)(g.A,{sx:{fontSize:18,color:"primary.main"}})]}),(0,r.jsxs)(n.default,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["⭐ ",t.rating.toFixed(1)," (",t.reviewCount," ",1===t.reviewCount?"review":"reviews",")"]}),(0,r.jsxs)(c.A,{direction:"row",spacing:1,sx:{mb:1,flexWrap:"wrap",gap:.5},children:[t.vehicle&&(0,r.jsx)(i.A,{icon:(0,r.jsx)(b.A,{sx:{fontSize:14}}),label:t.vehicle,size:"small",color:"info",variant:"outlined",sx:{height:24,fontSize:"0.7rem"}}),(0,r.jsx)(i.A,{icon:(0,r.jsx)(h.default,{sx:{fontSize:14}}),label:"".concat(t.completedDeliveries," ").concat(1===t.completedDeliveries?"delivery":"deliveries"),size:"small",color:"success",variant:"outlined",sx:{height:24,fontSize:"0.7rem"}})]}),"full"===a&&o>0&&(0,r.jsxs)(s.default,{sx:{mt:2},children:[(0,r.jsxs)(s.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[(0,r.jsx)(n.default,{variant:"caption",color:"text.secondary",children:"Trust Level"}),(0,r.jsxs)(n.default,{variant:"caption",sx:{fontWeight:600,color:o>=80?"success.main":"warning.main"},children:[o,"%"]})]}),(0,r.jsx)(f.default,{variant:"determinate",value:o,sx:{height:6,borderRadius:3,backgroundColor:"action.hover","& .MuiLinearProgress-bar":{backgroundColor:o>=80?"success.main":o>=50?"warning.main":"error.main",borderRadius:3}}})]})]})]})})}function v(e){let{offer:t,picker:a,originalPrice:p,onChat:f,onAccept:g,onReject:b,disabled:v=!1}=e,y=t.price-p,j=(y/p*100).toFixed(0),w="pending"===t.status;return(0,r.jsxs)(s.default,{sx:{p:2,mb:2,borderRadius:2,backgroundColor:"background.paper",border:2,borderColor:"accepted"===t.status?"success.main":"rejected"===t.status?"error.light":"divider",opacity:"rejected"===t.status?.7:1,transition:"all 0.2s"},children:[(0,r.jsxs)(s.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,r.jsx)(i.A,{label:(e=>{switch(e){case"pending":return"Pending";case"accepted":return"Accepted";case"rejected":return"Rejected";default:return e}})(t.status),size:"small",color:(e=>{switch(e){case"pending":return"warning";case"accepted":return"success";case"rejected":return"error";default:return"default"}})(t.status),sx:{fontWeight:600}}),(0,r.jsx)(n.default,{variant:"caption",color:"text.secondary",children:new Date(t.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,r.jsx)(m,{picker:a,variant:"full"}),(0,r.jsx)(o.A,{sx:{my:2}}),(0,r.jsxs)(s.default,{sx:{mb:2},children:[(0,r.jsx)(n.default,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1},children:"Price Comparison"}),(0,r.jsxs)(c.A,{direction:"row",spacing:2,alignItems:"center",children:[(0,r.jsxs)(s.default,{children:[(0,r.jsx)(n.default,{variant:"caption",color:"text.secondary",children:"Offered Price"}),(0,r.jsxs)(s.default,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,r.jsx)(d.A,{sx:{fontSize:20,color:"primary.main"}}),(0,r.jsxs)(n.default,{variant:"h6",sx:{color:"primary.main",fontWeight:"bold"},children:[t.price," zł"]})]})]}),(0,r.jsxs)(s.default,{children:[(0,r.jsx)(n.default,{variant:"caption",color:"text.secondary",children:"Your Price"}),(0,r.jsxs)(n.default,{variant:"body2",sx:{fontWeight:500},children:[p," zł"]})]}),0!==y&&(0,r.jsx)(i.A,{label:"".concat(y>0?"+":"").concat(j,"%"),size:"small",color:y<0?"success":"warning",sx:{height:24,fontSize:"0.7rem"}})]})]}),t.message&&(0,r.jsxs)(s.default,{sx:{p:1.5,mb:2,borderRadius:1,backgroundColor:"action.hover",borderLeft:3,borderColor:"primary.main"},children:[(0,r.jsx)(n.default,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:.5},children:"Message from picker"}),(0,r.jsxs)(n.default,{variant:"body2",sx:{fontStyle:"italic"},children:['"',t.message,'"']})]}),(0,r.jsxs)(c.A,{direction:"row",spacing:1,children:[(0,r.jsx)(l.A,{variant:"outlined",startIcon:(0,r.jsx)(u.A,{}),onClick:f,disabled:v,fullWidth:!0,sx:{textTransform:"none"},children:"Chat"}),w&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{variant:"contained",color:"success",startIcon:(0,r.jsx)(h.default,{}),onClick:g,disabled:v,fullWidth:!0,sx:{textTransform:"none",fontWeight:600},children:"Accept"}),(0,r.jsx)(l.A,{variant:"outlined",color:"error",startIcon:(0,r.jsx)(x.A,{}),onClick:b,disabled:v,fullWidth:!0,sx:{textTransform:"none"},children:"Reject"})]})]})]})}},51070:(e,t,a)=>{a.d(t,{Bb:()=>l,xh:()=>c,y3:()=>d});var r=a(23464),s=a(14140),i=a(6267),n=a(87358);let o=i.Ii.isNativePlatform()?"https://pickom.qirelab.com":n.env.NEXT_PUBLIC_API_URL||"https://pickom.qirelab.com",c=r.A.create({baseURL:o,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});c.interceptors.request.use(async e=>{let t=s.j.currentUser;if(t)try{let a=await t.getIdToken();e.headers.Authorization="Bearer ".concat(a)}catch(e){}return e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e,e=>Promise.reject(e));let l=r.A.create({baseURL:o,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});async function d(){try{return await r.A.get("".concat(o,"/api"),{timeout:5e3}),!0}catch(e){return!1}}l.interceptors.response.use(e=>e,e=>Promise.reject(e))},78780:(e,t,a)=>{a.d(t,{F8:()=>i,aT:()=>o,createOffer:()=>s,i6:()=>n});var r=a(51070);let s=async e=>r.xh.post("/offers",e),i=async e=>r.xh.get("/offers/delivery/".concat(e)),n=async(e,t)=>r.xh.patch("/offers/".concat(e),t),o=async()=>r.xh.get("/offers/my")},97704:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var r=a(95155),s=a(12115),i=a(35695),n=a(18407),o=a(40541),c=a(9111),l=a(26564),d=a(11335),u=a(21888),h=a(43290),x=a(60807);let p=e=>e>99?"99+":e,f=(0,s.memo)(function(){let{className:e,unreadChatsCount:t=0,activeOrdersCount:a=0,unreadNotificationsCount:f=0,userRole:g}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=(0,i.useRouter)(),m=(0,i.usePathname)(),[v,y]=(0,s.useState)(()=>localStorage.getItem("userRole"));(0,s.useEffect)(()=>{if(!g){let e=null;m.startsWith("/available-deliveries")?e="picker":m.startsWith("/delivery-methods")&&(e="sender"),e&&e!==v&&(y(e),localStorage.setItem("userRole",e))}},[m,g,v]);let j=g||v,w=(0,s.useMemo)(()=>m.startsWith("/delivery-methods")||m.startsWith("/orders")||m.startsWith("/available-deliveries")?0:m.startsWith("/chat")?1:m.startsWith("/notifications")?2:3*!!m.startsWith("/profile"),[m]),[k,C]=(0,s.useState)(w),A=(0,s.useCallback)((e,t)=>{switch(C(t),t){case 0:"picker"===j?b.push("/available-deliveries"):b.push("/delivery-methods");break;case 1:b.push("/chats");break;case 2:b.push("/notifications");break;case 3:b.push("/profile")}},[b,j]);return(0,r.jsx)(n.A,{className:e,sx:{position:"fixed",bottom:0,left:0,right:0,width:"100vw",zIndex:1200,paddingBottom:"env(safe-area-inset-bottom)",paddingLeft:0,paddingRight:0,backgroundColor:"background.paper",borderTop:1,borderColor:"divider",borderRadius:0,boxShadow:"0px -2px 4px rgba(0, 0, 0, 0.1)"},elevation:0,children:(0,r.jsxs)(o.A,{value:k,onChange:A,sx:{backgroundColor:"background.paper",width:"100%",height:"68px",paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)"},children:[(0,r.jsx)(c.A,{label:"Orders",icon:(0,r.jsx)(l.default,{badgeContent:p(a),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,r.jsx)(d.default,{})})}),(0,r.jsx)(c.A,{label:"Chat",icon:(0,r.jsx)(l.default,{badgeContent:p(t),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,r.jsx)(u.A,{})})}),(0,r.jsx)(c.A,{label:"Notifications",icon:(0,r.jsx)(l.default,{badgeContent:p(f),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,r.jsx)(h.A,{})})}),(0,r.jsx)(c.A,{label:"Profile",icon:(0,r.jsx)(x.default,{})})]})})})}}]);