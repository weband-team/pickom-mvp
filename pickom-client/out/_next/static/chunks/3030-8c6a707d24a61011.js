"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3030],{6864:(e,t,a)=>{a.d(t,{$H:()=>s,HW:()=>n,TK:()=>i,op:()=>l,wz:()=>o});var r=a(51070);let o=async e=>(await r.xh.get("/user/".concat(e))).data,i=async(e,t)=>(await r.xh.put("/user/".concat(e),t)).data,n=async()=>(await r.xh.get("/auth/me")).data,s=async(e,t)=>(await r.xh.put("/user/".concat(e,"/online-status"),{isOnline:t})).data,l=async e=>(await r.xh.get("/user/".concat(e,"/balance"))).data},14140:(e,t,a)=>{a.d(t,{j:()=>n});var r=a(23915),o=a(45404);let i=(0,r.Wp)({apiKey:"AIzaSyDiclg8XNo2L1hDBoaSoHmFMBggUKYjHH4",authDomain:"pickom-mvp.firebaseapp.com",projectId:"pickom-mvp",storageBucket:"pickom-mvp.firebasestorage.app",messagingSenderId:"168767828055",appId:"1:168767828055:web:2853961b44970c114ab312"}),n=(0,o.xI)(i)},18986:(e,t,a)=>{a.d(t,{GS:()=>o});var r=a(51070);let o=async e=>r.xh.post("/rating",e)},21787:(e,t,a)=>{a.d(t,{IT:()=>l,S1:()=>p,TS:()=>f,XE:()=>c,confirmRecipient:()=>h,createDeliveryRequest:()=>n,fI:()=>i,qM:()=>u,rg:()=>g,updateDeliveryRequest:()=>d,vd:()=>o,zW:()=>s});var r=a(51070);let o=async()=>r.Bb.get("/delivery/pickers"),i=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"within-city";return r.Bb.get("/delivery/pickers/nearby?lat=".concat(e,"&lng=").concat(t,"&deliveryType=").concat(a))},n=async e=>r.xh.post("/delivery/requests",e),s=async()=>r.xh.get("/delivery/requests"),l=async e=>r.xh.get("/delivery/requests/".concat(e)),c=async(e,t)=>r.xh.put("/delivery/requests/".concat(e,"/status"),{status:t}),d=async(e,t)=>r.xh.patch("/delivery/requests/".concat(e),t),u=async()=>r.xh.get("/delivery/completed"),p=async()=>r.xh.get("/delivery/cancelled"),h=async(e,t)=>r.xh.put("/delivery/requests/".concat(e,"/confirm-recipient"),{confirmed:t}),g=async e=>r.xh.post("/delivery/find-receiver",{email:e}),f=async()=>r.xh.get("/delivery/incoming")},38464:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(31418),o=a(95155);let i=(0,r.A)((0,o.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},42663:(e,t,a)=>{a.d(t,{default:()=>x});var r=a(12115),o=a(52596),i=a(17472),n=a(75955),s=a(40680),l=a(10186),c=a(31418),d=a(95155);let u=(0,c.A)((0,d.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");var p=a(55170),h=a(90870);function g(e){return(0,h.Ay)("MuiAvatar",e)}(0,p.A)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var f=a(47798);let b=(0,n.Ay)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:a}=e;return[t.root,t[a.variant],a.colorDefault&&t.colorDefault]}})((0,s.A)(e=>{let{theme:t}=e;return{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(t.vars||t).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(t.vars||t).palette.background.default,...t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:{backgroundColor:t.palette.grey[400],...t.applyStyles("dark",{backgroundColor:t.palette.grey[600]})}}}]}})),v=(0,n.Ay)("img",{name:"MuiAvatar",slot:"Img"})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),m=(0,n.Ay)(u,{name:"MuiAvatar",slot:"Fallback"})({width:"75%",height:"75%"}),x=r.forwardRef(function(e,t){let a=(0,l.b)({props:e,name:"MuiAvatar"}),{alt:n,children:s,className:c,component:u="div",slots:p={},slotProps:h={},imgProps:x,sizes:y,src:k,srcSet:w,variant:A="circular",...j}=a,C=null,R={...a,component:u,variant:A},I=function(e){let{crossOrigin:t,referrerPolicy:a,src:o,srcSet:i}=e,[n,s]=r.useState(!1);return r.useEffect(()=>{if(!o&&!i)return;s(!1);let e=!0,r=new Image;return r.onload=()=>{e&&s("loaded")},r.onerror=()=>{e&&s("error")},r.crossOrigin=t,r.referrerPolicy=a,r.src=o,i&&(r.srcset=i),()=>{e=!1}},[t,a,o,i]),n}({...x,..."function"==typeof h.img?h.img(R):h.img,src:k,srcSet:w}),P=k||w,S=P&&"error"!==I;R.colorDefault=!S,delete R.ownerState;let W=(e=>{let{classes:t,variant:a,colorDefault:r}=e;return(0,i.A)({root:["root",a,r&&"colorDefault"],img:["img"],fallback:["fallback"]},g,t)})(R),[B,F]=(0,f.A)("root",{ref:t,className:(0,o.A)(W.root,c),elementType:b,externalForwardedProps:{slots:p,slotProps:h,component:u,...j},ownerState:R}),[M,q]=(0,f.A)("img",{className:W.img,elementType:v,externalForwardedProps:{slots:p,slotProps:{img:{...x,...h.img}}},additionalProps:{alt:n,src:k,srcSet:w,sizes:y},ownerState:R}),[T,z]=(0,f.A)("fallback",{className:W.fallback,elementType:m,externalForwardedProps:{slots:p,slotProps:h},shouldForwardComponentProp:!0,ownerState:R});return C=S?(0,d.jsx)(M,{...q}):s||0===s?s:P&&n?n[0]:(0,d.jsx)(T,{...z}),(0,d.jsx)(B,{...F,children:C})})},43452:(e,t,a)=>{a.d(t,{MobileContainer:()=>s});var r=a(95155);a(12115);var o=a(54581),i=a(18407),n=a(35695);let s=e=>{let{children:t,width:a=375,height:s=812,showFrame:l=!0,backgroundColor:c,showBottomNav:d=!0}=e,u=(0,n.usePathname)(),p=(null==u?void 0:u.includes("/login"))||(null==u?void 0:u.includes("/register")),h=d&&!p;return l?(0,r.jsx)(o.default,{sx:{display:"flex",justifyContent:"center",alignItems:"center",padding:3,backgroundColor:"#f5f5f5"},children:(0,r.jsx)(i.A,{elevation:3,sx:{width:a,height:h?"calc(".concat(s,"px - 70px)"):s,borderRadius:6,overflow:"hidden",position:"relative",bgcolor:c||"background.default",border:"8px solid #000000","&::before":{content:'""',position:"absolute",top:12,left:"50%",transform:"translateX(-50%)",width:134,height:6,backgroundColor:"#000000",borderRadius:3,zIndex:1},"&::after":{content:'""',position:"absolute",bottom:8,left:"50%",transform:"translateX(-50%)",width:134,height:5,backgroundColor:"#000000",borderRadius:2.5,zIndex:1}},children:(0,r.jsx)(o.default,{"data-mobile-container":!0,sx:{width:"100%",height:"100%",paddingTop:"calc(24px + var(--safe-area-top))",overflow:"auto",position:"relative","&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"},children:(0,r.jsx)(o.default,{sx:{paddingBottom:"calc(16px + var(--safe-area-bottom))",minHeight:"100%"},children:t})})})}):(0,r.jsx)(o.default,{"data-mobile-container":!0,sx:{width:"100vw",height:"100vh",bgcolor:c||"background.default",overflow:"hidden",position:"fixed",left:0,right:0,bottom:0,pt:"env(safe-area-inset-top)",pb:h?"68px":0,margin:0,"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"},children:(0,r.jsx)(o.default,{sx:{width:"100%",height:"100%",overflow:"auto",margin:0,padding:0,"&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none"},children:t})})}},51070:(e,t,a)=>{a.d(t,{Bb:()=>c,xh:()=>l,y3:()=>d});var r=a(23464),o=a(14140),i=a(6267),n=a(87358);let s=i.Ii.isNativePlatform()?"https://pickom.qirelab.com":n.env.NEXT_PUBLIC_API_URL||"https://pickom.qirelab.com",l=r.A.create({baseURL:s,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(async e=>{let t=o.j.currentUser;if(t)try{let a=await t.getIdToken();e.headers.Authorization="Bearer ".concat(a)}catch(e){}return e},e=>Promise.reject(e)),l.interceptors.response.use(e=>e,e=>Promise.reject(e));let c=r.A.create({baseURL:s,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});async function d(){try{return await r.A.get("".concat(s,"/api"),{timeout:5e3}),!0}catch(e){return!1}}c.interceptors.response.use(e=>e,e=>Promise.reject(e))},97704:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var r=a(95155),o=a(12115),i=a(35695),n=a(18407),s=a(40541),l=a(9111),c=a(26564),d=a(11335),u=a(21888),p=a(43290),h=a(60807);let g=e=>e>99?"99+":e,f=(0,o.memo)(function(){let{className:e,unreadChatsCount:t=0,activeOrdersCount:a=0,unreadNotificationsCount:f=0,userRole:b}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=(0,i.useRouter)(),m=(0,i.usePathname)(),[x,y]=(0,o.useState)(()=>localStorage.getItem("userRole"));(0,o.useEffect)(()=>{if(!b){let e=null;m.startsWith("/available-deliveries")?e="picker":m.startsWith("/delivery-methods")&&(e="sender"),e&&e!==x&&(y(e),localStorage.setItem("userRole",e))}},[m,b,x]);let k=b||x,w=(0,o.useMemo)(()=>m.startsWith("/delivery-methods")||m.startsWith("/orders")||m.startsWith("/available-deliveries")?0:m.startsWith("/chat")?1:m.startsWith("/notifications")?2:3*!!m.startsWith("/profile"),[m]),[A,j]=(0,o.useState)(w),C=(0,o.useCallback)((e,t)=>{switch(j(t),t){case 0:"picker"===k?v.push("/available-deliveries"):v.push("/delivery-methods");break;case 1:v.push("/chats");break;case 2:v.push("/notifications");break;case 3:v.push("/profile")}},[v,k]);return(0,r.jsx)(n.A,{className:e,sx:{position:"fixed",bottom:0,left:0,right:0,width:"100vw",zIndex:1200,paddingBottom:"env(safe-area-inset-bottom)",paddingLeft:0,paddingRight:0,backgroundColor:"background.paper",borderTop:1,borderColor:"divider",borderRadius:0,boxShadow:"0px -2px 4px rgba(0, 0, 0, 0.1)"},elevation:0,children:(0,r.jsxs)(s.A,{value:A,onChange:C,sx:{backgroundColor:"background.paper",width:"100%",height:"68px",paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)"},children:[(0,r.jsx)(l.A,{label:"Orders",icon:(0,r.jsx)(c.default,{badgeContent:g(a),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,r.jsx)(d.default,{})})}),(0,r.jsx)(l.A,{label:"Chat",icon:(0,r.jsx)(c.default,{badgeContent:g(t),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,r.jsx)(u.A,{})})}),(0,r.jsx)(l.A,{label:"Notifications",icon:(0,r.jsx)(c.default,{badgeContent:g(f),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,r.jsx)(p.A,{})})}),(0,r.jsx)(l.A,{label:"Profile",icon:(0,r.jsx)(h.default,{})})]})})})}}]);