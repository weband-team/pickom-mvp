"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9267],{6864:(e,t,a)=>{a.d(t,{$H:()=>o,HW:()=>n,TK:()=>s,op:()=>c,wz:()=>i});var r=a(51070);let i=async e=>(await r.xh.get("/user/".concat(e))).data,s=async(e,t)=>(await r.xh.put("/user/".concat(e),t)).data,n=async()=>(await r.xh.get("/auth/me")).data,o=async(e,t)=>(await r.xh.put("/user/".concat(e,"/online-status"),{isOnline:t})).data,c=async e=>(await r.xh.get("/user/".concat(e,"/balance"))).data},14140:(e,t,a)=>{a.d(t,{j:()=>n});var r=a(23915),i=a(45404);let s=(0,r.Wp)({apiKey:"AIzaSyDiclg8XNo2L1hDBoaSoHmFMBggUKYjHH4",authDomain:"pickom-mvp.firebaseapp.com",projectId:"pickom-mvp",storageBucket:"pickom-mvp.firebasestorage.app",messagingSenderId:"168767828055",appId:"1:168767828055:web:2853961b44970c114ab312"}),n=(0,i.xI)(s)},21787:(e,t,a)=>{a.d(t,{IT:()=>c,S1:()=>h,TS:()=>f,XE:()=>l,confirmRecipient:()=>p,createDeliveryRequest:()=>n,fI:()=>s,qM:()=>u,rg:()=>x,updateDeliveryRequest:()=>d,vd:()=>i,zW:()=>o});var r=a(51070);let i=async()=>r.Bb.get("/delivery/pickers"),s=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"within-city";return r.Bb.get("/delivery/pickers/nearby?lat=".concat(e,"&lng=").concat(t,"&deliveryType=").concat(a))},n=async e=>r.xh.post("/delivery/requests",e),o=async()=>r.xh.get("/delivery/requests"),c=async e=>r.xh.get("/delivery/requests/".concat(e)),l=async(e,t)=>r.xh.put("/delivery/requests/".concat(e,"/status"),{status:t}),d=async(e,t)=>r.xh.patch("/delivery/requests/".concat(e),t),u=async()=>r.xh.get("/delivery/completed"),h=async()=>r.xh.get("/delivery/cancelled"),p=async(e,t)=>r.xh.put("/delivery/requests/".concat(e,"/confirm-recipient"),{confirmed:t}),x=async e=>r.xh.post("/delivery/find-receiver",{email:e}),f=async()=>r.xh.get("/delivery/incoming")},37429:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(31418),i=a(95155);let s=(0,r.A)((0,i.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm-2 16-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9z"}),"VerifiedUser")},51070:(e,t,a)=>{a.d(t,{Bb:()=>l,xh:()=>c,y3:()=>d});var r=a(23464),i=a(14140),s=a(6267),n=a(87358);let o=s.Ii.isNativePlatform()?"https://pickom.qirelab.com":n.env.NEXT_PUBLIC_API_URL||"https://pickom.qirelab.com",c=r.A.create({baseURL:o,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});c.interceptors.request.use(async e=>{let t=i.j.currentUser;if(t)try{let a=await t.getIdToken();e.headers.Authorization="Bearer ".concat(a)}catch(e){}return e},e=>Promise.reject(e)),c.interceptors.response.use(e=>e,e=>Promise.reject(e));let l=r.A.create({baseURL:o,withCredentials:!0,timeout:3e4,headers:{"Content-Type":"application/json"}});async function d(){try{return await r.A.get("".concat(o,"/api"),{timeout:5e3}),!0}catch(e){return!1}}l.interceptors.response.use(e=>e,e=>Promise.reject(e))},52836:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(31418),i=a(95155);let s=(0,r.A)((0,i.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn")},54492:(e,t,a)=>{a.d(t,{A:()=>p});var r=a(12115),i=a(52596),s=a(17472),n=a(71116),o=a(75955),c=a(10186),l=a(53580),d=a(39101),u=a(95155);let h=(0,o.Ay)(n.default,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),p=r.forwardRef(function(e,t){let a=(0,c.b)({props:e,name:"MuiDialogTitle"}),{className:n,id:o,...p}=a,x=(e=>{let{classes:t}=e;return(0,s.A)({root:["root"]},l.t,t)})(a),{titleId:f=o}=r.useContext(d.A);return(0,u.jsx)(h,{component:"h2",className:(0,i.A)(x.root,n),ownerState:a,ref:t,variant:"h6",id:null!=o?o:f,...p})})},64341:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(31418),i=a(95155);let s=(0,r.A)((0,i.jsx)("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday")},70005:(e,t,a)=>{a.d(t,{A:()=>u});var r=a(95155),i=a(54581),s=a(71803),n=a(42663),o=a(71116),c=a(37429),l=a(26290),d=a(58343);function u(e){let{receiver:t,onContactClick:a,variant:u="compact"}=e;if(t.recipientId&&t.recipientUser){let e=t.recipientUser.isPhoneVerified&&t.recipientUser.isEmailVerified;return(0,r.jsxs)(i.default,{sx:{p:2,borderRadius:2,backgroundColor:"background.paper",border:1,borderColor:"divider"},children:[(0,r.jsxs)(s.A,{direction:"row",spacing:2,alignItems:"flex-start",children:[(0,r.jsx)(n.default,{src:t.recipientUser.avatarUrl,sx:{width:"full"===u?64:48,height:"full"===u?64:48,bgcolor:"success.main",fontSize:"full"===u?"1.5rem":"1.2rem"},children:t.recipientUser.fullName.charAt(0).toUpperCase()}),(0,r.jsxs)(i.default,{sx:{flex:1},children:[(0,r.jsxs)(i.default,{sx:{display:"flex",alignItems:"center",gap:.5,mb:.5},children:[(0,r.jsx)(o.default,{variant:"full"===u?"h6":"subtitle2",sx:{fontWeight:600},children:t.recipientUser.fullName}),e&&(0,r.jsx)(c.A,{sx:{fontSize:18,color:"success.main"}})]}),(0,r.jsxs)(o.default,{variant:"body2",color:"text.secondary",children:["â­ ","number"==typeof t.recipientUser.rating?t.recipientUser.rating.toFixed(1):"0.0"]})]})]}),a&&(0,r.jsx)(d.$n,{variant:"contained",fullWidth:!0,onClick:a,sx:{mt:2},children:"Contact Receiver"})]})}return t.recipientPhone?(0,r.jsxs)(i.default,{sx:{p:2,borderRadius:2,backgroundColor:"background.paper",border:1,borderColor:"divider"},children:[(0,r.jsxs)(s.A,{direction:"row",spacing:2,alignItems:"center",children:[(0,r.jsx)(l.default,{sx:{color:"text.secondary",fontSize:24}}),(0,r.jsxs)(i.default,{sx:{flex:1},children:[(0,r.jsx)(o.default,{variant:"caption",color:"text.secondary",children:"Receiver Phone"}),(0,r.jsx)(o.default,{variant:"body1",sx:{fontWeight:600},children:t.recipientPhone})]})]}),(0,r.jsx)(d.$n,{variant:"contained",fullWidth:!0,onClick:()=>window.open("tel:".concat(t.recipientPhone)),sx:{mt:2},startIcon:(0,r.jsx)(l.default,{}),children:"Call"})]}):null}},97704:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var r=a(95155),i=a(12115),s=a(35695),n=a(18407),o=a(40541),c=a(9111),l=a(26564),d=a(11335),u=a(21888),h=a(43290),p=a(60807);let x=e=>e>99?"99+":e,f=(0,i.memo)(function(){let{className:e,unreadChatsCount:t=0,activeOrdersCount:a=0,unreadNotificationsCount:f=0,userRole:g}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=(0,s.useRouter)(),b=(0,s.usePathname)(),[m,y]=(0,i.useState)(()=>localStorage.getItem("userRole"));(0,i.useEffect)(()=>{if(!g){let e=null;b.startsWith("/available-deliveries")?e="picker":b.startsWith("/delivery-methods")&&(e="sender"),e&&e!==m&&(y(e),localStorage.setItem("userRole",e))}},[b,g,m]);let j=g||m,k=(0,i.useMemo)(()=>b.startsWith("/delivery-methods")||b.startsWith("/orders")||b.startsWith("/available-deliveries")?0:b.startsWith("/chat")?1:b.startsWith("/notifications")?2:3*!!b.startsWith("/profile"),[b]),[C,A]=(0,i.useState)(k),w=(0,i.useCallback)((e,t)=>{switch(A(t),t){case 0:"picker"===j?v.push("/available-deliveries"):v.push("/delivery-methods");break;case 1:v.push("/chats");break;case 2:v.push("/notifications");break;case 3:v.push("/profile")}},[v,j]);return(0,r.jsx)(n.A,{className:e,sx:{position:"fixed",bottom:0,left:0,right:0,width:"100vw",zIndex:1200,paddingBottom:"env(safe-area-inset-bottom)",paddingLeft:0,paddingRight:0,backgroundColor:"background.paper",borderTop:1,borderColor:"divider",borderRadius:0,boxShadow:"0px -2px 4px rgba(0, 0, 0, 0.1)"},elevation:0,children:(0,r.jsxs)(o.A,{value:C,onChange:w,sx:{backgroundColor:"background.paper",width:"100%",height:"68px",paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)"},children:[(0,r.jsx)(c.A,{label:"Orders",icon:(0,r.jsx)(l.default,{badgeContent:x(a),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,r.jsx)(d.default,{})})}),(0,r.jsx)(c.A,{label:"Chat",icon:(0,r.jsx)(l.default,{badgeContent:x(t),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,r.jsx)(u.A,{})})}),(0,r.jsx)(c.A,{label:"Notifications",icon:(0,r.jsx)(l.default,{badgeContent:x(f),color:"error",max:99,sx:{"& .MuiBadge-badge":{backgroundColor:"#FF9500",color:"#000000",fontWeight:600}},children:(0,r.jsx)(h.A,{})})}),(0,r.jsx)(c.A,{label:"Profile",icon:(0,r.jsx)(p.default,{})})]})})})}}]);